{"version":3,"sources":["webpack:///src/app/models/tenant.ts","webpack:///src/app/views/error/error.component.ts","webpack:///src/app/views/error/error.component.html","webpack:///src/app/views/password-forgotten/password-forgotten.component.ts","webpack:///src/app/views/password-forgotten/password-forgotten.component.html","webpack:///src/app/models/tenant-relation.ts","webpack:///src/app/models/user.ts","webpack:///src/app/components/user-management/user-management.component.ts","webpack:///src/app/components/user-management/user-management.component.html","webpack:///src/app/components/calendar/calendar.component.ts","webpack:///src/app/components/calendar/calendar.component.html","webpack:///src/app/components/event-select/event-select.component.ts","webpack:///src/app/components/event-select/event-select.component.html","webpack:///src/environments/environment.ts","webpack:///src/app/views/imprint/imprint.component.ts","webpack:///src/app/views/imprint/imprint.component.html","webpack:///src/app/helpers/auth.guard.ts","webpack:///src/app/components/toast/toast.component.ts","webpack:///src/app/components/toast/toast.component.html","webpack:///src/app/views/events/events.component.ts","webpack:///src/app/views/events/events.component.html","webpack:///src/app/models/category.ts","webpack:///src/app/services/subscription.service.ts","webpack:///src/app/views/tenant-registration/tenant-registration.component.ts","webpack:///src/app/views/tenant-registration/tenant-registration.component.html","webpack:///src/app/views/tenant/tenant.component.ts","webpack:///src/app/views/tenant/tenant.component.html","webpack:///src/app/helpers/basic-auth.interceptor.ts","webpack:///src/app/services/notification.service.ts","webpack:///src/app/services/app.service.ts","webpack:///src/app/views/login/login.component.ts","webpack:///src/app/views/login/login.component.html","webpack:///node_modules/moment/locale sync ^\\.\\/.*$","webpack:///src/app/helpers/tenant.guard.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/models/subscription.ts","webpack:///src/app/models/event-relation.ts","webpack:///src/app/components/subscription/subscription.component.ts","webpack:///src/app/components/subscription/subscription.component.html","webpack:///src/app/views/legal/legal.component.ts","webpack:///src/app/views/legal/legal.component.html","webpack:///common/tenant-relation.ts","webpack:///common/frontend.routes.ts","webpack:///src/app/views/registration/registration.component.ts","webpack:///src/app/views/registration/registration.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/models/event.ts","webpack:///src/app/services/category.service.ts","webpack:///src/$_lazy_route_resource lazy namespace object","webpack:///src/app/services/tenant.service.ts","webpack:///src/app/services/authentication.service.ts","webpack:///src/app/helpers/error.interceptor.ts","webpack:///src/app/components/category-management/category-management.component.ts","webpack:///src/app/components/category-management/category-management.component.html","webpack:///src/app/services/event.service.ts","webpack:///src/app/views/complete-registration/complete-registration.component.ts","webpack:///src/app/views/complete-registration/complete-registration.component.html","webpack:///src/app/views/dashboard/dashboard.component.ts","webpack:///src/app/views/dashboard/dashboard.component.html","webpack:///src/app/components/loading/loading.component.ts","webpack:///src/app/components/loading/loading.component.html","webpack:///src/app/views/password-reset/password-reset.component.ts","webpack:///src/app/views/password-reset/password-reset.component.html","webpack:///src/app/services/user.service.ts","webpack:///src/app/views/my-accounts/my-accounts.component.ts","webpack:///src/app/views/my-accounts/my-accounts.component.html","webpack:///src/app/views/intro/intro.component.ts","webpack:///src/app/views/intro/intro.component.html","webpack:///src/app/models/invitation.ts","webpack:///src/app/app-routing.module.ts","webpack:///src/app/views/profile/profile.component.ts","webpack:///src/app/views/profile/profile.component.html","webpack:///src/app/models/week.ts","webpack:///src/app/models/participant.ts","webpack:///src/main.ts"],"names":["Tenant","name","path","shadeColor","color","TenantAdapter","sanitizer","item","t","id","consentTeaser1","consentText1","active","consentTeaser2","consentText2","stripeUserId","logo","length","bypassSecurityTrustResourceUrl","subscriptionUntil","toDate","providedIn","percent","R","parseInt","substring","G","B","RR","toString","GG","BB","ErrorComponent","route","type","snapshot","params","errortype","errorTitle","errorMessage","selector","templateUrl","styleUrls","PasswordForgottenComponent","userService","router","appService","resetForm","email","required","loading","passwordResetStatus","getCurrentUser","navigate","userSubscription","user","subscribe","PROFILE","invalid","markAllAsTouched","initiatePasswordReset","get","value","error","console","TenantRelation","role","OWNER","ADMIN","roleName","TenantRelationAdapter","userAdapter","tenantAdapter","relation","userId","tenantId","adapt","tenant","User","eventOrEventId","eventId","eventRelations","find","undefined","eventSeriesId","eventSeries","UserAdapter","eventRelationAdapter","u","rel","push","modalRef","UserManagementComponent","tenantService","modalService","eventService","notification","ROLE","inviteAdminForm","tenantUserRelations","invitedUser","userExists","selectedUser","getUsers","relations","hasRole","getOpenInvitations","invitations","activate","activatedUser","index","toLowerCase","existingMember","addUser","invitation","reset","confirm","title","text","yesButtonClass","yesButtonText","yesCallback","removeFromTenant","getAll","setRole","success","revokeOpenInvitations","template","show","getEvents","events","singleEvents","event","singleOccurence","hasAccessToEvent","denyAccessToEvent","allowAccessToEvent","denyAccessToEventSeries","allowAccessToEventSeries","inviteNewAdmin","CalendarComponent","eventClicked","statusToggled","today","dayOfYear","months","Array","m","month","putEventsInWeeks","weeks","week","startOfWeek","endOfWeek","format","isoWeek","emit","clickEvent","stopPropagation","days","day","weekday","date","sortOrder","weekNumberFourWeeksAgo","clone","subtract","startOfWeekFourWeeksAgo","startOf","endOfWeekFourWeeksAgo","endOf","kw","add","isBetween","EventSelectComponent","selected","free","maxSeats","takenSeats","environment","production","apiUrl","domain","stripePubKey","ImprintComponent","AuthGuard","authenticationService","state","tenantPath","LOGIN","queryParams","returnUrl","url","toastService","ToastComponent","toast","textOrTpl","EventsComponent","categoryService","uniqueEvents","eventsInTimeframe","timeColumns","selectedEvent","successfullyRegistered","categoryOptions","selectedCategory","consentText1Shown","consentText2Shown","getByPath","status","createRegisterForm","load","tenantSubscription","setColor","loadEvents","registerForm","contains","addControl","removeControl","unsubscribe","start","end","observables","getCurrentTenant","getCategories","results","disabled","categories","category","categoryId","sort","unshift","markAsUntouched","determineUniqueEvents","eventsToDisplay","generateWeeksNeededToDisplayEvents","uniqueEvent","displayName","weekDay","displayTime","number","maxDate","Date","firstname","lastname","phone","street","zip","city","rememberMe","dataprivacy","previousData","JSON","parse","localStorage","getItem","setValue","setTimeout","document","getElementsByTagName","scrollIntoView","formControlName","touched","participant","setItem","stringify","removeItem","addParticipant","Category","icon","CategoryAdapter","SubscriptionService","http","adapter","subscription","post","TenantRegistrationComponent","currentSubscription","pathCheck","pathTaken","registrationForm","maxLength","pattern","agbCheck","dataPrivacyCheck","checkPath","tenantToCreate","create","getCurrentTenantRelations","setCurrentTenantRelations","TENANT_MANAGEMENT","e","onSubmit","TenantComponent","logoValidationError","operationOngoing","updateCore","updateLegal","deleteTenant","tenantForm","legalForm","setFormValues","updatedTenant","pathChanged","update","setCurrentTenant","desiredNewPath","newLogo","newLogoFile","target","files","kiloBytes","Math","round","size","fileSize","toFixed","myReader","FileReader","onloadend","result","readAsDataURL","getElementById","click","BasicAuthInterceptor","request","next","isLoggedIn","authdata","isApiUrl","startsWith","setHeaders","Authorization","handle","NotificationService","toasts","confirmOptions","options","filter","message","classname","delay","autohide","noButtonText","ceil","random","ConfirmModalComponent","initialState","ignoreBackdropClick","noButtonClass","hide","noCallback","confirmNo","confirmYes","AppService","userSubject","asObservable","tenantSubject","tenantRelationsSubject","tenantRelations","colorDarkened","querySelector","style","cssText","LoginComponent","loginForm","username","password","submitted","ROUTES","TENANT_PLANNER","MY_TENANTS","login","data","split","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","keys","webpackContextKeys","Object","resolve","module","exports","TenantGuard","isAllowed","hasAccess","pipe","tenantRelation","requiredRole","TENANT_EVENTS","AppComponent","ccService","loadTenantRelations","loadEventsWithAccessTo","MEMBER","tr","isOwner","isAdmin","isMember","logout","Subscription","paid","pricePerMonth","createdAt","SubscriptionAdapter","EventRelation","EventRelationAdapter","SubscriptionComponent","subscriptionService","subscriptions","subscriptionForm","linkToCustomerPortal","getLinkToStripCustomerPortal","responseWithLink","link","initializePayment","responseWithStripeSessionID","stripe","Stripe","redirectToCheckout","sessionId","stripeSessionID","then","log","diff","LegalComponent","RegistrationComponent","register","cookieConfig","cookie","position","theme","palette","popup","background","button","border","content","dismiss","AppModule","forRoot","modules","toolbar","list","indent","align","placeholder","declarations","imports","providers","bootstrap","Event","includeWeekDay","now","isAfter","identicalEvent","time","EventAdapter","isoWeekday","hours","minutes","registrationOpenFrom","CategoryService","put","webpackEmptyAsyncContext","Promise","TenantService","tenantRelationAdapter","invitationAdapter","domSanitizer","checkPathSubscription","force","tenantToUpdate","sanitize","RESOURCE_URL","invitationId","pathToCheck","checkResultReference","potentiallyExistingTenant","AuthenticationService","storedData","setCurrentUser","loggedInUser","window","btoa","existingUserData","updatedUserData","assign","ErrorInterceptor","err","statusText","CategoryManagementComponent","categoriesBeingEdited","categoryForm","newCategory","iconClassNames","includes","categoryToUpdate","validationPassed","updateCategory","updatedCategory","splice","indexOf","createCategory","createdCategory","deleteCategory","isCategoryUnique","i","iconSelectionModal","categoryBeingEdited","iconClassName","EventService","eventAdapter","participantAdapter","privateEvents","participantId","headers","set","downloadLink","responseType","pdfBlob","blob","Blob","fileName","displayDate","CompleteRegistrationComponent","noCode","activated","loggedIn","finishRegistration","VIEW","DashboardComponent","newEventSeriesFormShown","newSingleEventFormShown","eventBeingEdited","editEventForm","min","participants","addParticipantForm","showAddParticipantForm","addParticipantSuccess","view","LIST","eventsOpened","loadAllEvents","createNewEventSeriesForm","createNewSingleEventForm","orgMembers","allEvents","unique","weekStart","weekEnd","eventsInThisWeek","newEventSeriesForm","fromDate","newSingleEventForm","valid","createEvent","userIdsAllowedOnNewEvent","startOfRegistration","seconds","milliseconds","createdEvent","formControl","setDisabled","uniqueEventSeriesIndex","eventToDelete","deleteEvent","deleteEventSeries","downloadPdf","categoryById","lastEventOfSeries","optionalCategory","setValidators","updatedEventData","updateEvent","updateEventSeries","isInPast","getParticipants","deleteParticipant","createdParticipant","eventsInRow","lastEvent","LoadingComponent","textClass","PasswordResetComponent","passwordForm","passwordSet","resetPassword","UserService","payload","oldPassword","newPassword","MyAccountsComponent","loadTenantsAndInvitations","getPendingInvitations","acceptInvitation","declineInvitation","IntroComponent","gallery","movable","elementId","behavior","block","inline","imageID","viewer","navbar","scrollToElement","Invitation","InvitationAdapter","routes","HOME","component","REGISTER_TENANT","canActivate","PASSWORD_FORGOTTEN","PASSWORD_RESET","REGISTER_USER","IMPRINT","LEGAL","REGISTER_USER_FINISH","children","redirectTo","AppRoutingModule","provide","useClass","multi","ProfileComponent","authService","nameForm","nameChange","passwordChange","accountDeletion","getProfile","updatePayload","updateProfile","updatedUser","updatePassword","deleteProfile","Week","Participant","ParticipantAdapter","bootstrapModule"],"mappings":"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","file":"main-es5.js","sourcesContent":["import { TenantI } from '../../../../common/tenant';\r\nimport { Injectable } from '@angular/core';\r\nimport { Adapter } from '../helpers/adapter';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport * as moment from 'moment';\r\n\r\nexport class Tenant implements TenantI {\r\n  id?: string;\r\n  name: string;\r\n  active: boolean;\r\n  logo: string;\r\n  path: string;\r\n  consentTeaser1: string;\r\n  consentText1: string;\r\n  consentTeaser2: string;\r\n  consentText2: string;\r\n  color: string;\r\n  subscriptionUntil: Date;\r\n  stripeUserId?: string;\r\n  get colorDarkened(): string {\r\n    return shadeColor(this.color, -15);\r\n  }\r\n\r\n  constructor(name: string, path: string) {\r\n    this.name = name;\r\n    this.path = path;\r\n  }\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class TenantAdapter implements Adapter<Tenant> {\r\n  constructor(private sanitizer: DomSanitizer) {}\r\n  adapt(item: any): Tenant {\r\n    const t = new Tenant(item.name, item.path);\r\n    t.id = item.id;\r\n    t.consentTeaser1 = item.consentTeaser1;\r\n    t.consentText1 = item.consentText1;\r\n    t.active = item.active;\r\n    t.consentTeaser2 = item.consentTeaser2;\r\n    t.consentText2 = item.consentText2;\r\n    t.color = item.color;\r\n    t.stripeUserId = item.stripeUserId;\r\n    if (item.logo && item.logo.length > 0) {\r\n      t.logo = this.sanitizer.bypassSecurityTrustResourceUrl(\r\n        item.logo\r\n      ) as string;\r\n    } else {\r\n      t.logo = null;\r\n    }\r\n    if (item.subscriptionUntil) {\r\n      t.subscriptionUntil = moment(item.subscriptionUntil).toDate();\r\n    }\r\n    return t;\r\n  }\r\n}\r\n\r\nfunction shadeColor(color: string, percent: number) {\r\n  let R = parseInt(color.substring(1, 3), 16);\r\n  let G = parseInt(color.substring(3, 5), 16);\r\n  let B = parseInt(color.substring(5, 7), 16);\r\n\r\n  R = parseInt(`${(R * (100 + percent)) / 100}`);\r\n  G = parseInt(`${(G * (100 + percent)) / 100}`);\r\n  B = parseInt(`${(B * (100 + percent)) / 100}`);\r\n\r\n  R = R < 255 ? R : 255;\r\n  G = G < 255 ? G : 255;\r\n  B = B < 255 ? B : 255;\r\n\r\n  let RR = R.toString(16).length == 1 ? '0' + R.toString(16) : R.toString(16);\r\n  let GG = G.toString(16).length == 1 ? '0' + G.toString(16) : G.toString(16);\r\n  let BB = B.toString(16).length == 1 ? '0' + B.toString(16) : B.toString(16);\r\n\r\n  return '#' + RR + GG + BB;\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'error',\r\n  templateUrl: './error.component.html',\r\n  styleUrls: ['./error.component.scss'],\r\n})\r\nexport class ErrorComponent implements OnInit {\r\n  errorTitle: string;\r\n  errorMessage: string;\r\n\r\n  constructor(private route: ActivatedRoute) {}\r\n\r\n  ngOnInit() {\r\n    // extract the error type parameter and display it accordingly\r\n    const type = this.route.snapshot.params.errortype;\r\n    if (type === 'account-not-found') {\r\n      this.errorTitle = 'Pfad ungültig';\r\n      this.errorMessage = 'Die aufgerufene URL existiert nicht';\r\n    } else {\r\n      this.errorTitle = 'Fehler';\r\n      this.errorMessage = 'Es ist ein Fehler aufgetreten';\r\n    }\r\n  }\r\n}\r\n","<h2>{{errorTitle}}</h2>\r\n<div class=\"alert alert-danger mt-3 mb-3\">\r\n  {{ errorMessage }}\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { AppService } from 'src/app/services/app.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { ROUTES } from '../../../../../common/frontend.routes';\r\n\r\n@Component({\r\n  selector: 'app-password-forgotten',\r\n  templateUrl: './password-forgotten.component.html',\r\n  styleUrls: ['./password-forgotten.component.scss'],\r\n})\r\nexport class PasswordForgottenComponent implements OnInit {\r\n  resetForm: FormGroup = new FormGroup({\r\n    email: new FormControl('', [Validators.required, Validators.email]),\r\n  });\r\n  loading = false;\r\n  returnUrl: string;\r\n  userSubscription: Subscription;\r\n  passwordResetStatus = '';\r\n\r\n  constructor(\r\n    private userService: UserService,\r\n    private router: Router,\r\n    private appService: AppService\r\n  ) {\r\n    // redirect to home if already logged in\r\n    if (this.appService.getCurrentUser()) {\r\n      this.router.navigate(['/']);\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // check if there is a logged-in user already. if so, forward directly to the profile\r\n    this.userSubscription = this.appService.user.subscribe(user => {\r\n      if (user) {\r\n        this.router.navigate([`/${ROUTES.PROFILE}`]);\r\n      }\r\n    });\r\n  }\r\n\r\n  requestPasswordReset(): void {\r\n    // if a valid email is given, use that email to send a password reset mail to\r\n    if (this.resetForm.invalid) {\r\n      this.resetForm.markAllAsTouched();\r\n      return;\r\n    }\r\n    this.loading = true;\r\n    this.userService\r\n      .initiatePasswordReset(this.resetForm.get('email').value)\r\n      .subscribe(\r\n        () => {\r\n          this.passwordResetStatus = 'success';\r\n          this.loading = false;\r\n        },\r\n        error => {\r\n          console.error(error);\r\n          this.passwordResetStatus = 'error';\r\n          this.loading = false;\r\n        }\r\n      );\r\n  }\r\n}\r\n","<div class=\"row\">\r\n  <div class=\"col-12 col-md-8 offset-md-2 col-xl-4 offset-xl-4\">\r\n    <div class=\"card\">\r\n      <h4 class=\"card-header\">Passwort Rücksetzung</h4>\r\n      <div class=\"card-body\">\r\n        <form\r\n          [formGroup]=\"resetForm\"\r\n          (ngSubmit)=\"requestPasswordReset()\"\r\n          *ngIf=\"passwordResetStatus !== 'success'\"\r\n        >\r\n          <div class=\"form-group\">\r\n            <label for=\"email\">Email</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"email\"\r\n              formControlName=\"email\"\r\n              class=\"form-control\"\r\n              [ngClass]=\"{\r\n                'is-invalid':\r\n                  resetForm.get('email').invalid &&\r\n                  resetForm.get('email').touched\r\n              }\"\r\n              required\r\n            />\r\n            <div\r\n              *ngIf=\"\r\n                resetForm.get('email').errors && resetForm.get('email').touched\r\n              \"\r\n              class=\"invalid-feedback\"\r\n            >\r\n              <div *ngIf=\"resetForm.get('email').errors.required\">\r\n                Bitte Email angeben\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"text-right\">\r\n            <button [disabled]=\"loading\" class=\"btn btn-success\">\r\n              <span\r\n                *ngIf=\"loading\"\r\n                class=\"spinner-border spinner-border-sm mr-1\"\r\n              ></span>\r\n              Passwort zurücksetzen\r\n            </button>\r\n          </div>\r\n        </form>\r\n        <div\r\n          *ngIf=\"passwordResetStatus === 'success'\"\r\n          class=\"alert alert-success text-center mt-3 mb-0\"\r\n        >\r\n          Falls Ihre Email-Adresse im System bekannt ist, schicken wir Ihnen\r\n          eine Email mit einem Link zum Passwort-Reset zu.\r\n        </div>\r\n        <div\r\n          *ngIf=\"passwordResetStatus === 'error'\"\r\n          class=\"alert alert-warning text-center mt-3 mb-0\"\r\n        >\r\n          Beim Passwort-Reset trat ein Fehler auf. Bitte versuchen Sie es später\r\n          nochmals\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { ROLE, TenantRelationI } from '../../../../common/tenant-relation';\r\nimport { Injectable } from '@angular/core';\r\nimport { Adapter } from '../helpers/adapter';\r\nimport { User, UserAdapter } from './user';\r\nimport { Tenant, TenantAdapter } from './tenant';\r\n\r\nexport class TenantRelation implements TenantRelationI {\r\n  id: string;\r\n  active: boolean;\r\n  user?: User;\r\n  userId: string;\r\n  tenant?: Tenant;\r\n  tenantId: string;\r\n  role: ROLE;\r\n\r\n  isOwner(): boolean {\r\n    return this.role === ROLE.OWNER;\r\n  }\r\n\r\n  isAdmin(): boolean {\r\n    return this.role === ROLE.OWNER || this.role === ROLE.ADMIN;\r\n  }\r\n\r\n  isMember(): boolean {\r\n    return true;\r\n  }\r\n\r\n  hasRole(roleName: string): boolean {\r\n    if (this.role === ROLE.OWNER) return true;\r\n    if (this.role === ROLE.ADMIN && roleName !== ROLE.OWNER) return true;\r\n    return false;\r\n  }\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class TenantRelationAdapter implements Adapter<TenantRelation> {\r\n  constructor(\r\n    private userAdapter: UserAdapter,\r\n    private tenantAdapter: TenantAdapter\r\n  ) {}\r\n  adapt(item: any): TenantRelation {\r\n    const relation = new TenantRelation();\r\n    relation.id = item.id;\r\n    relation.active = item.active;\r\n    relation.userId = item.userId;\r\n    relation.tenantId = item.tenantId;\r\n    relation.role = item.role;\r\n    if (item.user) {\r\n      relation.user = this.userAdapter.adapt(item.user);\r\n    }\r\n    if (item.tenant) {\r\n      relation.tenant = this.tenantAdapter.adapt(item.tenant);\r\n    }\r\n    return relation;\r\n  }\r\n}\r\n","import { UserI } from '../../../../common/user';\r\nimport { Injectable } from '@angular/core';\r\nimport { Adapter } from '../helpers/adapter';\r\nimport { EventRelation, EventRelationAdapter } from './event-relation';\r\nimport { each } from 'lodash';\r\nimport { Event } from './event';\r\n\r\nexport class User implements UserI {\r\n  id: string;\r\n  tenantId: string;\r\n  email: string;\r\n  name: string;\r\n  password: string;\r\n  authdata?: string;\r\n  active: boolean;\r\n  eventRelations: EventRelation[];\r\n\r\n  constructor(email: string) {\r\n    this.email = email;\r\n  }\r\n\r\n  public hasAccessToEvent(eventOrEventId: string | Event): boolean {\r\n    if (typeof eventOrEventId === 'string') {\r\n      const eventId = eventOrEventId;\r\n      return (\r\n        this.eventRelations &&\r\n        (this.eventRelations.find(relation => relation.eventId === eventId) !==\r\n          undefined ||\r\n          this.eventRelations.find(\r\n            relation => relation.eventSeriesId === eventId\r\n          ) !== undefined)\r\n      );\r\n    } else {\r\n      return (\r\n        this.eventRelations &&\r\n        (this.eventRelations.find(\r\n          relation => relation.eventId === eventOrEventId.id\r\n        ) !== undefined ||\r\n          (eventOrEventId.eventSeries &&\r\n            this.eventRelations.find(\r\n              relation =>\r\n                relation.eventSeriesId === eventOrEventId.eventSeries.id\r\n            ) !== undefined))\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class UserAdapter implements Adapter<User> {\r\n  constructor(private eventRelationAdapter: EventRelationAdapter) {}\r\n  adapt(item: any): User {\r\n    const u = new User(item.email);\r\n    u.id = item.id;\r\n    u.name = item.name;\r\n    u.tenantId = item.tenantId;\r\n    u.active = item.active;\r\n    u.eventRelations = [];\r\n    if (item.eventRelations) {\r\n      each(item.eventRelations, rel => {\r\n        u.eventRelations.push(this.eventRelationAdapter.adapt(rel));\r\n      });\r\n    }\r\n    return u;\r\n  }\r\n}\r\n","import { Component, Input, OnInit, TemplateRef } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { reject, findIndex, find, filter, map, uniqBy, sortBy } from 'lodash';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\r\nimport { Invitation } from 'src/app/models/invitation';\r\nimport { Tenant } from 'src/app/models/tenant';\r\nimport { TenantRelation } from 'src/app/models/tenant-relation';\r\nimport { User } from 'src/app/models/user';\r\nimport { Event } from 'src/app/models/event';\r\nimport { AppService } from 'src/app/services/app.service';\r\nimport { EventService } from 'src/app/services/event.service';\r\nimport { TenantService } from 'src/app/services/tenant.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { ROUTES } from '../../../../../common/frontend.routes';\r\nimport { ROLE } from '../../../../../common/tenant-relation';\r\nimport { EventSeriesI } from '../../../../../common/event-series';\r\nimport { NotificationService } from 'src/app/services/notification.service';\r\n\r\n@Component({\r\n  selector: 'user-management',\r\n  templateUrl: './user-management.component.html',\r\n  styleUrls: ['./user-management.component.scss'],\r\n})\r\nexport class UserManagementComponent implements OnInit {\r\n  ROLE = ROLE;\r\n  inviteAdminForm: FormGroup = new FormGroup({\r\n    email: new FormControl('', [Validators.required, Validators.email]),\r\n  });\r\n  tenantUserRelations: TenantRelation[] = null;\r\n  @Input()\r\n  tenant: Tenant;\r\n  invitations: Invitation[];\r\n  invitedUser: string = null;\r\n  userExists: string = null;\r\n  modalRef: BsModalRef;\r\n  selectedUser: User = null;\r\n  singleEvents: Event[];\r\n  eventSeries: EventSeriesI[];\r\n\r\n  constructor(\r\n    private userService: UserService,\r\n    private tenantService: TenantService,\r\n    private appService: AppService,\r\n    private modalService: BsModalService,\r\n    private router: Router,\r\n    private eventService: EventService,\r\n    private notification: NotificationService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    // load users for this tenant\r\n    this.tenantService\r\n      .getUsers(this.tenant.id)\r\n      .subscribe((relations: TenantRelation[]) => {\r\n        this.tenantUserRelations = sortBy(relations, 'user.name');\r\n      });\r\n    if (this.appService.hasRole(this.tenant.id, ROLE.OWNER)) {\r\n      this.tenantService\r\n        .getOpenInvitations(this.tenant.id)\r\n        .subscribe((invitations: Invitation[]) => {\r\n          this.invitations = sortBy(invitations, 'email');\r\n        });\r\n    } else {\r\n      this.invitations = null;\r\n    }\r\n  }\r\n\r\n  activate(user: User): void {\r\n    this.userService\r\n      .activate(this.tenant.id, user.id)\r\n      .subscribe((activatedUser: User) => {\r\n        const index = findIndex(this.tenantUserRelations, { userId: user.id });\r\n        this.tenantUserRelations[index].active = true;\r\n      });\r\n  }\r\n\r\n  inviteNewAdmin(): void {\r\n    this.invitedUser = null;\r\n    this.userExists = null;\r\n    if (this.inviteAdminForm.invalid) {\r\n      this.inviteAdminForm.markAllAsTouched();\r\n      return;\r\n    }\r\n    // check if an active admin already exists with the entered email address\r\n    const email = this.inviteAdminForm.get('email').value.toLowerCase();\r\n    const existingMember = find(\r\n      this.tenantUserRelations,\r\n      (relation: TenantRelation) => {\r\n        return relation.user.email.toLowerCase() === email;\r\n      }\r\n    );\r\n    if (existingMember) {\r\n      this.userExists =\r\n        'Ein Nutzer mit Email Adresse ' + email + ' existiert bereits';\r\n      return;\r\n    }\r\n    this.tenantService\r\n      .addUser(this.tenant.id, this.inviteAdminForm.get('email').value)\r\n      .subscribe(\r\n        (invitation: Invitation) => {\r\n          // only add the invitation to the list if there is no invitation with this email yet\r\n          if (!find(this.invitations, { email: invitation.email })) {\r\n            this.invitations.push(invitation);\r\n          }\r\n          this.invitedUser = invitation.email + ' wurde eingeladen';\r\n          this.inviteAdminForm.reset();\r\n        },\r\n        error => {\r\n          console.error(error);\r\n          this.notification.error('Es trat ein Fehler auf');\r\n        }\r\n      );\r\n  }\r\n\r\n  delete(user: User): void {\r\n    this.notification.confirm({\r\n      title: 'Nutzer entfernen?',\r\n      text: 'Wirklich diesen Nutzer entfernen?',\r\n      yesButtonClass: 'btn-danger',\r\n      yesButtonText: 'Entfernen',\r\n      yesCallback: () => {\r\n        this.userService.removeFromTenant(this.tenant.id, user.id).subscribe(\r\n          () => {\r\n            this.tenantUserRelations = reject(this.tenantUserRelations, {\r\n              userId: user.id,\r\n            });\r\n            // if the user removed himself, jump to the profile:\r\n            if (user.id === this.appService.getCurrentUser().id) {\r\n              this.tenantService.getAll().subscribe();\r\n              this.router.navigate([`/${ROUTES.PROFILE}`]);\r\n            }\r\n          },\r\n          error => {\r\n            console.error(error);\r\n            this.notification.error('Beim Löschen trat leider ein Fehler auf!');\r\n          }\r\n        );\r\n      },\r\n    });\r\n  }\r\n\r\n  assignRole(relation: TenantRelation, role: ROLE): void {\r\n    relation.role = role;\r\n    this.userService\r\n      .setRole(relation.tenantId, relation.userId, role)\r\n      .subscribe(() => {\r\n        this.notification.success('Rolle zugewiesen');\r\n      });\r\n  }\r\n\r\n  revokeInvitation(invitation: Invitation): void {\r\n    this.notification.confirm({\r\n      title: 'Einladung zurückziehen?',\r\n      text: 'Möchten Sie die Einladung wirklich zurückziehen?',\r\n      yesButtonClass: 'btn-danger',\r\n      yesButtonText: 'Ja',\r\n      yesCallback: () => {\r\n        this.tenantService\r\n          .revokeOpenInvitations(invitation.tenantId, invitation.id)\r\n          .subscribe(\r\n            () => {\r\n              this.notification.success('Die Einladung wurde zurückgezogen');\r\n              this.invitations = reject(this.invitations, invitation);\r\n            },\r\n            error => {\r\n              console.error(error);\r\n              this.notification.error('Es trat ein Fehler auf');\r\n            }\r\n          );\r\n      },\r\n    });\r\n  }\r\n\r\n  showEventRelations(user: User, template: TemplateRef<any>): void {\r\n    this.selectedUser = user;\r\n    this.modalRef = this.modalService.show(template);\r\n    // load the events for the client\r\n    this.eventService\r\n      .getEvents(this.tenant.id, null, null, true)\r\n      .subscribe((events: Event[]) => {\r\n        this.singleEvents = filter(events, event => event.singleOccurence);\r\n        this.eventSeries = uniqBy(\r\n          map(\r\n            filter(events, event => event.eventSeries),\r\n            'eventSeries'\r\n          ),\r\n          'id'\r\n        );\r\n      });\r\n  }\r\n\r\n  toggleAccessOnEvent(eventId: string): void {\r\n    if (this.selectedUser.hasAccessToEvent(eventId)) {\r\n      this.userService\r\n        .denyAccessToEvent(this.tenant.id, this.selectedUser.id, eventId)\r\n        .subscribe(() => {\r\n          this.selectedUser.eventRelations = reject(\r\n            this.selectedUser.eventRelations,\r\n            relation => relation.eventId === eventId\r\n          );\r\n        });\r\n    } else {\r\n      this.userService\r\n        .allowAccessToEvent(this.tenant.id, this.selectedUser.id, eventId)\r\n        .subscribe(relation => {\r\n          this.selectedUser.eventRelations.push(relation);\r\n        });\r\n    }\r\n  }\r\n\r\n  toggleAccessOnEventSeries(eventSeriesId: string): void {\r\n    if (this.selectedUser.hasAccessToEvent(eventSeriesId)) {\r\n      this.userService\r\n        .denyAccessToEventSeries(\r\n          this.tenant.id,\r\n          this.selectedUser.id,\r\n          eventSeriesId\r\n        )\r\n        .subscribe(() => {\r\n          this.selectedUser.eventRelations = reject(\r\n            this.selectedUser.eventRelations,\r\n            relation => relation.eventSeriesId === eventSeriesId\r\n          );\r\n        });\r\n    } else {\r\n      this.userService\r\n        .allowAccessToEventSeries(\r\n          this.tenant.id,\r\n          this.selectedUser.id,\r\n          eventSeriesId\r\n        )\r\n        .subscribe(relation => {\r\n          this.selectedUser.eventRelations.push(relation);\r\n        });\r\n    }\r\n  }\r\n}\r\n","<h4>Nutzerverwaltung</h4>\r\n<p>\r\n  Verwalten Sie die Mitglieder Ihres Organisationen und vergeben Sie\r\n  entsprechende Rollen.\r\n</p>\r\n<ul class=\"list-group\">\r\n  <li\r\n    class=\"list-group-item list-group-item-action\"\r\n    *ngFor=\"let tenantUserRelation of tenantUserRelations\"\r\n    [ngStyle]=\"{\r\n      'background-color':\r\n        tenantUserRelation.active === false ? 'whitesmoke' : ''\r\n    }\"\r\n  >\r\n    <div class=\"row\">\r\n      <div class=\"col-7\">\r\n        {{ tenantUserRelation.user.name }}<br />\r\n        <small\r\n          ><a href=\"mailto:{{ tenantUserRelation.user.email }}\">{{\r\n            tenantUserRelation.user.email\r\n          }}</a></small\r\n        >\r\n      </div>\r\n      <div class=\"col-5 text-right\" style=\"line-height: 48px\">\r\n        <button\r\n          *ngIf=\"!tenantUserRelation.active\"\r\n          class=\"btn btn-sm btn-outline-success ml-2\"\r\n          (click)=\"activate(tenantUserRelation.user)\"\r\n        >\r\n          Zulassen\r\n        </button>\r\n        <div\r\n          class=\"dropdown d-inline-block\"\r\n          *ngIf=\"\r\n            tenantUserRelation.active &&\r\n            tenantUserRelation.userId !== appService.getCurrentUser().id &&\r\n            appService.hasRole(tenantUserRelation.tenantId, ROLE.OWNER)\r\n          \"\r\n        >\r\n          <button\r\n            class=\"btn btn-sm btn-secondary dropdown-toggle\"\r\n            type=\"button\"\r\n            data-toggle=\"dropdown\"\r\n          >\r\n            <span *ngIf=\"tenantUserRelation.role === ROLE.OWNER\"\r\n              ><i class=\"fas fa-crown\"></i> Owner</span\r\n            >\r\n            <span *ngIf=\"tenantUserRelation.role === ROLE.ADMIN\">Admin</span>\r\n            <span *ngIf=\"tenantUserRelation.role === ROLE.MEMBER\">Leiter</span>\r\n          </button>\r\n          <div class=\"dropdown-menu\">\r\n            <a\r\n              class=\"dropdown-item clickable\"\r\n              (click)=\"assignRole(tenantUserRelation, ROLE.OWNER)\"\r\n              ><i class=\"fas fa-crown\"></i> Owner</a\r\n            >\r\n            <a\r\n              class=\"dropdown-item clickable\"\r\n              (click)=\"assignRole(tenantUserRelation, ROLE.ADMIN)\"\r\n              >Admin</a\r\n            >\r\n            <a\r\n              class=\"dropdown-item clickable\"\r\n              (click)=\"assignRole(tenantUserRelation, ROLE.MEMBER)\"\r\n              >Leiter</a\r\n            >\r\n          </div>\r\n        </div>\r\n        <span\r\n          class=\"badge\"\r\n          *ngIf=\"\r\n            tenantUserRelation.userId === appService.getCurrentUser().id ||\r\n            (tenantUserRelation.active &&\r\n              !appService.hasRole(tenantUserRelation.tenantId, ROLE.OWNER))\r\n          \"\r\n          [ngClass]=\"{\r\n            'badge-success':\r\n              tenantUserRelation.isAdmin() && !tenantUserRelation.isOwner(),\r\n            'badge-primary': tenantUserRelation.isOwner(),\r\n            'badge-secondary':\r\n              !tenantUserRelation.isAdmin() && !tenantUserRelation.isOwner()\r\n          }\"\r\n        >\r\n          <span *ngIf=\"tenantUserRelation.isOwner()\"\r\n            ><i class=\"fas fa-crown\"></i> Owner</span\r\n          >\r\n          <span\r\n            *ngIf=\"\r\n              tenantUserRelation.isAdmin() && !tenantUserRelation.isOwner()\r\n            \"\r\n            >Admin</span\r\n          >\r\n          <span\r\n            *ngIf=\"\r\n              !tenantUserRelation.isAdmin() && !tenantUserRelation.isOwner()\r\n            \"\r\n            >Leiter</span\r\n          >\r\n        </span>\r\n        <i\r\n          class=\"fas fa-user-shield clickable ml-4\"\r\n          *ngIf=\"\r\n            tenantUserRelation.role === ROLE.MEMBER &&\r\n            appService.hasRole(tenantUserRelation.tenantId, ROLE.ADMIN)\r\n          \"\r\n          (click)=\"\r\n            showEventRelations(tenantUserRelation.user, showEventRelationsModal)\r\n          \"\r\n        ></i>\r\n        <i\r\n          class=\"fas fa-trash-alt clickable ml-4 text-danger\"\r\n          *ngIf=\"\r\n            tenantUserRelation.role === ROLE.MEMBER ||\r\n            tenantUserRelation.active === false ||\r\n            appService.hasRole(tenantUserRelation.tenantId, ROLE.OWNER)\r\n          \"\r\n          (click)=\"delete(tenantUserRelation.user)\"\r\n        ></i>\r\n      </div>\r\n    </div>\r\n  </li>\r\n  <li\r\n    class=\"list-group-item list-group-item-action text-center\"\r\n    *ngIf=\"!tenantUserRelations\"\r\n  >\r\n    <loading></loading> Nutzer werden geladen\r\n  </li>\r\n  <li\r\n    class=\"list-group-item list-group-item-action\"\r\n    *ngFor=\"let invitation of invitations\"\r\n    style=\"background-color: whitesmoke\"\r\n  >\r\n    <div class=\"row\">\r\n      <div class=\"col-7\">\r\n        <span class=\"badge badge-secondary\">Einladung verschickt</span>\r\n        <br />\r\n        <small\r\n          ><a href=\"mailto:{{ invitation.email }}\">{{\r\n            invitation.email\r\n          }}</a></small\r\n        >\r\n      </div>\r\n      <div class=\"col-5\" style=\"line-height: 48px\">\r\n        <button\r\n          class=\"float-right btn btn-sm btn-outline-danger\"\r\n          (click)=\"revokeInvitation(invitation)\"\r\n        >\r\n          Einladung zurückziehen\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </li>\r\n  <li class=\"list-group-item list-group-item-action\">\r\n    <form [formGroup]=\"inviteAdminForm\" (ngSubmit)=\"inviteNewAdmin()\">\r\n      <div class=\"d-flex\">\r\n        <input\r\n          class=\"form-control flex-grow-1\"\r\n          id=\"inviteEmail\"\r\n          type=\"email\"\r\n          placeholder=\"Email-Adresse des neuen Nutzers\"\r\n          formControlName=\"email\"\r\n        />\r\n        <button class=\"ml-3 btn btn-outline-success text-nowrap\">\r\n          Nutzer einladen\r\n        </button>\r\n      </div>\r\n    </form>\r\n    <div class=\"alert alert-success mt-2\" *ngIf=\"invitedUser\">\r\n      {{ invitedUser }}\r\n    </div>\r\n    <div class=\"alert alert-warning mt-2\" *ngIf=\"userExists\">\r\n      {{ userExists }}\r\n    </div>\r\n  </li>\r\n</ul>\r\n\r\n<!-- modal to select which events the user has access to -->\r\n<ng-template #showEventRelationsModal>\r\n  <div class=\"modal-header\">\r\n    <h4 class=\"modal-title pull-left\">Zugriff auf Teilnehmerdaten</h4>\r\n    <button\r\n      type=\"button\"\r\n      class=\"close pull-right\"\r\n      aria-label=\"Close\"\r\n      (click)=\"modalRef.hide()\"\r\n    >\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div class=\"modal-body\">\r\n    <p>\r\n      Legen Sie fest, zu welchen Veranstaltungen\r\n      <b>{{ selectedUser.name }}</b> Zugriff auf die Teilnehmerliste erhält:\r\n    </p>\r\n    <h5 *ngIf=\"eventSeries && eventSeries.length > 0\">Serienevents</h5>\r\n    <ul class=\"list-group mb-4\" *ngIf=\"eventSeries && eventSeries.length > 0\">\r\n      <li\r\n        class=\"list-group-item list-group-item-action\"\r\n        *ngFor=\"let event of eventSeries\"\r\n      >\r\n        <div class=\"d-flex\">\r\n          <div class=\"flex-grow-1\">{{ event.name }}</div>\r\n          <div style=\"width: 50px\">\r\n            <div\r\n              class=\"custom-control custom-switch float-right clickable\"\r\n              (click)=\"toggleAccessOnEventSeries(event.id)\"\r\n            >\r\n              <input\r\n                type=\"checkbox\"\r\n                class=\"custom-control-input clickable\"\r\n                [checked]=\"selectedUser.hasAccessToEvent(event.id)\"\r\n              />\r\n              <label class=\"custom-control-label clickable m-0\"></label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    <h5 *ngIf=\"singleEvents && singleEvents.length > 0\">\r\n      Einzelveranstaltungen\r\n    </h5>\r\n    <ul class=\"list-group\" *ngIf=\"singleEvents && singleEvents.length > 0\">\r\n      <li\r\n        class=\"list-group-item list-group-item-action\"\r\n        *ngFor=\"let singleEvent of singleEvents\"\r\n      >\r\n        <div class=\"d-flex\">\r\n          <div class=\"flex-grow-1\">{{ singleEvent.name }}</div>\r\n          <div style=\"width: 50px\">\r\n            <div\r\n              class=\"custom-control custom-switch float-right clickable\"\r\n              (click)=\"toggleAccessOnEvent(singleEvent.id)\"\r\n            >\r\n              <input\r\n                type=\"checkbox\"\r\n                class=\"custom-control-input clickable\"\r\n                [checked]=\"selectedUser.hasAccessToEvent(singleEvent.id)\"\r\n              />\r\n              <label class=\"custom-control-label clickable m-0\"></label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    <div class=\"alert alert-light\" *ngIf=\"!singleEvents && !eventSeries\">\r\n      Events werden geladen...\r\n    </div>\r\n    <div\r\n      class=\"alert alert-secondary\"\r\n      *ngIf=\"\r\n        singleEvents &&\r\n        singleEvents.length === 0 &&\r\n        eventSeries &&\r\n        eventSeries.length === 0\r\n      \"\r\n    >\r\n      Es sind keine Veranstaltungen vorhanden.\r\n    </div>\r\n  </div>\r\n  <div class=\"modal-footer\">\r\n    <button\r\n      type=\"button\"\r\n      class=\"btn btn-outline-secondary\"\r\n      (click)=\"modalRef.hide()\"\r\n    >\r\n      Schließen\r\n    </button>\r\n  </div>\r\n</ng-template>\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { each, filter, sortBy } from 'lodash';\r\nimport * as moment from 'moment';\r\nimport { Event } from '../../models/event';\r\nimport { Week } from 'src/app/models/week';\r\nimport { AppService } from 'src/app/services/app.service';\r\nimport { Tenant } from 'src/app/models/tenant';\r\nimport { ROLE } from '../../../../../common/tenant-relation';\r\n\r\n@Component({\r\n  selector: 'calendar',\r\n  templateUrl: './calendar.component.html',\r\n  styleUrls: ['./calendar.component.scss'],\r\n})\r\nexport class CalendarComponent implements OnInit {\r\n  @Input()\r\n  events: Event[];\r\n  @Input()\r\n  tenant: Tenant;\r\n\r\n  @Output()\r\n  eventClicked = new EventEmitter();\r\n  @Output()\r\n  statusToggled = new EventEmitter();\r\n\r\n  weeks: Week[];\r\n  months: number[];\r\n  ROLE = ROLE;\r\n  today = moment().dayOfYear();\r\n\r\n  constructor(public appService: AppService) {}\r\n\r\n  ngOnInit(): void {\r\n    // calculate the months to come this year (including the previous one)\r\n    this.months = new Array<number>();\r\n    for (\r\n      let m = moment().month() - 1 >= 0 ? moment().month() - 1 : 0;\r\n      m < 12;\r\n      m++\r\n    ) {\r\n      this.months.push(m);\r\n    }\r\n    // put the events in the corresponding weeks\r\n    this.putEventsInWeeks();\r\n  }\r\n\r\n  weeksInMonth(month: number): Week[] {\r\n    return filter(this.weeks, week => {\r\n      return (\r\n        week.startOfWeek.month() === month || week.endOfWeek.month() === month\r\n      );\r\n    });\r\n  }\r\n\r\n  displayMonth(month: number): string {\r\n    return moment().month(month).format('MMMM');\r\n  }\r\n\r\n  currentCW(): number {\r\n    return moment().isoWeek();\r\n  }\r\n\r\n  clickOn(event: Event): void {\r\n    this.eventClicked.emit(event);\r\n  }\r\n\r\n  toggleDisabled(clickEvent: any, event: Event): void {\r\n    clickEvent.stopPropagation();\r\n    this.statusToggled.emit(event);\r\n  }\r\n\r\n  /**\r\n   * returns the day within year\r\n   * @param week\r\n   * @param month\r\n   */\r\n  daysInWeek(week: Week, month: number): number[] {\r\n    const days = new Array<number>(7);\r\n    for (\r\n      let day = week.startOfWeek.dayOfYear();\r\n      day < week.startOfWeek.dayOfYear() + 7;\r\n      day++\r\n    ) {\r\n      if (moment().dayOfYear(day).month() === month) {\r\n        days[moment().dayOfYear(day).weekday()] = day;\r\n      }\r\n    }\r\n    return days;\r\n  }\r\n\r\n  dayOfMonth(dayOfYear: number): string {\r\n    if (dayOfYear) {\r\n      return moment().dayOfYear(dayOfYear).format('D');\r\n    }\r\n    return null;\r\n  }\r\n\r\n  eventsOnDay(day: number, week: Week): Event[] {\r\n    return filter(week.events, event => {\r\n      return moment(event.date).dayOfYear() === day;\r\n    });\r\n  }\r\n\r\n  putEventsInWeeks(): void {\r\n    this.weeks = new Array<Week>();\r\n    const sortOrder = ['weekDay', 'time', 'name'];\r\n    this.events = sortBy(this.events, sortOrder);\r\n    // prepare the weeks, calculate the past 4 weeks until the end of the year:\r\n    const today = moment();\r\n    const weekNumberFourWeeksAgo = today.clone().subtract(4, 'weeks').week();\r\n    const startOfWeekFourWeeksAgo = today\r\n      .clone()\r\n      .startOf('week')\r\n      .subtract(4, 'weeks');\r\n    const endOfWeekFourWeeksAgo = today\r\n      .clone()\r\n      .endOf('week')\r\n      .subtract(4, 'weeks');\r\n    \r\n    for (\r\n      let kw = today.week() - 4;\r\n      kw <= moment().date(31).month(11).isoWeek();\r\n      kw++\r\n    ) {\r\n      const week = new Week(kw);\r\n      week.startOfWeek = startOfWeekFourWeeksAgo\r\n        .clone()\r\n        .add(kw - weekNumberFourWeeksAgo, 'weeks');\r\n      week.endOfWeek = endOfWeekFourWeeksAgo\r\n        .clone()\r\n        .add(kw - weekNumberFourWeeksAgo, 'weeks');\r\n      // add all events for this week\r\n      week.events = filter(this.events, (event: Event) => {\r\n        return moment(event.date).isBetween(\r\n          week.startOfWeek,\r\n          week.endOfWeek,\r\n          undefined,\r\n          '[]'\r\n        );\r\n      });\r\n      this.weeks.push(week);\r\n    }\r\n  }\r\n}\r\n","<div *ngFor=\"let month of months\" class=\"mb-4\">\r\n  <h2>{{ displayMonth(month) }}</h2>\r\n  <table class=\"w-100\">\r\n    <thead>\r\n      <tr>\r\n        <th style=\"width: 9%\">KW</th>\r\n        <th style=\"width: 13%\" class=\"text-center\">Mo</th>\r\n        <th style=\"width: 13%\" class=\"text-center\">Di</th>\r\n        <th style=\"width: 13%\" class=\"text-center\">Mi</th>\r\n        <th style=\"width: 13%\" class=\"text-center\">Do</th>\r\n        <th style=\"width: 13%\" class=\"text-center\">Fr</th>\r\n        <th style=\"width: 13%\" class=\"text-center\">Sa</th>\r\n        <th style=\"width: 13%\" class=\"text-center\">So</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor=\"let week of weeksInMonth(month)\">\r\n        <td [ngClass]=\"{ currentCW: week.number === currentCW() }\">\r\n          {{ week.number }}\r\n          <small *ngIf=\"week.number === currentCW()\"\r\n            ><br />aktuelle Woche</small\r\n          >\r\n        </td>\r\n        <!-- each day gets a box -->\r\n        <td\r\n          *ngFor=\"let day of daysInWeek(week, month)\"\r\n          [ngClass]=\"{ greyedOut: day >= 0 }\"\r\n          [ngStyle]=\"{\r\n            border: day === today ? '2px solid var(--plevents-main-color)' : ''\r\n          }\"\r\n        >\r\n          <div>\r\n            <b>{{ dayOfMonth(day) }}</b>\r\n            <div\r\n              *ngFor=\"let event of eventsOnDay(day, week)\"\r\n              style=\"position: relative\"\r\n              [ngClass]=\"{\r\n                'happening': event,\r\n                'unavailable': event && event.takenSeats >= event.maxSeats,\r\n                'disabled': event && event.disabled,\r\n                'empty': event && event.takenSeats === 0,\r\n                'has-passed': event && event.isInPast(),\r\n                'clickable':\r\n                  event &&\r\n                  (appService.hasRole(tenant.id, ROLE.ADMIN) ||\r\n                    appService.getCurrentUser().hasAccessToEvent(event))\r\n              }\"\r\n              (click)=\"clickOn(event)\"\r\n            >\r\n              <div class=\"row\">\r\n                <div class=\"col-12 col-xl-6\">\r\n                  {{ event.name }}\r\n                </div>\r\n                <div class=\"col-12 col-sm-6 col-xl-3\">\r\n                  <small>{{ event.takenSeats }} / {{ event.maxSeats }} </small>\r\n                </div>\r\n                <div class=\"col-12 col-sm-6 col-xl-3\">\r\n                  <small\r\n                    class=\"stateToggler\"\r\n                    [ngClass]=\"{ clickable: !event.isInPast() }\"\r\n                    (click)=\"event.isInPast() || toggleDisabled($event, event)\"\r\n                  >\r\n                    <i *ngIf=\"!event.disabled\">aktiv</i>\r\n                    <i *ngIf=\"event.disabled\">inaktiv</i>\r\n                  </small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { Event } from 'src/app/models/event';\r\n\r\n@Component({\r\n  selector: 'app-event-select',\r\n  templateUrl: './event-select.component.html',\r\n  styleUrls: ['./event-select.component.scss'],\r\n})\r\nexport class EventSelectComponent implements OnInit {\r\n  @Input()\r\n  event: Event;\r\n  @Input()\r\n  selected: boolean = false;\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  availableSeatsText(event: Event): string {\r\n    const free = event.maxSeats - event.takenSeats;\r\n    if (free > 3) {\r\n      return `${free} freie Plätze`;\r\n    }\r\n    if (free > 1) {\r\n      return `nur ${free} freie Plätze`;\r\n    }\r\n    return `noch 1 freier Platz`;\r\n  }\r\n}\r\n","<div\r\n  *ngIf=\"event !== undefined\"\r\n  class=\"happening\"\r\n  [ngClass]=\"{\r\n    greyedOut: event.isInPast(),\r\n    full: event.takenSeats >= event.maxSeats,\r\n    selected: selected\r\n  }\"\r\n>\r\n  {{ event.displayDate() }}<br />\r\n  <small class=\"mb-2\"\r\n    >{{ event.takenSeats }} / {{ event.maxSeats }} Teilnehmer\r\n  </small>\r\n  <span *ngIf=\"!event.isInPast()\">\r\n    <span\r\n      *ngIf=\"event.maxSeats - event.takenSeats > 3\"\r\n      class=\"badge badge-success top-right\"\r\n      >{{ availableSeatsText(event) }}</span\r\n    >\r\n    <span\r\n      *ngIf=\"\r\n        event.maxSeats - event.takenSeats <= 3 &&\r\n        event.maxSeats - event.takenSeats > 0\r\n      \"\r\n      class=\"badge badge-warning top-right\"\r\n      >{{ availableSeatsText(event) }}</span\r\n    >\r\n    <span\r\n      *ngIf=\"event.maxSeats - event.takenSeats <= 0\"\r\n      class=\"badge badge-danger top-right\"\r\n      >ausgebucht</span\r\n    >\r\n  </span>\r\n  <span *ngIf=\"event.isInPast()\">\r\n    <span class=\"badge badge-secondary top-right\">bereits vergangen</span>\r\n  </span>\r\n</div>\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  apiUrl: 'http://localhost:4201',\r\n  domain: 'localhost',\r\n  stripePubKey:\r\n    'pk_test_51HhiAYFrAXm59OieoGtMgGYnOkrkaT3dVshNy2ENIjLgjSltE0oDfrAj8sYsUwKvemMrhdrN5YO9HM2SqycIHnnY00eHMIY6nq',\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-imprint',\r\n  templateUrl: './imprint.component.html',\r\n  styleUrls: ['./imprint.component.scss']\r\n})\r\nexport class ImprintComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<h1>Impressum</h1>\r\n\r\n<h2>Angaben gem&auml;&szlig; &sect; 5 TMG</h2>\r\n<p>\r\n  Stefan Strobel<br />\r\n  Stefan Strobel Software &amp; Service Consulting<br />\r\n  Robert-Bosch-Str. 43<br />\r\n  71277 Rutesheim\r\n</p>\r\n\r\n<h2>Kontakt</h2>\r\n<p>\r\n  Telefon: +49 159 040 533 54<br />\r\n  E-Mail: stefan.strobel@s4-consulting.de\r\n</p>\r\n\r\n<h2>Umsatzsteuer-ID</h2>\r\n<p>\r\n  Umsatzsteuer-Identifikationsnummer gem&auml;&szlig; &sect; 27 a\r\n  Umsatzsteuergesetz:<br />\r\n  DE32504c6906\r\n</p>\r\n\r\n<h2>EU-Streitschlichtung</h2>\r\n<p>\r\n  Die Europ&auml;ische Kommission stellt eine Plattform zur\r\n  Online-Streitbeilegung (OS) bereit:\r\n  <a\r\n    href=\"https://ec.europa.eu/consumers/odr\"\r\n    target=\"_blank\"\r\n    rel=\"noopener noreferrer\"\r\n    >https://ec.europa.eu/consumers/odr</a\r\n  >.<br />\r\n  Unsere E-Mail-Adresse finden Sie oben im Impressum.\r\n</p>\r\n\r\n<h2>\r\n  Verbraucher&shy;streit&shy;beilegung/Universal&shy;schlichtungs&shy;stelle\r\n</h2>\r\n<p>\r\n  Wir sind nicht bereit oder verpflichtet, an Streitbeilegungsverfahren vor\r\n  einer Verbraucherschlichtungsstelle teilzunehmen.\r\n</p>\r\n\r\n<h3>Haftung f&uuml;r Inhalte</h3>\r\n<p>\r\n  Als Diensteanbieter sind wir gem&auml;&szlig; &sect; 7 Abs.1 TMG f&uuml;r\r\n  eigene Inhalte auf diesen Seiten nach den allgemeinen Gesetzen verantwortlich.\r\n  Nach &sect;&sect; 8 bis 10 TMG sind wir als Diensteanbieter jedoch nicht\r\n  verpflichtet, &uuml;bermittelte oder gespeicherte fremde Informationen zu\r\n  &uuml;berwachen oder nach Umst&auml;nden zu forschen, die auf eine\r\n  rechtswidrige T&auml;tigkeit hinweisen.\r\n</p>\r\n<p>\r\n  Verpflichtungen zur Entfernung oder Sperrung der Nutzung von Informationen\r\n  nach den allgemeinen Gesetzen bleiben hiervon unber&uuml;hrt. Eine\r\n  diesbez&uuml;gliche Haftung ist jedoch erst ab dem Zeitpunkt der Kenntnis\r\n  einer konkreten Rechtsverletzung m&ouml;glich. Bei Bekanntwerden von\r\n  entsprechenden Rechtsverletzungen werden wir diese Inhalte umgehend entfernen.\r\n</p>\r\n<h3>Haftung f&uuml;r Links</h3>\r\n<p>\r\n  Unser Angebot enth&auml;lt Links zu externen Websites Dritter, auf deren\r\n  Inhalte wir keinen Einfluss haben. Deshalb k&ouml;nnen wir f&uuml;r diese\r\n  fremden Inhalte auch keine Gew&auml;hr &uuml;bernehmen. F&uuml;r die Inhalte\r\n  der verlinkten Seiten ist stets der jeweilige Anbieter oder Betreiber der\r\n  Seiten verantwortlich. Die verlinkten Seiten wurden zum Zeitpunkt der\r\n  Verlinkung auf m&ouml;gliche Rechtsverst&ouml;&szlig;e &uuml;berpr&uuml;ft.\r\n  Rechtswidrige Inhalte waren zum Zeitpunkt der Verlinkung nicht erkennbar.\r\n</p>\r\n<p>\r\n  Eine permanente inhaltliche Kontrolle der verlinkten Seiten ist jedoch ohne\r\n  konkrete Anhaltspunkte einer Rechtsverletzung nicht zumutbar. Bei\r\n  Bekanntwerden von Rechtsverletzungen werden wir derartige Links umgehend\r\n  entfernen.\r\n</p>\r\n<h3>Urheberrecht</h3>\r\n<p>\r\n  Die durch die Seitenbetreiber erstellten Inhalte und Werke auf diesen Seiten\r\n  unterliegen dem deutschen Urheberrecht. Die Vervielf&auml;ltigung,\r\n  Bearbeitung, Verbreitung und jede Art der Verwertung au&szlig;erhalb der\r\n  Grenzen des Urheberrechtes bed&uuml;rfen der schriftlichen Zustimmung des\r\n  jeweiligen Autors bzw. Erstellers. Downloads und Kopien dieser Seite sind nur\r\n  f&uuml;r den privaten, nicht kommerziellen Gebrauch gestattet.\r\n</p>\r\n<p>\r\n  Soweit die Inhalte auf dieser Seite nicht vom Betreiber erstellt wurden,\r\n  werden die Urheberrechte Dritter beachtet. Insbesondere werden Inhalte Dritter\r\n  als solche gekennzeichnet. Sollten Sie trotzdem auf eine\r\n  Urheberrechtsverletzung aufmerksam werden, bitten wir um einen entsprechenden\r\n  Hinweis. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Inhalte\r\n  umgehend entfernen.\r\n</p>\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  Router,\r\n  ActivatedRouteSnapshot,\r\n  RouterStateSnapshot,\r\n  CanActivate,\r\n} from '@angular/router';\r\nimport { ROUTES } from '../../../../common/frontend.routes';\r\nimport { AppService } from '../services/app.service';\r\nimport { AuthenticationService } from '../services/authentication.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthGuard implements CanActivate {\r\n  constructor(\r\n    private router: Router,\r\n    private authenticationService: AuthenticationService,\r\n    private appService: AppService\r\n  ) {}\r\n  path: ActivatedRouteSnapshot[];\r\n  route: ActivatedRouteSnapshot;\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\r\n    const user = this.appService.getCurrentUser();\r\n    if (user) {\r\n      // logged in so return true\r\n      return true;\r\n    }\r\n    // not logged in so redirect to login page with the return url\r\n    this.router.navigate(\r\n      route.params.tenantPath\r\n        ? [route.params.tenantPath, ROUTES.LOGIN]\r\n        : [`/${ROUTES.LOGIN}`],\r\n      {\r\n        queryParams: { returnUrl: state.url },\r\n      }\r\n    );\r\n    return false;\r\n  }\r\n}\r\n","import { Component, TemplateRef } from '@angular/core';\r\nimport { NotificationService } from '../../services/notification.service';\r\n\r\n@Component({\r\n  selector: 'app-notification',\r\n  templateUrl: './toast.component.html',\r\n  styleUrls: ['./toast.component.scss'],\r\n})\r\nexport class ToastComponent {\r\n  constructor(public toastService: NotificationService) {}\r\n\r\n  isTemplate(toast) {\r\n    return toast.textOrTpl instanceof TemplateRef;\r\n  }\r\n}\r\n","<div class=\"toast-container\">\r\n  <ngb-toast\r\n    *ngFor=\"let toast of toastService.toasts\"\r\n    [header]=\"toast.headertext\"\r\n    [class]=\"toast.classname\"\r\n    [autohide]=\"toast.autohide\"\r\n    [delay]=\"toast.delay || 5000\"\r\n    (hide)=\"toastService.remove(toast)\"\r\n  >\r\n    <ng-template [ngIf]=\"isTemplate(toast)\" [ngIfElse]=\"text\">\r\n      <ng-template [ngTemplateOutlet]=\"toast.textOrTpl\"></ng-template>\r\n    </ng-template>\r\n\r\n    <ng-template #text>{{ toast.textOrTpl }}</ng-template>\r\n  </ngb-toast>\r\n</div>\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { EventService } from 'src/app/services/event.service';\r\nimport { Week } from 'src/app/models/week';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { sortBy, each, filter, find, map, max, uniq } from 'lodash';\r\nimport * as moment from 'moment';\r\nimport { Event } from 'src/app/models/event';\r\nimport { Participant } from 'src/app/models/participant';\r\nimport { TenantService } from 'src/app/services/tenant.service';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Tenant } from 'src/app/models/tenant';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { Category } from 'src/app/models/category';\r\nimport { CategoryService } from 'src/app/services/category.service';\r\nimport { forkJoin, Subscription } from 'rxjs';\r\nimport { AppService } from 'src/app/services/app.service';\r\n\r\n@Component({\r\n  selector: 'app-events',\r\n  templateUrl: './events.component.html',\r\n  styleUrls: ['./events.component.scss'],\r\n})\r\nexport class EventsComponent implements OnInit, OnDestroy {\r\n  weeks: Week[] = null;\r\n  uniqueEvents: Event[] = null;\r\n  eventsInTimeframe: Event[] = new Array<Event>();\r\n  timeColumns: string[] = new Array<string>();\r\n  registerForm: FormGroup;\r\n  selectedEvent: Event = null;\r\n  successfullyRegistered = false;\r\n  categoryOptions: string[] = null;\r\n  categories: Category[];\r\n  selectedCategory: Category = undefined;\r\n  consentTeaser1: string = null;\r\n  consentTeaser2: string = null;\r\n  consentText1: string = null;\r\n  consentText2: string = null;\r\n  consentText1Shown: boolean = false;\r\n  consentText2Shown: boolean = false;\r\n  tenantSubscription: Subscription;\r\n  tenant: Tenant = null;\r\n\r\n  constructor(\r\n    private eventService: EventService,\r\n    private tenantService: TenantService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private categoryService: CategoryService,\r\n    private appService: AppService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    // load the tenant information and redirect in case tenant path does not exist:\r\n    this.tenantService\r\n      .getByPath(this.route.snapshot.params.tenantPath)\r\n      .subscribe(\r\n        () => {},\r\n        error => {\r\n          if (\r\n            error === 'Not Found' ||\r\n            (error instanceof HttpErrorResponse && error.status === 404)\r\n          ) {\r\n            this.router.navigate(['fehler', 'account-not-found']);\r\n          }\r\n        }\r\n      );\r\n    this.createRegisterForm();\r\n    this.tenantService.load(this.route.snapshot.params.tenantPath);\r\n    this.tenantSubscription = this.appService.tenant.subscribe(\r\n      (tenant: Tenant) => {\r\n        if (tenant) {\r\n          this.tenant = tenant;\r\n          this.appService.setColor(this.tenant);\r\n          this.loadEvents();\r\n          this.consentTeaser1 = tenant.consentTeaser1;\r\n          this.consentText1 = tenant.consentText1;\r\n          if (this.consentTeaser1 && this.consentTeaser1.length > 0) {\r\n            // only add the form control if it is not existing yet\r\n            if (!this.registerForm.contains('consent1')) {\r\n              this.registerForm.addControl(\r\n                'consent1',\r\n                new FormControl(false, Validators.required)\r\n              );\r\n            }\r\n          } else {\r\n            this.registerForm.removeControl('consent1');\r\n          }\r\n          this.consentTeaser2 = tenant.consentTeaser2;\r\n          this.consentText2 = tenant.consentText2;\r\n          if (this.consentTeaser2 && this.consentTeaser2.length > 0) {\r\n            // only add the form control if it is not existing yet\r\n            if (!this.registerForm.contains('consent2')) {\r\n              this.registerForm.addControl(\r\n                'consent2',\r\n                new FormControl(false, Validators.required)\r\n              );\r\n            }\r\n          } else {\r\n            this.registerForm.removeControl('consent2');\r\n          }\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.appService.setColor(null);\r\n    if (this.tenantSubscription) {\r\n      this.tenantSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  loadEvents(): void {\r\n    this.timeColumns = new Array<string>();\r\n    const today = moment();\r\n    const start = today.clone(); //.startOf('week').add(1, 'week');\r\n    const end = today.clone().endOf('week').add(1, 'week');\r\n    const observables = [];\r\n    observables.push(\r\n      this.eventService.getEvents(\r\n        this.appService.getCurrentTenant().id,\r\n        start,\r\n        end\r\n      )\r\n    );\r\n    observables.push(this.categoryService.getCategories(this.tenant.path));\r\n    forkJoin(observables).subscribe(results => {\r\n      /////////////////////////////////////////\r\n      const events = results[0] as Event[];\r\n      // filter out all events that are disabled\r\n      this.eventsInTimeframe = filter(events, { disabled: false });\r\n      /////////////////////////////////////////\r\n      this.categories = results[1] as Category[];\r\n      // only consider categories that have at least one event present\r\n      this.categories = filter(this.categories, (category: Category) => {\r\n        return (\r\n          filter(\r\n            this.eventsInTimeframe,\r\n            event => event.categoryId === category.id\r\n          ).length > 0\r\n        );\r\n      });\r\n      this.categoryOptions = new Array<string>();\r\n      this.categoryOptions.push(...filter(map(this.categories, 'name')));\r\n      // sort the values\r\n      this.categoryOptions = this.categoryOptions.sort();\r\n      // add 'alle' at the top\r\n      this.categoryOptions.unshift('alle');\r\n    });\r\n  }\r\n\r\n  selectCategory(category: Category): void {\r\n    this.selectedCategory = category;\r\n    this.selectedEvent = null;\r\n    this.registerForm.markAsUntouched();\r\n    this.determineUniqueEvents();\r\n    const eventsToDisplay = <Event[]>(\r\n      filter(this.eventsInTimeframe, (event: Event) => {\r\n        if (this.selectedCategory === null) {\r\n          return true;\r\n        }\r\n        return event.categoryId === this.selectedCategory.id;\r\n      })\r\n    );\r\n    this.weeks = this.generateWeeksNeededToDisplayEvents(eventsToDisplay);\r\n    each(eventsToDisplay, (event: Event) => {\r\n      // find out at which position to display the event\r\n      each(this.uniqueEvents, (uniqueEvent: Event, index: number) => {\r\n        if (\r\n          uniqueEvent.displayName() === event.displayName() &&\r\n          uniqueEvent.weekDay === event.weekDay &&\r\n          uniqueEvent.displayTime() === event.displayTime()\r\n        ) {\r\n          // find the calendar week to put it in to\r\n          const week = find(this.weeks, {\r\n            number: moment(event.date).isoWeek(),\r\n          });\r\n          week.events[index] = event;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  generateWeeksNeededToDisplayEvents(events: Event[]): Week[] {\r\n    const weeks = new Array<Week>();\r\n    let maxDate = new Date();\r\n    each(events, event => {\r\n      if (event.date > maxDate) {\r\n        maxDate = event.date;\r\n      }\r\n    });\r\n    for (\r\n      let isoWeek = moment().isoWeek();\r\n      isoWeek <= moment(maxDate).isoWeek() || isoWeek <= moment().isoWeek() + 1;\r\n      isoWeek++\r\n    ) {\r\n      const week = new Week(isoWeek);\r\n      week.startOfWeek = moment().isoWeek(isoWeek).startOf('week');\r\n      week.endOfWeek = moment().isoWeek(isoWeek).endOf('week');\r\n      week.events = new Array<Event>(this.uniqueEvents.length);\r\n      weeks.push(week);\r\n    }\r\n    return weeks;\r\n  }\r\n\r\n  private determineUniqueEvents(): void {\r\n    this.uniqueEvents = new Array<Event>();\r\n    each(this.eventsInTimeframe, (event: Event) => {\r\n      if (\r\n        !this.selectedCategory ||\r\n        event.categoryId === this.selectedCategory.id\r\n      ) {\r\n        // check if there is already an instance of this event displayed\r\n        if (\r\n          find(this.uniqueEvents, (uniqueEvent: Event) => {\r\n            return (\r\n              uniqueEvent.displayName() === event.displayName() &&\r\n              uniqueEvent.weekDay === event.weekDay &&\r\n              uniqueEvent.displayTime() === event.displayTime()\r\n            );\r\n          }) === undefined\r\n        ) {\r\n          this.uniqueEvents.push(event);\r\n        }\r\n      }\r\n    });\r\n    this.uniqueEvents = sortBy(this.uniqueEvents, ['weekDay', 'time']);\r\n  }\r\n\r\n  private createRegisterForm(): void {\r\n    this.registerForm = new FormGroup({\r\n      firstname: new FormControl('', Validators.required),\r\n      lastname: new FormControl('', Validators.required),\r\n      email: new FormControl('', [Validators.required, Validators.email]),\r\n      phone: new FormControl('', Validators.required),\r\n      street: new FormControl('', Validators.required),\r\n      zip: new FormControl('', Validators.required),\r\n      city: new FormControl('', Validators.required),\r\n      rememberMe: new FormControl(false),\r\n      dataprivacy: new FormControl(false, Validators.required),\r\n    });\r\n    // check if stored personal information exists. if so, prefill the form:\r\n    const previousData = JSON.parse(localStorage.getItem('rememberMe'));\r\n    if (previousData) {\r\n      this.registerForm.get('firstname').setValue(previousData.firstname);\r\n      this.registerForm.get('lastname').setValue(previousData.lastname);\r\n      this.registerForm.get('email').setValue(previousData.email);\r\n      this.registerForm.get('phone').setValue(previousData.phone);\r\n      this.registerForm.get('street').setValue(previousData.street);\r\n      this.registerForm.get('zip').setValue(previousData.zip);\r\n      this.registerForm.get('city').setValue(previousData.city);\r\n      this.registerForm.get('rememberMe').setValue(true);\r\n    }\r\n  }\r\n\r\n  availableSeatsText(event: Event): string {\r\n    const free = event.maxSeats - event.takenSeats;\r\n    if (free > 3) {\r\n      return `${free} freie Plätze`;\r\n    }\r\n    if (free > 1) {\r\n      return `nur ${free} freie Plätze`;\r\n    }\r\n    return `noch 1 freier Platz`;\r\n  }\r\n\r\n  selectEvent(event: Event): void {\r\n    this.registerForm.markAsUntouched();\r\n    if (this.selectedEvent === event) {\r\n      this.selectedEvent = null;\r\n    } else {\r\n      this.selectedEvent = event;\r\n      // scroll down to the participant form\r\n      setTimeout(() => {\r\n        document.getElementsByTagName('h5')[0].scrollIntoView();\r\n      }, 20);\r\n    }\r\n  }\r\n\r\n  isInvalid(formControlName: string): boolean {\r\n    return (\r\n      this.registerForm.get(formControlName).invalid &&\r\n      this.registerForm.get(formControlName).touched\r\n    );\r\n  }\r\n\r\n  registerParticipant(): void {\r\n    if (this.registerForm.invalid) {\r\n      this.registerForm.markAllAsTouched();\r\n      return;\r\n    }\r\n    const participant = new Participant();\r\n    participant.firstname = this.registerForm.get('firstname').value;\r\n    participant.lastname = this.registerForm.get('lastname').value;\r\n    participant.email = this.registerForm.get('email').value;\r\n    participant.phone = this.registerForm.get('phone').value;\r\n    participant.street = this.registerForm.get('street').value;\r\n    participant.zip = this.registerForm.get('zip').value;\r\n    participant.city = this.registerForm.get('city').value;\r\n    // if the user has selected the rememberMe flag, store the data locally so that it can be used next time to pre-fill the data\r\n    if (this.registerForm.get('rememberMe').value === true) {\r\n      localStorage.setItem('rememberMe', JSON.stringify(participant));\r\n    } else {\r\n      // in case pre-entered information exists, but the user does not want it to be stored any more, remove it from local storage\r\n      localStorage.removeItem('rememberMe');\r\n    }\r\n    participant.name = participant.firstname + ' ' + participant.lastname;\r\n    participant.eventId = this.selectedEvent.id;\r\n    this.eventService.addParticipant(participant).subscribe(() => {\r\n      this.successfullyRegistered = true;\r\n      this.registerForm.reset();\r\n    });\r\n  }\r\n\r\n  singleEvents(uniqueEvents: Event[]): Event[] {\r\n    return filter(uniqueEvents, { singleOccurence: true });\r\n  }\r\n\r\n  recurringEvents(uniqueEvents: Event[]): Event[] {\r\n    return filter(uniqueEvents, { singleOccurence: false });\r\n  }\r\n}\r\n","<h2 *ngIf=\"tenant && tenant.active\">Anmeldung zu Aktivität</h2>\r\n\r\n<div *ngIf=\"successfullyRegistered\" class=\"alert alert-success messageBox mb-3\">\r\n  Du hast dich erfolgreich zu <b>{{ selectedEvent.name }}</b> angemeldet!\r\n</div>\r\n<div\r\n  class=\"alert text-center\"\r\n  style=\"margin-top: 100px\"\r\n  *ngIf=\"!categoryOptions && (!tenant || tenant.active)\"\r\n>\r\n  <loading></loading>\r\n  Events werden geladen...\r\n</div>\r\n<div\r\n  *ngIf=\"\r\n    categoryOptions != null &&\r\n    selectedCategory === undefined &&\r\n    tenant &&\r\n    tenant.active\r\n  \"\r\n  class=\"row\"\r\n>\r\n  <div class=\"col-12\">\r\n    <p>\r\n      Bitte wähle zuerst eine Kategorie aus, zu der dir Events angezeigt werden:\r\n    </p>\r\n  </div>\r\n  <div\r\n    class=\"col-12 col-sm-4 col-md-3 p-1\"\r\n    *ngFor=\"let category of categories\"\r\n    (click)=\"selectCategory(category)\"\r\n  >\r\n    <div class=\"category-card\">\r\n      <i class=\"fas mr-2 {{ category.icon }}\" *ngIf=\"category.icon\"></i>\r\n      {{ category.name }}\r\n    </div>\r\n  </div>\r\n  <div class=\"col-12 col-sm-4 col-md-3 p-1\" (click)=\"selectCategory(null)\">\r\n    <div class=\"category-card\">alle Events</div>\r\n  </div>\r\n</div>\r\n<div *ngIf=\"selectedCategory !== undefined\">\r\n  <div class=\"back-to-categories\" (click)=\"selectedCategory = undefined\">\r\n    <i class=\"fas fa-chevron-left\"></i>\r\n    zurück zur Kategorie-Auswahl\r\n  </div>\r\n  <span>\r\n    Registriere dich bitte für eine der folgenden Aktivitäten in der Kategorie\r\n    <span style=\"color: var(--plevents-main-color)\">{{\r\n      selectedCategory === null ? 'alle Events' : selectedCategory.name\r\n    }}</span\r\n    >:\r\n  </span>\r\n  <!-- horizontal table -->\r\n  <table class=\"w-100 d-none d-lg-table mt-3\">\r\n    <thead>\r\n      <tr *ngIf=\"uniqueEvents\">\r\n        <th [ngStyle]=\"{ width: 100 / (uniqueEvents.length + 1) + '%' }\">KW</th>\r\n        <th\r\n          [ngStyle]=\"{ width: 100 / (uniqueEvents.length + 1) + '%' }\"\r\n          style=\"text-align: center\"\r\n          *ngFor=\"let uniqueEvent of uniqueEvents\"\r\n        >\r\n          {{ uniqueEvent.displayName() }}\r\n          <br />\r\n          <span class=\"badge badge-secondary\">{{\r\n            uniqueEvent.displayTime()\r\n          }}</span>\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor=\"let week of weeks; index as i\">\r\n        <td>\r\n          {{ week.number }}\r\n          <span *ngIf=\"i === 0\"><br />(diese Woche)</span>\r\n          <span *ngIf=\"i === 1\"><br />(nächste Woche)</span>\r\n        </td>\r\n        <td *ngFor=\"let event of week.events\">\r\n          <app-event-select\r\n            [event]=\"event\"\r\n            (click)=\"selectEvent(event)\"\r\n            [selected]=\"event === selectedEvent\"\r\n          ></app-event-select>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <!-- vertical table -->\r\n  <div\r\n    *ngIf=\"uniqueEvents && recurringEvents(uniqueEvents).length > 0\"\r\n    class=\"mt-3 d-lg-none\"\r\n  >\r\n    <h5>Regelmäßige Aktivitäten</h5>\r\n    <table class=\"w-100\">\r\n      <thead>\r\n        <tr>\r\n          <th style=\"width: 30%\"></th>\r\n          <th style=\"width: 35%\" *ngIf=\"weeks[0] != null\">\r\n            {{ weeks[0].number }}<br />(diese Woche)\r\n          </th>\r\n          <th style=\"width: 35%\" *ngIf=\"weeks[1] != null\">\r\n            {{ weeks[1].number }}<br />(nächste Woche)\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr\r\n          *ngFor=\"let uniqueEvent of recurringEvents(uniqueEvents); index as i\"\r\n        >\r\n          <td>\r\n            {{ uniqueEvent.displayName() }}\r\n            <br />\r\n            <span class=\"badge badge-secondary\">{{\r\n              uniqueEvent.displayTime()\r\n            }}</span>\r\n          </td>\r\n          <td>\r\n            <app-event-select\r\n              *ngIf=\"weeks[0].events[i]\"\r\n              [event]=\"weeks[0].events[i]\"\r\n              (click)=\"selectEvent(weeks[0].events[i])\"\r\n              [selected]=\"weeks[0].events[i] === selectedEvent\"\r\n            ></app-event-select>\r\n          </td>\r\n          <td>\r\n            <app-event-select\r\n              *ngIf=\"weeks[1].events[i]\"\r\n              [event]=\"weeks[1].events[i]\"\r\n              (click)=\"selectEvent(weeks[1].events[i])\"\r\n              [selected]=\"weeks[1].events[i] === selectedEvent\"\r\n            ></app-event-select>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  <div\r\n    *ngIf=\"uniqueEvents && singleEvents(uniqueEvents).length > 0\"\r\n    class=\"mt-3 d-lg-none\"\r\n  >\r\n    <h5>Einmalige Aktivitäten</h5>\r\n    <table class=\"w-100\">\r\n      <tbody *ngIf=\"uniqueEvents\">\r\n        <tr *ngFor=\"let singleEvent of singleEvents(uniqueEvents)\">\r\n          <td>\r\n            {{ singleEvent.displayName() }}\r\n            <br />\r\n            <span class=\"badge badge-secondary\">{{\r\n              singleEvent.displayTime()\r\n            }}</span>\r\n          </td>\r\n          <td>\r\n            <app-event-select\r\n              [event]=\"singleEvent\"\r\n              (click)=\"selectEvent(singleEvent)\"\r\n              [selected]=\"singleEvent === selectedEvent\"\r\n            ></app-event-select>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n\r\n  <div style=\"margin-top: 40px\" *ngIf=\"selectedEvent\">\r\n    <div\r\n      *ngIf=\"selectedEvent && selectedEvent.isInPast()\"\r\n      class=\"alert alert-secondary\"\r\n    >\r\n      Dieses Event liegt in der Vergangenheit. Keine Aktion möglich.\r\n    </div>\r\n\r\n    <div\r\n      *ngIf=\"\r\n        selectedEvent &&\r\n        !selectedEvent.isInPast() &&\r\n        selectedEvent.takenSeats >= selectedEvent.maxSeats\r\n      \"\r\n      class=\"alert alert-danger\"\r\n    >\r\n      Dieses Event ist bereits leider ausgebucht!\r\n    </div>\r\n    <div\r\n      *ngIf=\"\r\n        selectedEvent &&\r\n        !selectedEvent.isInPast() &&\r\n        selectedEvent.takenSeats < selectedEvent.maxSeats\r\n      \"\r\n    >\r\n      <h5>Angaben zu Teilnehmer:</h5>\r\n      <p>\r\n        für die Anmeldung zu\r\n        <b>{{ selectedEvent.name }}</b> am\r\n        <span *ngIf=\"!selectedEvent.singleOccurence\"\r\n          ><b>{{ selectedEvent.displayDate() }}</b> um</span\r\n        >\r\n        <b>{{ selectedEvent.displayTime(false) }} Uhr</b>:\r\n      </p>\r\n      <form [formGroup]=\"registerForm\" (ngSubmit)=\"registerParticipant()\">\r\n        <div class=\"row\">\r\n          <div\r\n            class=\"col-6 col-md-4\"\r\n            [ngClass]=\"{ invalid: isInvalid('firstname') }\"\r\n          >\r\n            <label for=\"firstname\">Vorname</label>\r\n            <br />\r\n            <input\r\n              class=\"form-control\"\r\n              id=\"firstname\"\r\n              type=\"text\"\r\n              placeholder=\"Vorname des Teilnehmers\"\r\n              formControlName=\"firstname\"\r\n            />\r\n          </div>\r\n          <div\r\n            class=\"col-6 col-md-4\"\r\n            [ngClass]=\"{ invalid: isInvalid('lastname') }\"\r\n          >\r\n            <label for=\"lastname\">Nachname</label>\r\n            <br />\r\n            <input\r\n              class=\"form-control\"\r\n              id=\"lastname\"\r\n              type=\"text\"\r\n              placeholder=\"Nachname des Teilnehmers\"\r\n              formControlName=\"lastname\"\r\n            />\r\n          </div>\r\n          <div\r\n            class=\"col-6 col-md-4\"\r\n            [ngClass]=\"{ invalid: isInvalid('email') }\"\r\n          >\r\n            <label for=\"email\">Email</label>\r\n            <br />\r\n            <input\r\n              class=\"form-control\"\r\n              id=\"email\"\r\n              type=\"email\"\r\n              placeholder=\"Kontakt-Email Adresse\"\r\n              formControlName=\"email\"\r\n            />\r\n          </div>\r\n          <div\r\n            class=\"col-6 col-md-4\"\r\n            [ngClass]=\"{ invalid: isInvalid('phone') }\"\r\n          >\r\n            <label for=\"phone\">Telefonnummer</label>\r\n            <br />\r\n            <input\r\n              class=\"form-control\"\r\n              id=\"phone\"\r\n              type=\"phone\"\r\n              placeholder=\"Telefonnr für Rückfragen\"\r\n              formControlName=\"phone\"\r\n            />\r\n          </div>\r\n          <div\r\n            class=\"col-6 col-md-4\"\r\n            [ngClass]=\"{ invalid: isInvalid('street') }\"\r\n          >\r\n            <label for=\"street\">Adresse</label>\r\n            <br />\r\n            <input\r\n              class=\"form-control\"\r\n              id=\"street\"\r\n              type=\"text\"\r\n              placeholder=\"Straße & Hausnummer\"\r\n              formControlName=\"street\"\r\n            />\r\n          </div>\r\n          <div class=\"col-6 col-md-4\" [ngClass]=\"{ invalid: isInvalid('zip') }\">\r\n            <label for=\"zip\">PLZ</label>\r\n            <br />\r\n            <input\r\n              class=\"form-control\"\r\n              id=\"zip\"\r\n              type=\"text\"\r\n              placeholder=\"Postleitzahl\"\r\n              formControlName=\"zip\"\r\n            />\r\n          </div>\r\n          <div\r\n            class=\"col-6 col-md-4\"\r\n            [ngClass]=\"{ invalid: isInvalid('city') }\"\r\n          >\r\n            <label for=\"city\">Ort</label>\r\n            <br />\r\n            <input\r\n              class=\"form-control\"\r\n              id=\"city\"\r\n              type=\"text\"\r\n              placeholder=\"Wohnort\"\r\n              formControlName=\"city\"\r\n            />\r\n          </div>\r\n          <div class=\"col-12 form-check sg-consent-boxes\">\r\n            <div\r\n              class=\"form-group\"\r\n              [ngClass]=\"{\r\n                invalid:\r\n                  registerForm.touched &&\r\n                  registerForm.get('dataprivacy').value === false\r\n              }\"\r\n            >\r\n              <input\r\n                class=\"form-check-input\"\r\n                id=\"dataprivacy\"\r\n                type=\"checkbox\"\r\n                formControlName=\"dataprivacy\"\r\n                required\r\n              />\r\n              <label class=\"form-check-label\" for=\"dataprivacy\"\r\n                >Hiermit bestätige ich, dass ich die\r\n                <a href=\"/rechtliches#datenschutz\" target=\"_blank\"\r\n                  >Datenschutzbestimmungen</a\r\n                >\r\n                von plevents.de gelesen habe und diesen zustimme. Meine Daten\r\n                werden nach spätestens 4 Wochen automatisch gelöscht.</label\r\n              >\r\n            </div>\r\n            <div\r\n              class=\"form-group\"\r\n              *ngIf=\"consentTeaser1 && consentTeaser1.length > 0\"\r\n              [ngClass]=\"{\r\n                invalid:\r\n                  registerForm.touched &&\r\n                  registerForm.get('consent1').value === false\r\n              }\"\r\n            >\r\n              <input\r\n                class=\"form-check-input\"\r\n                id=\"consent1\"\r\n                type=\"checkbox\"\r\n                formControlName=\"consent1\"\r\n                required\r\n              />\r\n              <label class=\"form-check-label\" for=\"consent1\">{{\r\n                consentTeaser1\r\n              }}</label>\r\n              <span *ngIf=\"consentText1 && consentText1.length > 0\">\r\n                <small\r\n                  *ngIf=\"!consentText1Shown\"\r\n                  (click)=\"consentText1Shown = true\"\r\n                  class=\"consent-toggler\"\r\n                  >Details anzeigen</small\r\n                >\r\n                <small\r\n                  *ngIf=\"consentText1Shown\"\r\n                  (click)=\"consentText1Shown = false\"\r\n                  class=\"consent-toggler\"\r\n                  >Details ausblenden</small\r\n                >\r\n              </span>\r\n              <div *ngIf=\"consentText1Shown\" [innerHTML]=\"consentText1\"></div>\r\n            </div>\r\n            <div\r\n              class=\"form-group\"\r\n              *ngIf=\"consentTeaser2 && consentTeaser2.length > 0\"\r\n              [ngClass]=\"{\r\n                invalid:\r\n                  registerForm.touched &&\r\n                  registerForm.get('consent2').value === false\r\n              }\"\r\n            >\r\n              <input\r\n                class=\"form-check-input\"\r\n                id=\"consent2\"\r\n                type=\"checkbox\"\r\n                formControlName=\"consent2\"\r\n                required\r\n              />\r\n              <label class=\"form-check-label\" for=\"consent2\">{{\r\n                consentTeaser2\r\n              }}</label>\r\n              <span *ngIf=\"consentText2 && consentText2.length > 0\">\r\n                <small\r\n                  *ngIf=\"!consentText2Shown\"\r\n                  (click)=\"consentText2Shown = true\"\r\n                  class=\"consent-toggler\"\r\n                  >Details anzeigen</small\r\n                >\r\n                <small\r\n                  *ngIf=\"consentText2Shown\"\r\n                  (click)=\"consentText2Shown = false\"\r\n                  class=\"consent-toggler\"\r\n                  >Details ausblenden</small\r\n                >\r\n              </span>\r\n              <div *ngIf=\"consentText2Shown\" [innerHTML]=\"consentText2\"></div>\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <input\r\n                class=\"form-check-input\"\r\n                id=\"rememberMe\"\r\n                type=\"checkbox\"\r\n                formControlName=\"rememberMe\"\r\n              />\r\n              <label class=\"form-check-label\" for=\"rememberMe\">\r\n                Meine eingegebenen persönlichen Daten sollen auf diesem Gerät\r\n                gespeichert werden. Dies ermöglicht eine schnellere Anmeldung\r\n                zur nächsten Aktivität, da die Felder dann automatisch\r\n                ausgefüllt werden.\r\n              </label>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 col-md-4\">\r\n            <button\r\n              class=\"btn btn-block btn-success\"\r\n              type=\"submit\"\r\n              style=\"margin-top: 32px\"\r\n            >\r\n              Zum Event anmelden\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf=\"tenant && !tenant.active\" class=\"alert alert-warning messageBox\">\r\n  Die angefragte Organisation ist noch nicht freigeschaltet. Daher sind noch\r\n  keine Anmeldungen zu Aktivitäten möglich.\r\n  <br /><br />\r\n  Bitte kontaktieren Sie den Support, falls Sie der Administrator dieser\r\n  Organisation sind.\r\n</div>\r\n","import { CategoryI } from '../../../../common/category';\r\nimport { Injectable } from '@angular/core';\r\nimport { Adapter } from '../helpers/adapter';\r\n\r\nexport class Category implements CategoryI {\r\n  id: string;\r\n  tenantId: string;\r\n  name: string;\r\n  icon?: string;\r\n\r\n  constructor(item?: any) {\r\n    if (item) {\r\n      this.id = item.id;\r\n      this.tenantId = item.tenantId;\r\n      this.name = item.name;\r\n      this.icon = item.icon;\r\n    }\r\n  }\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class CategoryAdapter implements Adapter<Category> {\r\n  adapt(item: any): Category {\r\n    return new Category(item);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { map } from 'rxjs/operators';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Subscription, SubscriptionAdapter } from '../models/subscription';\r\nimport { SubscriptionI } from '../../../../common/subscription';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class SubscriptionService {\r\n  constructor(private http: HttpClient, private adapter: SubscriptionAdapter) {}\r\n\r\n  /*\r\n  getSubscriptions(tenantId: string): Observable<Subscription[]> {\r\n    return this.http\r\n      .get(`${environment.apiUrl}/secure/tenants/${tenantId}/subscriptions`)\r\n      .pipe(\r\n        // Adapt the raw items\r\n        map((data: any[]) => data.map(item => this.adapter.adapt(item)))\r\n      );\r\n  }\r\n  */\r\n\r\n  getLinkToStripCustomerPortal(tenantId: string): Observable<any> {\r\n    return this.http.get(\r\n      `${environment.apiUrl}/secure/tenants/${tenantId}/subscriptions`\r\n    );\r\n  }\r\n\r\n  initializePayment(subscription: SubscriptionI): Observable<any> {\r\n    return this.http.post(\r\n      `${environment.apiUrl}/secure/tenants/${subscription.tenantId}/subscriptions`,\r\n      subscription\r\n    );\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { TenantService } from 'src/app/services/tenant.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { Tenant } from 'src/app/models/tenant';\r\nimport { Router } from '@angular/router';\r\nimport { TenantRelation } from 'src/app/models/tenant-relation';\r\nimport { AppService } from 'src/app/services/app.service';\r\nimport { ROLE } from '../../../../../common/tenant-relation';\r\nimport { ROUTES } from '../../../../../common/frontend.routes';\r\nimport { NotificationService } from 'src/app/services/notification.service';\r\n\r\n@Component({\r\n  selector: 'app-tenant-registration',\r\n  templateUrl: './tenant-registration.component.html',\r\n  styleUrls: ['./tenant-registration.component.scss'],\r\n})\r\nexport class TenantRegistrationComponent implements OnInit {\r\n  registrationForm: FormGroup;\r\n  error: string = null;\r\n  loading: boolean = false;\r\n  currentSubscription: Subscription = null;\r\n  pathCheck = {\r\n    pathTaken: false,\r\n  };\r\n\r\n  constructor(\r\n    private tenantService: TenantService,\r\n    private router: Router,\r\n    private appService: AppService,\r\n    private notification: NotificationService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.registrationForm = new FormGroup({\r\n      name: new FormControl('', [Validators.required]),\r\n      path: new FormControl('', [\r\n        Validators.required,\r\n        Validators.maxLength(40),\r\n        Validators.pattern('[a-z0-9-]{0,40}'),\r\n      ]),\r\n      agbCheck: new FormControl(false, Validators.required),\r\n      dataPrivacyCheck: new FormControl(false, Validators.required),\r\n    });\r\n  }\r\n\r\n  checkPath(): void {\r\n    this.tenantService.checkPath(\r\n      this.registrationForm.get('path').value,\r\n      this.pathCheck\r\n    );\r\n  }\r\n\r\n  isInvalid(formControlName: string): boolean {\r\n    return (\r\n      this.registrationForm.get(formControlName).invalid &&\r\n      this.registrationForm.get(formControlName).touched\r\n    );\r\n  }\r\n\r\n  onSubmit(): void {\r\n    if (this.registrationForm.invalid) {\r\n      this.registrationForm.markAllAsTouched();\r\n      return;\r\n    }\r\n    this.loading = true;\r\n    // create the tenant. aftewards, forward the user to the registration for the personal login\r\n    const name = this.registrationForm.get('name').value;\r\n    const path = this.registrationForm.get('path').value;\r\n    const tenantToCreate = new Tenant(name, path);\r\n    this.tenantService.create(tenantToCreate).subscribe(\r\n      (tenant: Tenant) => {\r\n        // the assignment was done on serverside already. go to the management view of the new tenant\r\n        const relation = new TenantRelation();\r\n        relation.user = this.appService.getCurrentUser();\r\n        relation.userId = this.appService.getCurrentUser().id;\r\n        relation.tenant = tenant;\r\n        relation.tenantId = tenant.id;\r\n        relation.active = true;\r\n        relation.role = ROLE.OWNER;\r\n        const relations = this.appService.getCurrentTenantRelations();\r\n        relations.push(relation);\r\n        this.appService.setCurrentTenantRelations(relations);\r\n        this.router.navigate([tenant.path, ROUTES.TENANT_MANAGEMENT]);\r\n      },\r\n      error => {\r\n        console.error(error);\r\n        this.notification.error('Es trat leider ein Fehler auf');\r\n        this.loading = false;\r\n      }\r\n    );\r\n  }\r\n\r\n  currentLengthOf(formControlName: string): number {\r\n    try {\r\n      return (this.registrationForm.get(formControlName).value as string)\r\n        .length;\r\n    } catch (e) {\r\n      return 0;\r\n    }\r\n  }\r\n}\r\n","<h1>Jetzt Organisation anlegen</h1>\r\n<p>\r\n  Legen Sie sich in wenigen Minuten Ihre eigene kostenlose Terminbuchungs-Seite\r\n  an, mit DSGVO-konformer Datensparsamkeit und automatischer -löschung.\r\n</p>\r\n<hr />\r\n<form [formGroup]=\"registrationForm\" (ngSubmit)=\"onSubmit()\">\r\n  <div class=\"row\">\r\n    <div class=\"col-12 col-md-6\">\r\n      Der Name Ihrer Organisation wird auf der Website angezeigt. Bspw.: \"CVJM\r\n      Gärtringen\"<br />\r\n      <small>Sie können diesen Wert später noch ändern.</small>\r\n    </div>\r\n    <div class=\"col-12 col-md-6\">\r\n      <div class=\"form-group\">\r\n        <label for=\"name\">Name der Organisation *</label>\r\n        <input\r\n          id=\"name\"\r\n          type=\"text\"\r\n          formControlName=\"name\"\r\n          placeholder=\"z.B. Musterorganisation e.V.\"\r\n          class=\"form-control\"\r\n          [ngClass]=\"{\r\n            'is-invalid': isInvalid('name')\r\n          }\"\r\n        />\r\n        <div *ngIf=\"isInvalid('name')\" class=\"invalid-feedback\">\r\n          Bitte einen kurzen beschreibenden Namen angeben\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-12 col-md-6\">\r\n      Bitte einen Pfad angeben, der dann in der URL zu sehen sein wird. Die\r\n      maximale Länge beträgt 40 Zeichen. Nur Kleinbuchstaben, Zahlen und\r\n      Trennstriche (-) sind erlaubt.<br />\r\n      <small>Sie können diesen Wert später noch ändern.</small>\r\n    </div>\r\n    <div class=\"col-12 col-md-6\">\r\n      <div class=\"form-group\">\r\n        <label for=\"path\">Pfad *</label>\r\n        <div class=\"input-group\">\r\n          <div class=\"input-group-prepend\">\r\n            <span class=\"input-group-text\">https://plevents.de/o/</span>\r\n          </div>\r\n          <input\r\n            id=\"path\"\r\n            type=\"text\"\r\n            formControlName=\"path\"\r\n            placeholder=\"z.B. meine-organisation\"\r\n            class=\"form-control\"\r\n            (keyup)=\"checkPath()\"\r\n            [ngClass]=\"{\r\n              'is-invalid': pathCheck.pathTaken || isInvalid('path'),\r\n              'is-valid':\r\n                !pathCheck.pathTaken && registrationForm.get('path').valid\r\n            }\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <div\r\n            [ngClass]=\"{\r\n              'is-invalid': pathCheck.pathTaken || isInvalid('path'),\r\n              'is-valid':\r\n                !pathCheck.pathTaken && registrationForm.get('path').valid\r\n            }\"\r\n          ></div>\r\n          <div *ngIf=\"pathCheck.pathTaken\" class=\"invalid-feedback\">\r\n            Dieser Pfad ist bereits leider vergeben\r\n          </div>\r\n          <div class=\"valid-feedback\">\r\n            <i class=\"fas fa-check\"></i> Pfad ist noch frei und kann benutzt\r\n            werden!\r\n          </div>\r\n          <div *ngIf=\"isInvalid('path')\" class=\"invalid-feedback\">\r\n            Bitte einen gültigen Pfad angeben\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-12 form-group\">\r\n      <div class=\"form-check\">\r\n        <input\r\n          class=\"form-check-input\"\r\n          id=\"agbCheck\"\r\n          type=\"checkbox\"\r\n          formControlName=\"agbCheck\"\r\n          required\r\n        />\r\n        <label\r\n          class=\"form-check-label\"\r\n          for=\"agbCheck\"\r\n          [ngClass]=\"{\r\n            'is-invalid': isInvalid('agbCheck')\r\n          }\"\r\n          >Hiermit bestätige ich, dass ich die\r\n          <a href=\"/rechtliches#agb\" target=\"_blank\">AGB</a> gelesen habe und\r\n          diesen zustimme. *</label\r\n        >\r\n        <div *ngIf=\"isInvalid('agbCheck')\" class=\"invalid-feedback\">\r\n          Bitte stimmen Sie den AGB zu.\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-12 form-group\">\r\n      <div class=\"form-check\">\r\n        <input\r\n          class=\"form-check-input\"\r\n          id=\"dataPrivacyCheck\"\r\n          type=\"checkbox\"\r\n          formControlName=\"dataPrivacyCheck\"\r\n          required\r\n        />\r\n        <label\r\n          class=\"form-check-label\"\r\n          for=\"dataPrivacyCheck\"\r\n          [ngClass]=\"{\r\n            'is-invalid': isInvalid('dataPrivacyCheck')\r\n          }\"\r\n          >Hiermit bestätige ich, dass ich die\r\n          <a href=\"/rechtliches#datenschutz\" target=\"_blank\"\r\n            >Datenschutzbestimmungen</a\r\n          >\r\n          gelesen habe und diesen zustimme. *</label\r\n        >\r\n        <div *ngIf=\"isInvalid('dataPrivacyCheck')\" class=\"invalid-feedback\">\r\n          Bitte stimmen Sie den Datenschutzbestimmungen zu.\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"text-right\">\r\n    <button [disabled]=\"loading\" class=\"btn btn-success\">\r\n      <span\r\n        *ngIf=\"loading\"\r\n        class=\"spinner-border spinner-border-sm mr-1\"\r\n      ></span>\r\n      Organisation erstellen\r\n    </button>\r\n  </div>\r\n  <div *ngIf=\"error\" class=\"alert alert-danger mt-3 mb-0\">\r\n    {{ error }}\r\n  </div>\r\n</form>\r\n","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Tenant } from '../../models/tenant';\r\nimport { TenantService } from '../../services/tenant.service';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { clone, find } from 'lodash';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { AppService } from 'src/app/services/app.service';\r\nimport { ROLE } from '../../../../../common/tenant-relation';\r\nimport { ROUTES } from '../../../../../common/frontend.routes';\r\nimport { NotificationService } from 'src/app/services/notification.service';\r\n\r\n@Component({\r\n  selector: 'app-tenant',\r\n  templateUrl: './tenant.component.html',\r\n  styleUrls: ['./tenant.component.scss'],\r\n})\r\nexport class TenantComponent implements OnInit, OnDestroy {\r\n  tenant: Tenant = null;\r\n  logoValidationError: string = null;\r\n  private tenantSubscription: Subscription;\r\n  operationOngoing = {\r\n    updateCore: false,\r\n    updateLegal: false,\r\n    deleteTenant: false,\r\n  };\r\n  pathCheck = {\r\n    pathTaken: false,\r\n  };\r\n  color: string;\r\n  ROLE = ROLE;\r\n  tenantForm: FormGroup = new FormGroup({\r\n    name: new FormControl('', Validators.required),\r\n    path: new FormControl('', Validators.required),\r\n  });\r\n  legalForm: FormGroup = new FormGroup({\r\n    consentTeaser1: new FormControl('', Validators.maxLength(1000)),\r\n    consentText1: new FormControl('', Validators.maxLength(10000)),\r\n    consentTeaser2: new FormControl('', Validators.maxLength(1000)),\r\n    consentText2: new FormControl('', Validators.maxLength(10000)),\r\n  });\r\n\r\n  constructor(\r\n    private tenantService: TenantService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    public appService: AppService,\r\n    private notification: NotificationService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.tenant = null;\r\n    this.tenantSubscription = this.appService.tenant.subscribe(\r\n      (tenant: Tenant) => {\r\n        if (tenant && tenant.path === this.route.snapshot.params.tenantPath) {\r\n          this.appService.setColor(tenant);\r\n          this.tenant = tenant;\r\n          this.setFormValues();\r\n        }\r\n      }\r\n    );\r\n    this.tenantService.load(this.route.snapshot.params.tenantPath, true);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.appService.setColor(null);\r\n    if (this.tenantSubscription) {\r\n      this.tenantSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  isInvalid(formControlName: string): boolean {\r\n    return (\r\n      this.tenantForm.get(formControlName).invalid &&\r\n      this.tenantForm.get(formControlName).touched\r\n    );\r\n  }\r\n\r\n  setFormValues(): void {\r\n    this.tenantForm.get('name').setValue(this.tenant.name);\r\n    this.tenantForm.get('path').setValue(this.tenant.path);\r\n    this.legalForm.get('consentTeaser1').setValue(this.tenant.consentTeaser1);\r\n    this.legalForm.get('consentText1').setValue(this.tenant.consentText1);\r\n    this.legalForm.get('consentTeaser2').setValue(this.tenant.consentTeaser2);\r\n    this.legalForm.get('consentText2').setValue(this.tenant.consentText2);\r\n    this.color = this.tenant.color;\r\n  }\r\n\r\n  updateTenant(): void {\r\n    if (\r\n      this.tenantForm.invalid ||\r\n      this.pathCheck.pathTaken ||\r\n      this.logoValidationError\r\n    ) {\r\n      this.notification.error('Bitte alle Felder korrekt ausfüllen');\r\n      this.tenantForm.markAllAsTouched();\r\n      return;\r\n    }\r\n    this.operationOngoing.updateCore = true;\r\n    const updatedTenant = clone(this.tenant);\r\n    updatedTenant.name = this.tenantForm.get('name').value;\r\n    updatedTenant.path = this.tenantForm.get('path').value;\r\n    updatedTenant.color = this.color;\r\n    const pathChanged = updatedTenant.path !== this.tenant.path;\r\n    this.tenantService.update(updatedTenant).subscribe(\r\n      (tenant: Tenant) => {\r\n        // update the tenant in the relations array\r\n        const relations = this.appService.getCurrentTenantRelations();\r\n        const relation = find(relations, { tenantId: tenant.id });\r\n        if (relation) {\r\n          relation.tenant = tenant;\r\n        }\r\n        this.appService.setCurrentTenantRelations(relations);\r\n        this.appService.setCurrentTenant(tenant);\r\n        if (pathChanged) {\r\n          // the path was changed, reload the page\r\n          this.router.navigate([tenant.path, ROUTES.TENANT_MANAGEMENT]);\r\n        } else {\r\n          this.tenant = tenant;\r\n          this.setFormValues();\r\n        }\r\n        this.notification.success('Erfolgreich gespeichert');\r\n        this.operationOngoing.updateCore = false;\r\n      },\r\n      error => {\r\n        console.error(error);\r\n        this.notification.error('Beim Speichern trat leider ein Fehler auf!');\r\n        this.operationOngoing.updateCore = false;\r\n      }\r\n    );\r\n  }\r\n\r\n  updateLegalTexts(): void {\r\n    if (this.legalForm.invalid) {\r\n      this.notification.error('Bitte alle Felder korrekt ausfüllen');\r\n      this.legalForm.markAllAsTouched();\r\n      return;\r\n    }\r\n    this.operationOngoing.updateLegal = true;\r\n    const updatedTenant = clone(this.tenant);\r\n    updatedTenant.consentTeaser1 = this.legalForm.get('consentTeaser1').value;\r\n    updatedTenant.consentText1 = this.legalForm.get('consentText1').value;\r\n    updatedTenant.consentTeaser2 = this.legalForm.get('consentTeaser2').value;\r\n    updatedTenant.consentText2 = this.legalForm.get('consentText2').value;\r\n    this.tenantService.update(updatedTenant).subscribe(\r\n      (tenant: Tenant) => {\r\n        this.tenant = tenant;\r\n        this.setFormValues();\r\n        // update the tenant in the relations array\r\n        const relations = this.appService.getCurrentTenantRelations();\r\n        const relation = find(relations, { tenantId: tenant.id });\r\n        if (relation) {\r\n          relation.tenant = tenant;\r\n        }\r\n        this.appService.setCurrentTenantRelations(relations);\r\n        this.appService.setCurrentTenant(tenant);\r\n        this.notification.success('Erfolgreich gespeichert');\r\n        this.operationOngoing.updateLegal = false;\r\n      },\r\n      error => {\r\n        console.error(error);\r\n        this.notification.error('Beim Speichern trat leider ein Fehler auf');\r\n        this.operationOngoing.updateLegal = false;\r\n      }\r\n    );\r\n  }\r\n\r\n  deleteTenant(): void {\r\n    this.notification.confirm({\r\n      title: 'Organisation löschen?',\r\n      text: 'Wirklich die gesamte Organisation löschen?',\r\n      yesButtonClass: 'btn-danger',\r\n      yesButtonText: 'Löschen',\r\n      yesCallback: () => {\r\n        this.operationOngoing.deleteTenant = true;\r\n        this.tenantService.delete(this.tenant.id).subscribe(\r\n          () => {\r\n            this.notification.success('Organisation gelöscht!');\r\n            // go to profile view\r\n            this.appService.setCurrentTenant(null);\r\n            this.tenantService.getAll().subscribe();\r\n            this.router.navigate([`/${ROUTES.PROFILE}`]);\r\n          },\r\n          error => {\r\n            this.notification.error('Es trat ein Fehler auf');\r\n            this.operationOngoing.deleteTenant = false;\r\n          }\r\n        );\r\n      },\r\n    });\r\n  }\r\n\r\n  checkPath(): void {\r\n    // only check the path if it is different than the already-existing one\r\n    const desiredNewPath = this.tenantForm.get('path').value;\r\n    if (desiredNewPath !== this.tenant.path) {\r\n      this.tenantService.checkPath(\r\n        this.tenantForm.get('path').value,\r\n        this.pathCheck\r\n      );\r\n    }\r\n  }\r\n\r\n  setNewLogo(newLogo: any): void {\r\n    this.logoValidationError = null;\r\n    const newLogoFile = <File>newLogo.target.files[0];\r\n    // check that image does not exceed maximum size\r\n    // 1024 bytes = 1 kB\r\n    const kiloBytes = Math.round(newLogoFile.size / 1024);\r\n    if (kiloBytes > 500) {\r\n      // 1024 kiloBytes = 1 MB\r\n      const fileSize =\r\n        kiloBytes / 1024 >= 1\r\n          ? `${(kiloBytes / 1024).toFixed(2)} MB`\r\n          : `${kiloBytes} kB`;\r\n      this.logoValidationError = `Das gewählte Bild ist zu groß (${fileSize}). Die maximale Größe eines Logos ist 500 kB`;\r\n      return;\r\n    }\r\n    var myReader: FileReader = new FileReader();\r\n    myReader.onloadend = e => {\r\n      this.tenant.logo = <string>myReader.result;\r\n    };\r\n    myReader.readAsDataURL(newLogoFile);\r\n  }\r\n\r\n  currentLengthOf(formControlName: string): number {\r\n    try {\r\n      if (this.tenantForm.get(formControlName)) {\r\n        return (this.tenantForm.get(formControlName).value as string).length;\r\n      }\r\n      if (this.legalForm.get(formControlName)) {\r\n        return (this.legalForm.get(formControlName).value as string).length;\r\n      }\r\n    } catch (e) {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * simply trigger the browser to open the file select modal\r\n   */\r\n  selectNewLogo(): void {\r\n    document.getElementById('logo_file_input').click();\r\n  }\r\n}\r\n","<h2>Verwaltung der Organisation</h2>\r\n<p>\r\n  Verwalten Sie hier den Namen und den Pfad Ihrer Organisation. Zudem können Sie\r\n  ein Logo hinterlegen und Administratoren verwalten.\r\n</p>\r\n<div\r\n  class=\"alert alert-warning d-flex flex-row\"\r\n  *ngIf=\"tenant && !tenant.active\"\r\n>\r\n  <div style=\"width: 30px\">\r\n    <i class=\"fas fa-exclamation-triangle\"></i>\r\n  </div>\r\n  <div>\r\n    Diese Organisation ist derzeit noch <b>nicht</b> freigeschaltet. Events sind\r\n    daher noch nicht öffentlich verfübar. Bitte kontaktieren Sie den Support für\r\n    Unterstützung:\r\n    <a href=\"mailto:stefan.strobel@s4-consulting.de\"\r\n      >stefan.strobel@s4-consulting.de</a\r\n    >\r\n  </div>\r\n</div>\r\n\r\n<hr style=\"margin-bottom: -30px\" />\r\n\r\n<!-- two-column layout -->\r\n<div class=\"row\">\r\n  <div class=\"col-12 col-lg-6 col-xl-5 mt-5\">\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <h4>Allgemein</h4>\r\n        <form [formGroup]=\"tenantForm\" *ngIf=\"tenant\">\r\n          <div class=\"row\">\r\n            <div\r\n              class=\"col-12 col-md-6\"\r\n              [ngClass]=\"{ invalid: isInvalid('name') }\"\r\n            >\r\n              <label for=\"name\">Name *</label>\r\n              <br />\r\n              <input\r\n                class=\"form-control\"\r\n                id=\"name\"\r\n                type=\"text\"\r\n                formControlName=\"name\"\r\n              />\r\n            </div>\r\n            <div\r\n              class=\"col-12 col-md-6\"\r\n              [ngClass]=\"{ invalid: isInvalid('path') }\"\r\n            >\r\n              <label for=\"name\">Pfad *</label>\r\n              <br />\r\n              <input\r\n                class=\"form-control\"\r\n                id=\"path\"\r\n                type=\"text\"\r\n                formControlName=\"path\"\r\n                (keyup)=\"checkPath()\"\r\n                [ngClass]=\"{\r\n                  'is-invalid': pathCheck.pathTaken\r\n                }\"\r\n              />\r\n              <div *ngIf=\"pathCheck.pathTaken\" class=\"invalid-feedback\">\r\n                Dieser Pfad ist bereits leider vergeben\r\n              </div>\r\n            </div>\r\n            <div\r\n              class=\"col-12 col-md-6 mb-0\"\r\n              [ngClass]=\"{ invalid: logoValidationError !== null }\"\r\n            >\r\n              <label (click)=\"selectNewLogo()\">Logo für die Organisation</label>\r\n              <div class=\"form-group\">\r\n                <div *ngIf=\"tenant !== null && tenant.logo !== null\">\r\n                  <img\r\n                    class=\"plevents-tenant-logo plevents-tenant-logo-hover\"\r\n                    [src]=\"tenant.logo\"\r\n                    (click)=\"selectNewLogo()\"\r\n                  />\r\n                  <br />\r\n                  <small\r\n                    ><i style=\"cursor: pointer\" (click)=\"selectNewLogo()\"\r\n                      >neues Logo auswählen</i\r\n                    ></small\r\n                  >\r\n                </div>\r\n                <div\r\n                  class=\"plevents-tenant-logo plevents-tenant-logo-hover\"\r\n                  [hidden]=\"tenant !== null && tenant.logo !== null\"\r\n                >\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"logo_file_input\"\r\n                    accept=\".jpg,.jpeg,.png\"\r\n                    (change)=\"setNewLogo($event)\"\r\n                  />\r\n                  <label for=\"logo_file_input\">Logo auswählen</label>\r\n                </div>\r\n                <div class=\"invalid-logo\" *ngIf=\"logoValidationError !== null\">\r\n                  {{ logoValidationError }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-12 col-md-6 mb-0\">\r\n              <label>Darstellungsfarbe</label><br />\r\n              <span\r\n                id=\"tenant-color-picker\"\r\n                class=\"clickable\"\r\n                [style.color]=\"color\"\r\n                [cpPosition]=\"'bottom'\"\r\n                [cpPositionOffset]=\"'50%'\"\r\n                [cpPositionRelativeToArrow]=\"true\"\r\n                [(colorPicker)]=\"color\"\r\n                >Legen Sie hier Ihre persönliche Anwendungsfarbe fest</span\r\n              >\r\n            </div>\r\n            <div class=\"col-12 text-right mb-0\">\r\n              <button\r\n                class=\"btn btn-outline-success\"\r\n                (click)=\"updateTenant()\"\r\n                [disabled]=\"operationOngoing.updateCore\"\r\n              >\r\n                <loading\r\n                  *ngIf=\"operationOngoing.updateCore\"\r\n                  textClass=\"text-success\"\r\n                ></loading>\r\n                Speichern\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n        <div class=\"text-center\" *ngIf=\"!tenant\">\r\n          <loading></loading>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 mt-5\">\r\n        <h4>Einwilligungserklärung</h4>\r\n        <p>\r\n          Sie können, zusätzlich zu den plevents Datenschutzbedingungen, noch\r\n          weitere Datenschutz- bzw. Einwilligungserklärungen hinterlegen, die\r\n          die Teilnehmer durch aktives Setzen eines Häkchens akzeptieren müssen.\r\n        </p>\r\n        <form [formGroup]=\"legalForm\" *ngIf=\"tenant\">\r\n          <div class=\"row\">\r\n            <div class=\"col-12\">\r\n              <label for=\"consentTeaser1\"\r\n                >Einwilligungserklärung 1 Teaser</label\r\n              >\r\n              <br />\r\n              <input\r\n                class=\"form-control\"\r\n                id=\"consentTeaser1\"\r\n                type=\"text\"\r\n                formControlName=\"consentTeaser1\"\r\n              />\r\n              <small\r\n                >{{ currentLengthOf('consentTeaser1') }} / 1.000 Zeichen</small\r\n              >\r\n              <br />\r\n              <label style=\"margin-top: 25px\" for=\"consent\"\r\n                >Einwilligungserklärung 1 Details</label\r\n              >\r\n              <br />\r\n              <quill-editor\r\n                formControlName=\"consentText1\"\r\n                [style]=\"{ height: '250px' }\"\r\n              ></quill-editor>\r\n              <small\r\n                >{{ currentLengthOf('consentText1') }} / 10.000 Zeichen</small\r\n              >\r\n            </div>\r\n            <div class=\"col-12\">\r\n              <label for=\"consentTeaser2\"\r\n                >Einwilligungserklärung 2 Teaser</label\r\n              >\r\n              <br />\r\n              <input\r\n                class=\"form-control\"\r\n                id=\"consentTeaser2\"\r\n                type=\"text\"\r\n                formControlName=\"consentTeaser2\"\r\n              />\r\n              <small\r\n                >{{ currentLengthOf('consentTeaser2') }} / 1.000 Zeichen</small\r\n              >\r\n              <br />\r\n              <label style=\"margin-top: 25px\" for=\"consent\"\r\n                >Einwilligungserklärung 2 Details</label\r\n              >\r\n              <br />\r\n              <quill-editor\r\n                formControlName=\"consentText2\"\r\n                [style]=\"{ height: '250px' }\"\r\n              ></quill-editor>\r\n              <small\r\n                >{{ currentLengthOf('consentText2') }} / 10.000 Zeichen</small\r\n              >\r\n            </div>\r\n            <div class=\"col-12 text-right mb-0\">\r\n              <button\r\n                class=\"btn btn-outline-success\"\r\n                (click)=\"updateLegalTexts()\"\r\n                [disabled]=\"operationOngoing.updateLegal\"\r\n              >\r\n                <loading\r\n                  *ngIf=\"operationOngoing.updateLegal\"\r\n                  textClass=\"text-success\"\r\n                ></loading>\r\n                Speichern\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n        <div class=\"text-center\" *ngIf=\"!tenant\">\r\n          <loading></loading>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"col-12 col-lg-6 col-xl-5 offset-xl-2\">\r\n    <div class=\"row\">\r\n      <div class=\"col-12 mt-5\">\r\n        <category-management\r\n          *ngIf=\"tenant\"\r\n          [tenant]=\"tenant\"\r\n        ></category-management>\r\n      </div>\r\n      <div class=\"col-12 mt-5\">\r\n        <user-management [tenant]=\"tenant\" *ngIf=\"tenant\"></user-management>\r\n      </div>\r\n      <div\r\n        class=\"col-12 mt-5\"\r\n        *ngIf=\"tenant && appService.hasRole(tenant.id, ROLE.OWNER)\"\r\n      >\r\n        <subscription [tenant]=\"tenant\"></subscription>\r\n      </div>\r\n      <div\r\n        class=\"col-12 mt-5\"\r\n        *ngIf=\"tenant && appService.hasRole(tenant.id, ROLE.OWNER)\"\r\n      >\r\n        <h4>Löschung</h4>\r\n        <p>\r\n          Falls Sie Ihre Organisation nicht mehr benötigen, können Sie hier\r\n          jegliche Daten löschen. Hierzu gehören:\r\n        </p>\r\n        <ul>\r\n          <li>alle Nutzerzuordnungen</li>\r\n          <li>alle Events</li>\r\n          <li>alle Teilnehmerdaten</li>\r\n        </ul>\r\n        Die Löschung erfolgt sofort und kann <b>nicht</b> rückgängig gemacht\r\n        werden!\r\n        <button\r\n          class=\"btn btn-block btn-sm mt-3\"\r\n          id=\"delete-account-button\"\r\n          (click)=\"deleteTenant()\"\r\n          [disabled]=\"operationOngoing.deleteTenant\"\r\n          *ngIf=\"tenant\"\r\n        >\r\n          <loading\r\n            *ngIf=\"operationOngoing.deleteTenant\"\r\n            textClass=\"text-danger\"\r\n          ></loading>\r\n          Organisation löschen\r\n        </button>\r\n        <div class=\"text-center\" *ngIf=\"!tenant\">\r\n          <loading></loading>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Injectable } from '@angular/core';\r\nimport {\r\n  HttpRequest,\r\n  HttpHandler,\r\n  HttpEvent,\r\n  HttpInterceptor,\r\n} from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\nimport { AppService } from '../services/app.service';\r\n\r\n@Injectable()\r\nexport class BasicAuthInterceptor implements HttpInterceptor {\r\n  constructor(private appService: AppService) {}\r\n\r\n  intercept(\r\n    request: HttpRequest<any>,\r\n    next: HttpHandler\r\n  ): Observable<HttpEvent<any>> {\r\n    // add header with basic auth credentials if user is logged in and request is to the api url\r\n    const user = this.appService.getCurrentUser();\r\n    const isLoggedIn = user && user.authdata;\r\n    const isApiUrl = request.url.startsWith(environment.apiUrl);\r\n    if (isLoggedIn && isApiUrl) {\r\n      request = request.clone({\r\n        setHeaders: {\r\n          Authorization: `Basic ${user.authdata}`,\r\n        },\r\n      });\r\n    }\r\n\r\n    return next.handle(request);\r\n  }\r\n}\r\n","// toast.service.ts\r\nimport { Component, Injectable, OnInit, TemplateRef } from '@angular/core';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\r\n\r\nexport interface ConfirmOptions {\r\n  id?: number;\r\n  title: string;\r\n  text: string;\r\n  yesCallback?: Function;\r\n  noCallback?: Function;\r\n  yesButtonText?: string;\r\n  noButtonText?: string;\r\n  noButtonClass?: string;\r\n  yesButtonClass?: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class NotificationService {\r\n  toasts: any[] = [];\r\n  modalRef: BsModalRef;\r\n  confirmOptions: ConfirmOptions = null;\r\n\r\n  constructor(private modalService: BsModalService) {}\r\n\r\n  // Push new Toasts to array with content and options\r\n  private show(textOrTpl: string | TemplateRef<any>, options: any = {}) {\r\n    this.toasts.push({ textOrTpl, ...options });\r\n  }\r\n\r\n  // Callback method to remove Toast DOM element from view\r\n  remove(toast) {\r\n    this.toasts = this.toasts.filter(t => t !== toast);\r\n  }\r\n\r\n  success(message: string): void {\r\n    this.show(message, {\r\n      classname: 'toast-success',\r\n      delay: 2000,\r\n      autohide: true,\r\n    });\r\n  }\r\n\r\n  error(message: string): void {\r\n    this.show(message, {\r\n      classname: 'toast-error',\r\n      delay: 2000,\r\n      autohide: true,\r\n    });\r\n  }\r\n\r\n  confirm(options: ConfirmOptions): void {\r\n    // set defaults if not overridden\r\n    options.yesButtonText = options.yesButtonText\r\n      ? options.yesButtonText\r\n      : 'Ja';\r\n    options.noButtonText = options.noButtonText ? options.noButtonText : 'Nein';\r\n    this.confirmOptions = options;\r\n    options.id = Math.ceil(Math.random() * 100000);\r\n    this.modalRef = this.modalService.show(ConfirmModalComponent, {\r\n      id: options.id,\r\n      class: 'modal-md modal-dialog-centered',\r\n      initialState: this.confirmOptions,\r\n      ignoreBackdropClick: true,\r\n    });\r\n  }\r\n}\r\n\r\n/* This is a component which we pass in modal*/\r\n\r\n@Component({\r\n  selector: 'modal-content',\r\n  template: `\r\n    <div class=\"modal-header\">\r\n      <h4 class=\"modal-title pull-left\">{{ title }}</h4>\r\n    </div>\r\n    <div class=\"modal-body\">\r\n      <p>{{ text }}</p>\r\n    </div>\r\n    <div class=\"modal-footer\">\r\n      <div class=\"w-100\">\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn {{ noButtonClass }}\"\r\n          style=\"width: 40%;\"\r\n          (click)=\"confirmNo()\"\r\n        >\r\n          {{ noButtonText }}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn {{ yesButtonClass }} float-right\"\r\n          style=\"width: 40%;\"\r\n          (click)=\"confirmYes()\"\r\n        >\r\n          {{ yesButtonText }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  `,\r\n})\r\nexport class ConfirmModalComponent implements OnInit {\r\n  id: number;\r\n  title: string;\r\n  text: string;\r\n  yesCallback: Function;\r\n  noCallback: Function;\r\n  yesButtonText: string;\r\n  noButtonText: string;\r\n  noButtonClass: string = 'btn-light';\r\n  yesButtonClass: string = 'btn-light';\r\n\r\n  constructor(\r\n    private modalService: BsModalService,\r\n    public modalRef: BsModalRef\r\n  ) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  confirmYes(): void {\r\n    if (this.yesCallback) {\r\n      this.yesCallback();\r\n    }\r\n    this.modalService.hide(this.id);\r\n  }\r\n\r\n  confirmNo(): void {\r\n    if (this.noCallback) {\r\n      this.noCallback();\r\n    }\r\n    this.modalService.hide(this.id);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { Tenant } from '../models/tenant';\r\nimport { User } from '../models/user';\r\nimport { TenantRelation } from '../models/tenant-relation';\r\nimport { ROLE } from '../../../../common/tenant-relation';\r\nimport { find } from 'lodash';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AppService {\r\n  private userSubject: BehaviorSubject<User>;\r\n  public user: Observable<User>;\r\n  private tenantSubject: BehaviorSubject<Tenant>;\r\n  public tenant: Observable<Tenant>;\r\n  private tenantRelationsSubject: BehaviorSubject<TenantRelation[]>;\r\n  public tenantRelations: Observable<TenantRelation[]>;\r\n\r\n  constructor() {\r\n    this.userSubject = new BehaviorSubject<User>(null);\r\n    this.user = this.userSubject.asObservable();\r\n    this.tenantSubject = new BehaviorSubject<Tenant>(null);\r\n    this.tenant = this.tenantSubject.asObservable();\r\n    this.tenantRelationsSubject = new BehaviorSubject<TenantRelation[]>(null);\r\n    this.tenantRelations = this.tenantRelationsSubject.asObservable();\r\n  }\r\n\r\n  /**\r\n   * sets the overall text color based on the tenant. if tenant is null, it defaults to the plevents standard color\r\n   * @param color\r\n   */\r\n  setColor(tenant: Tenant): void {\r\n    let color: string, colorDarkened: string;\r\n    if (tenant && tenant.color) {\r\n      color = tenant.color;\r\n      colorDarkened = tenant.colorDarkened;\r\n    } else {\r\n      color = ' #2f5597';\r\n      colorDarkened = '#344f7d';\r\n    }\r\n    document.querySelector(\r\n      'body'\r\n    ).style.cssText = `--plevents-main-color: ${color}; --plevents-main-color-darkened: ${colorDarkened};`;\r\n  }\r\n\r\n  setCurrentTenant(tenant: Tenant): void {\r\n    if (this.tenantSubject.value !== tenant) {\r\n      this.tenantSubject.next(tenant);\r\n    }\r\n  }\r\n\r\n  setCurrentTenantRelations(tenantRelations: TenantRelation[]): void {\r\n    this.tenantRelationsSubject.next(tenantRelations);\r\n  }\r\n\r\n  setCurrentUser(user: User): void {\r\n    if (this.userSubject.value !== user) {\r\n      this.userSubject.next(user);\r\n    }\r\n  }\r\n\r\n  getCurrentTenant(): Tenant {\r\n    return this.tenantSubject.value;\r\n  }\r\n\r\n  getCurrentTenantRelations(): TenantRelation[] {\r\n    return this.tenantRelationsSubject.value;\r\n  }\r\n\r\n  getCurrentUser(): User {\r\n    return this.userSubject.value;\r\n  }\r\n\r\n  hasRole(tenantId: string, role: ROLE): boolean {\r\n    if (this.getCurrentTenantRelations()) {\r\n      const relation = find(this.getCurrentTenantRelations(), { tenantId });\r\n      return relation && relation.hasRole(role);\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { TenantService } from 'src/app/services/tenant.service';\r\nimport { Tenant } from 'src/app/models/tenant';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { AppService } from 'src/app/services/app.service';\r\nimport { Subscription } from 'rxjs';\r\nimport { ROUTES } from '../../../../../common/frontend.routes';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss'],\r\n})\r\nexport class LoginComponent implements OnInit, OnDestroy {\r\n  loginForm: FormGroup = new FormGroup({\r\n    username: new FormControl('', Validators.required),\r\n    password: new FormControl('', Validators.required),\r\n  });\r\n  loading = false;\r\n  submitted = false;\r\n  returnUrl: string;\r\n  error = '';\r\n  tenant: Tenant;\r\n  userSubscription: Subscription;\r\n  ROUTES = ROUTES;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private authenticationService: AuthenticationService,\r\n    private tenantService: TenantService,\r\n    private appService: AppService\r\n  ) {\r\n    // redirect to home if already logged in\r\n    if (this.appService.getCurrentUser()) {\r\n      this.router.navigate(['/']);\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    // check if there is a logged-in user already. if so, forward directly to the profile\r\n    this.userSubscription = this.appService.user.subscribe(user => {\r\n      if (user) {\r\n        this.router.navigate([`/${ROUTES.PROFILE}`]);\r\n      }\r\n    });\r\n    if (this.tenantPath()) {\r\n      // load the tenant information and redirect in case tenant path does not exist:\r\n      this.tenantService.getByPath(this.tenantPath()).subscribe(\r\n        () => {},\r\n        (error: any) => {\r\n          if (\r\n            error === 'Not Found' ||\r\n            (error instanceof HttpErrorResponse && error.status === 404)\r\n          ) {\r\n            this.router.navigate(['fehler', 'account-not-found']);\r\n          }\r\n        }\r\n      );\r\n      this.appService.tenant.subscribe((tenant: Tenant) => {\r\n        if (tenant) {\r\n          this.tenant = tenant;\r\n          this.appService.setColor(this.tenant);\r\n          // get return url from route parameters or default to '/'\r\n          this.returnUrl =\r\n            this.route.snapshot.queryParams['returnUrl'] ||\r\n            this.tenant.path + '/' + ROUTES.TENANT_PLANNER;\r\n        }\r\n      });\r\n      this.tenantService.load(this.tenantPath());\r\n    } else {\r\n      this.returnUrl = ROUTES.MY_TENANTS;\r\n    }\r\n    this.loginForm;\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.appService.setColor(null);\r\n    if (this.userSubscription) {\r\n      this.userSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  tenantPath(): string {\r\n    return this.route.snapshot.params.tenantPath;\r\n  }\r\n\r\n  onSubmit() {\r\n    // stop here if form is invalid\r\n    if (this.loginForm.invalid) {\r\n      return;\r\n    }\r\n    this.loading = true;\r\n    this.authenticationService\r\n      .login(\r\n        this.loginForm.get('username').value,\r\n        this.loginForm.get('password').value\r\n      )\r\n      .subscribe(\r\n        data => {\r\n          this.router.navigate(this.returnUrl.split('/'));\r\n        },\r\n        error => {\r\n          this.error = 'Nutzername oder Passwort ist falsch';\r\n          this.loading = false;\r\n        }\r\n      );\r\n  }\r\n}\r\n","<div class=\"row\">\r\n  <div class=\"col-12 col-md-8 offset-md-2 col-xl-4 offset-xl-4\">\r\n    <div class=\"card\">\r\n      <h4 class=\"card-header\">\r\n        {{ tenant ? tenant.name + ' - ' : '' }}Interner Bereich\r\n      </h4>\r\n      <div class=\"card-body\">\r\n        <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\">\r\n          <div class=\"form-group\">\r\n            <label for=\"username\">Email</label>\r\n            <input\r\n              type=\"text\"\r\n              formControlName=\"username\"\r\n              class=\"form-control\"\r\n              [ngClass]=\"{\r\n                'is-invalid': submitted && loginForm.get('username').errors\r\n              }\"\r\n              required\r\n            />\r\n            <div\r\n              *ngIf=\"submitted && loginForm.get('username').errors\"\r\n              class=\"invalid-feedback\"\r\n            >\r\n              <div *ngIf=\"loginForm.get('username').errors.required\">\r\n                Bitte Nutzername angeben\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"password\">Passwort</label>\r\n            <input\r\n              type=\"password\"\r\n              formControlName=\"password\"\r\n              class=\"form-control\"\r\n              [ngClass]=\"{\r\n                'is-invalid': submitted && loginForm.get('password').errors\r\n              }\"\r\n              required\r\n            />\r\n            <div\r\n              *ngIf=\"submitted && loginForm.get('password').errors\"\r\n              class=\"invalid-feedback\"\r\n            >\r\n              <div *ngIf=\"loginForm.get('password').errors.required\">\r\n                Bitte Passwort angeben\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"text-right\">\r\n            <button [disabled]=\"loading\" class=\"btn btn-success\">\r\n              <span\r\n                *ngIf=\"loading\"\r\n                class=\"spinner-border spinner-border-sm mr-1\"\r\n              ></span>\r\n              Login\r\n            </button>\r\n          </div>\r\n          <div>\r\n            > noch kein Nutzerprofil?\r\n            <a\r\n              [routerLink]=\"\r\n                tenantPath()\r\n                  ? [\r\n                      '/' + ROUTES.TENANT_PREFIX,\r\n                      tenantPath(),\r\n                      ROUTES.REGISTER_USER\r\n                    ]\r\n                  : ['/' + ROUTES.REGISTER_USER]\r\n              \"\r\n              >Hier registrieren</a\r\n            >\r\n          </div>\r\n          <div>\r\n            > Passwort vergessen?\r\n            <a [routerLink]=\"['/' + ROUTES.PASSWORD_FORGOTTEN]\"\r\n              >Hier zurücksetzen</a\r\n            >\r\n          </div>\r\n          <div *ngIf=\"error\" class=\"alert alert-danger mt-3 mb-0\">\r\n            {{ error }}\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","var map = {\n\t\"./af\": \"K/tc\",\n\t\"./af.js\": \"K/tc\",\n\t\"./ar\": \"jnO4\",\n\t\"./ar-dz\": \"o1bE\",\n\t\"./ar-dz.js\": \"o1bE\",\n\t\"./ar-kw\": \"Qj4J\",\n\t\"./ar-kw.js\": \"Qj4J\",\n\t\"./ar-ly\": \"HP3h\",\n\t\"./ar-ly.js\": \"HP3h\",\n\t\"./ar-ma\": \"CoRJ\",\n\t\"./ar-ma.js\": \"CoRJ\",\n\t\"./ar-sa\": \"gjCT\",\n\t\"./ar-sa.js\": \"gjCT\",\n\t\"./ar-tn\": \"bYM6\",\n\t\"./ar-tn.js\": \"bYM6\",\n\t\"./ar.js\": \"jnO4\",\n\t\"./az\": \"SFxW\",\n\t\"./az.js\": \"SFxW\",\n\t\"./be\": \"H8ED\",\n\t\"./be.js\": \"H8ED\",\n\t\"./bg\": \"hKrs\",\n\t\"./bg.js\": \"hKrs\",\n\t\"./bm\": \"p/rL\",\n\t\"./bm.js\": \"p/rL\",\n\t\"./bn\": \"kEOa\",\n\t\"./bn.js\": \"kEOa\",\n\t\"./bo\": \"0mo+\",\n\t\"./bo.js\": \"0mo+\",\n\t\"./br\": \"aIdf\",\n\t\"./br.js\": \"aIdf\",\n\t\"./bs\": \"JVSJ\",\n\t\"./bs.js\": \"JVSJ\",\n\t\"./ca\": \"1xZ4\",\n\t\"./ca.js\": \"1xZ4\",\n\t\"./cs\": \"PA2r\",\n\t\"./cs.js\": \"PA2r\",\n\t\"./cv\": \"A+xa\",\n\t\"./cv.js\": \"A+xa\",\n\t\"./cy\": \"l5ep\",\n\t\"./cy.js\": \"l5ep\",\n\t\"./da\": \"DxQv\",\n\t\"./da.js\": \"DxQv\",\n\t\"./de\": \"tGlX\",\n\t\"./de-at\": \"s+uk\",\n\t\"./de-at.js\": \"s+uk\",\n\t\"./de-ch\": \"u3GI\",\n\t\"./de-ch.js\": \"u3GI\",\n\t\"./de.js\": \"tGlX\",\n\t\"./dv\": \"WYrj\",\n\t\"./dv.js\": \"WYrj\",\n\t\"./el\": \"jUeY\",\n\t\"./el.js\": \"jUeY\",\n\t\"./en-au\": \"Dmvi\",\n\t\"./en-au.js\": \"Dmvi\",\n\t\"./en-ca\": \"OIYi\",\n\t\"./en-ca.js\": \"OIYi\",\n\t\"./en-gb\": \"Oaa7\",\n\t\"./en-gb.js\": \"Oaa7\",\n\t\"./en-ie\": \"4dOw\",\n\t\"./en-ie.js\": \"4dOw\",\n\t\"./en-il\": \"czMo\",\n\t\"./en-il.js\": \"czMo\",\n\t\"./en-in\": \"7C5Q\",\n\t\"./en-in.js\": \"7C5Q\",\n\t\"./en-nz\": \"b1Dy\",\n\t\"./en-nz.js\": \"b1Dy\",\n\t\"./en-sg\": \"t+mt\",\n\t\"./en-sg.js\": \"t+mt\",\n\t\"./eo\": \"Zduo\",\n\t\"./eo.js\": \"Zduo\",\n\t\"./es\": \"iYuL\",\n\t\"./es-do\": \"CjzT\",\n\t\"./es-do.js\": \"CjzT\",\n\t\"./es-us\": \"Vclq\",\n\t\"./es-us.js\": \"Vclq\",\n\t\"./es.js\": \"iYuL\",\n\t\"./et\": \"7BjC\",\n\t\"./et.js\": \"7BjC\",\n\t\"./eu\": \"D/JM\",\n\t\"./eu.js\": \"D/JM\",\n\t\"./fa\": \"jfSC\",\n\t\"./fa.js\": \"jfSC\",\n\t\"./fi\": \"gekB\",\n\t\"./fi.js\": \"gekB\",\n\t\"./fil\": \"1ppg\",\n\t\"./fil.js\": \"1ppg\",\n\t\"./fo\": \"ByF4\",\n\t\"./fo.js\": \"ByF4\",\n\t\"./fr\": \"nyYc\",\n\t\"./fr-ca\": \"2fjn\",\n\t\"./fr-ca.js\": \"2fjn\",\n\t\"./fr-ch\": \"Dkky\",\n\t\"./fr-ch.js\": \"Dkky\",\n\t\"./fr.js\": \"nyYc\",\n\t\"./fy\": \"cRix\",\n\t\"./fy.js\": \"cRix\",\n\t\"./ga\": \"USCx\",\n\t\"./ga.js\": \"USCx\",\n\t\"./gd\": \"9rRi\",\n\t\"./gd.js\": \"9rRi\",\n\t\"./gl\": \"iEDd\",\n\t\"./gl.js\": \"iEDd\",\n\t\"./gom-deva\": \"qvJo\",\n\t\"./gom-deva.js\": \"qvJo\",\n\t\"./gom-latn\": \"DKr+\",\n\t\"./gom-latn.js\": \"DKr+\",\n\t\"./gu\": \"4MV3\",\n\t\"./gu.js\": \"4MV3\",\n\t\"./he\": \"x6pH\",\n\t\"./he.js\": \"x6pH\",\n\t\"./hi\": \"3E1r\",\n\t\"./hi.js\": \"3E1r\",\n\t\"./hr\": \"S6ln\",\n\t\"./hr.js\": \"S6ln\",\n\t\"./hu\": \"WxRl\",\n\t\"./hu.js\": \"WxRl\",\n\t\"./hy-am\": \"1rYy\",\n\t\"./hy-am.js\": \"1rYy\",\n\t\"./id\": \"UDhR\",\n\t\"./id.js\": \"UDhR\",\n\t\"./is\": \"BVg3\",\n\t\"./is.js\": \"BVg3\",\n\t\"./it\": \"bpih\",\n\t\"./it-ch\": \"bxKX\",\n\t\"./it-ch.js\": \"bxKX\",\n\t\"./it.js\": \"bpih\",\n\t\"./ja\": \"B55N\",\n\t\"./ja.js\": \"B55N\",\n\t\"./jv\": \"tUCv\",\n\t\"./jv.js\": \"tUCv\",\n\t\"./ka\": \"IBtZ\",\n\t\"./ka.js\": \"IBtZ\",\n\t\"./kk\": \"bXm7\",\n\t\"./kk.js\": \"bXm7\",\n\t\"./km\": \"6B0Y\",\n\t\"./km.js\": \"6B0Y\",\n\t\"./kn\": \"PpIw\",\n\t\"./kn.js\": \"PpIw\",\n\t\"./ko\": \"Ivi+\",\n\t\"./ko.js\": \"Ivi+\",\n\t\"./ku\": \"JCF/\",\n\t\"./ku.js\": \"JCF/\",\n\t\"./ky\": \"lgnt\",\n\t\"./ky.js\": \"lgnt\",\n\t\"./lb\": \"RAwQ\",\n\t\"./lb.js\": \"RAwQ\",\n\t\"./lo\": \"sp3z\",\n\t\"./lo.js\": \"sp3z\",\n\t\"./lt\": \"JvlW\",\n\t\"./lt.js\": \"JvlW\",\n\t\"./lv\": \"uXwI\",\n\t\"./lv.js\": \"uXwI\",\n\t\"./me\": \"KTz0\",\n\t\"./me.js\": \"KTz0\",\n\t\"./mi\": \"aIsn\",\n\t\"./mi.js\": \"aIsn\",\n\t\"./mk\": \"aQkU\",\n\t\"./mk.js\": \"aQkU\",\n\t\"./ml\": \"AvvY\",\n\t\"./ml.js\": \"AvvY\",\n\t\"./mn\": \"lYtQ\",\n\t\"./mn.js\": \"lYtQ\",\n\t\"./mr\": \"Ob0Z\",\n\t\"./mr.js\": \"Ob0Z\",\n\t\"./ms\": \"6+QB\",\n\t\"./ms-my\": \"ZAMP\",\n\t\"./ms-my.js\": \"ZAMP\",\n\t\"./ms.js\": \"6+QB\",\n\t\"./mt\": \"G0Uy\",\n\t\"./mt.js\": \"G0Uy\",\n\t\"./my\": \"honF\",\n\t\"./my.js\": \"honF\",\n\t\"./nb\": \"bOMt\",\n\t\"./nb.js\": \"bOMt\",\n\t\"./ne\": \"OjkT\",\n\t\"./ne.js\": \"OjkT\",\n\t\"./nl\": \"+s0g\",\n\t\"./nl-be\": \"2ykv\",\n\t\"./nl-be.js\": \"2ykv\",\n\t\"./nl.js\": \"+s0g\",\n\t\"./nn\": \"uEye\",\n\t\"./nn.js\": \"uEye\",\n\t\"./oc-lnc\": \"Fnuy\",\n\t\"./oc-lnc.js\": \"Fnuy\",\n\t\"./pa-in\": \"8/+R\",\n\t\"./pa-in.js\": \"8/+R\",\n\t\"./pl\": \"jVdC\",\n\t\"./pl.js\": \"jVdC\",\n\t\"./pt\": \"8mBD\",\n\t\"./pt-br\": \"0tRk\",\n\t\"./pt-br.js\": \"0tRk\",\n\t\"./pt.js\": \"8mBD\",\n\t\"./ro\": \"lyxo\",\n\t\"./ro.js\": \"lyxo\",\n\t\"./ru\": \"lXzo\",\n\t\"./ru.js\": \"lXzo\",\n\t\"./sd\": \"Z4QM\",\n\t\"./sd.js\": \"Z4QM\",\n\t\"./se\": \"//9w\",\n\t\"./se.js\": \"//9w\",\n\t\"./si\": \"7aV9\",\n\t\"./si.js\": \"7aV9\",\n\t\"./sk\": \"e+ae\",\n\t\"./sk.js\": \"e+ae\",\n\t\"./sl\": \"gVVK\",\n\t\"./sl.js\": \"gVVK\",\n\t\"./sq\": \"yPMs\",\n\t\"./sq.js\": \"yPMs\",\n\t\"./sr\": \"zx6S\",\n\t\"./sr-cyrl\": \"E+lV\",\n\t\"./sr-cyrl.js\": \"E+lV\",\n\t\"./sr.js\": \"zx6S\",\n\t\"./ss\": \"Ur1D\",\n\t\"./ss.js\": \"Ur1D\",\n\t\"./sv\": \"X709\",\n\t\"./sv.js\": \"X709\",\n\t\"./sw\": \"dNwA\",\n\t\"./sw.js\": \"dNwA\",\n\t\"./ta\": \"PeUW\",\n\t\"./ta.js\": \"PeUW\",\n\t\"./te\": \"XLvN\",\n\t\"./te.js\": \"XLvN\",\n\t\"./tet\": \"V2x9\",\n\t\"./tet.js\": \"V2x9\",\n\t\"./tg\": \"Oxv6\",\n\t\"./tg.js\": \"Oxv6\",\n\t\"./th\": \"EOgW\",\n\t\"./th.js\": \"EOgW\",\n\t\"./tk\": \"Wv91\",\n\t\"./tk.js\": \"Wv91\",\n\t\"./tl-ph\": \"Dzi0\",\n\t\"./tl-ph.js\": \"Dzi0\",\n\t\"./tlh\": \"z3Vd\",\n\t\"./tlh.js\": \"z3Vd\",\n\t\"./tr\": \"DoHr\",\n\t\"./tr.js\": \"DoHr\",\n\t\"./tzl\": \"z1FC\",\n\t\"./tzl.js\": \"z1FC\",\n\t\"./tzm\": \"wQk9\",\n\t\"./tzm-latn\": \"tT3J\",\n\t\"./tzm-latn.js\": \"tT3J\",\n\t\"./tzm.js\": \"wQk9\",\n\t\"./ug-cn\": \"YRex\",\n\t\"./ug-cn.js\": \"YRex\",\n\t\"./uk\": \"raLr\",\n\t\"./uk.js\": \"raLr\",\n\t\"./ur\": \"UpQW\",\n\t\"./ur.js\": \"UpQW\",\n\t\"./uz\": \"Loxo\",\n\t\"./uz-latn\": \"AQ68\",\n\t\"./uz-latn.js\": \"AQ68\",\n\t\"./uz.js\": \"Loxo\",\n\t\"./vi\": \"KSF8\",\n\t\"./vi.js\": \"KSF8\",\n\t\"./x-pseudo\": \"/X5v\",\n\t\"./x-pseudo.js\": \"/X5v\",\n\t\"./yo\": \"fzPg\",\n\t\"./yo.js\": \"fzPg\",\n\t\"./zh-cn\": \"XDpg\",\n\t\"./zh-cn.js\": \"XDpg\",\n\t\"./zh-hk\": \"SatO\",\n\t\"./zh-hk.js\": \"SatO\",\n\t\"./zh-mo\": \"OmwH\",\n\t\"./zh-mo.js\": \"OmwH\",\n\t\"./zh-tw\": \"kOpN\",\n\t\"./zh-tw.js\": \"kOpN\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"RnhZ\";","import { Injectable } from '@angular/core';\r\nimport {\r\n  Router,\r\n  ActivatedRouteSnapshot,\r\n  RouterStateSnapshot,\r\n  CanActivate,\r\n} from '@angular/router';\r\nimport { TenantRelation } from '../models/tenant-relation';\r\nimport { AppService } from '../services/app.service';\r\nimport { find } from 'lodash';\r\nimport { of } from 'rxjs';\r\nimport { TenantService } from '../services/tenant.service';\r\nimport { map } from 'rxjs/operators';\r\nimport { ROLE } from '../../../../common/tenant-relation';\r\nimport { ROUTES } from '../../../../common/frontend.routes';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class TenantGuard implements CanActivate {\r\n  constructor(\r\n    private router: Router,\r\n    private appService: AppService,\r\n    private tenantService: TenantService\r\n  ) {}\r\n  path: ActivatedRouteSnapshot[];\r\n  route: ActivatedRouteSnapshot;\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\r\n    if (this.appService.getCurrentTenantRelations()) {\r\n      const isAllowed = this.hasAccess(\r\n        this.appService.getCurrentTenantRelations(),\r\n        route\r\n      );\r\n      //console.log('Guard said: ' + (isAllowed ? 'allowed' : 'rejected'));\r\n      return of(isAllowed);\r\n    } else {\r\n      return this.tenantService.getAll().pipe(\r\n        map(tenantRelations => {\r\n          const isAllowed = this.hasAccess(tenantRelations, route);\r\n          //console.log('Guard said: ' + (isAllowed ? 'allowed' : 'rejected'));\r\n          return isAllowed;\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  private hasAccess(\r\n    tenantRelations: TenantRelation[],\r\n    route: ActivatedRouteSnapshot\r\n  ): boolean {\r\n    const tenantPath = route.params.tenantPath;\r\n    const relation = find(tenantRelations, (tenantRelation: TenantRelation) => {\r\n      return tenantRelation.active && tenantRelation.tenant.path === tenantPath;\r\n    });\r\n    if (relation) {\r\n      const requiredRole = route.data.role as ROLE;\r\n      if (requiredRole) {\r\n        return relation.hasRole(requiredRole);\r\n      }\r\n      // no specific role required\r\n      return true;\r\n    }\r\n    // not an internal member of the tenant - redirect user to the public events screen\r\n    this.router.navigate([route.params.tenantPath, ROUTES.TENANT_EVENTS]);\r\n    return false;\r\n  }\r\n}\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { AuthenticationService } from './services/authentication.service';\r\nimport * as moment from 'moment';\r\nimport { TenantService } from './services/tenant.service';\r\nimport { Tenant } from './models/tenant';\r\nimport { User } from './models/user';\r\nimport { TenantRelation } from './models/tenant-relation';\r\nimport { AppService } from './services/app.service';\r\nimport { ROLE } from '../../../common/tenant-relation';\r\nimport { ROUTES } from '../../../common/frontend.routes';\r\nimport { NgcCookieConsentService } from 'ngx-cookieconsent';\r\nimport { UserService } from './services/user.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n})\r\nexport class AppComponent implements OnInit {\r\n  serverResult: '';\r\n  receivedEmail: '';\r\n  tenant: Tenant = null;\r\n  username: string = null;\r\n  tenantRelations: TenantRelation[];\r\n  ROUTES = ROUTES;\r\n\r\n  constructor(\r\n    private authenticationService: AuthenticationService,\r\n    private tenantService: TenantService,\r\n    private appService: AppService,\r\n    // LEAVE THE NEXT LINE IN THE FILE!!! :-)\r\n    private ccService: NgcCookieConsentService,\r\n    // LEAVE THE ABOVE LINE IN THE FILE!!! :-)\r\n    private userService: UserService\r\n  ) {\r\n    moment.locale('de');\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.appService.tenant.subscribe((tenant: Tenant) => {\r\n      if (tenant) {\r\n        this.tenant = tenant;\r\n      }\r\n    });\r\n    this.appService.user.subscribe((user: User) => {\r\n      if (user) {\r\n        this.username = user.name;\r\n        // if there is a user, load all related tenants for this user\r\n        this.loadTenantRelations();\r\n        // also, load the events that the user has access to\r\n        this.userService.loadEventsWithAccessTo().subscribe(relations => {\r\n          user.eventRelations = relations;\r\n        });\r\n      } else {\r\n        this.username = null;\r\n      }\r\n    });\r\n    this.appService.tenantRelations.subscribe(tenantRelations => {\r\n      this.tenantRelations = tenantRelations;\r\n    });\r\n  }\r\n\r\n  private loadTenantRelations(): void {\r\n    this.tenantService\r\n      .getAll()\r\n      .subscribe((tenantRelations: TenantRelation[]) => {\r\n        if (\r\n          tenantRelations.length === 1 &&\r\n          tenantRelations[0].active &&\r\n          (!this.tenant ||\r\n            (this.tenant &&\r\n              this.tenant.path !== tenantRelations[0].tenant.path))\r\n        ) {\r\n          this.tenantService.load(tenantRelations[0].tenant.path);\r\n        }\r\n      });\r\n  }\r\n\r\n  isOwnerOfCurrentTenant(): boolean {\r\n    return this.hasRole(ROLE.OWNER);\r\n  }\r\n\r\n  isAdminOfCurrentTenant(): boolean {\r\n    return this.hasRole(ROLE.ADMIN);\r\n  }\r\n\r\n  isMemberOfCurrentTenant(): boolean {\r\n    return this.hasRole(ROLE.MEMBER);\r\n  }\r\n\r\n  private hasRole(role: ROLE): boolean {\r\n    if (this.appService.getCurrentTenant() && this.tenantRelations) {\r\n      const relation = this.tenantRelations.find(\r\n        tr => tr.tenantId === this.appService.getCurrentTenant().id && tr.active\r\n      );\r\n      if (relation) {\r\n        if (role === ROLE.OWNER) return relation.isOwner();\r\n        if (role === ROLE.ADMIN) return relation.isAdmin();\r\n        if (role === ROLE.MEMBER) return relation.isMember();\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  isLoggedIn(): boolean {\r\n    return this.appService.getCurrentUser() !== null;\r\n  }\r\n\r\n  logout(): void {\r\n    this.authenticationService.logout();\r\n  }\r\n}\r\n","<nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\r\n  <a\r\n    class=\"nav-link nav-logo\"\r\n    *ngIf=\"tenant\"\r\n    [routerLink]=\"[ROUTES.TENANT_PREFIX, tenant.path, ROUTES.TENANT_EVENTS]\"\r\n  >\r\n    <img *ngIf=\"tenant.logo\" [src]=\"tenant.logo\" />\r\n    <img\r\n      *ngIf=\"!tenant.logo\"\r\n      src=\"assets/logo.png\"\r\n      style=\"margin-left: 30px; padding: 5px\"\r\n    />\r\n  </a>\r\n  <a\r\n    class=\"nav-link nav-logo\"\r\n    *ngIf=\"!tenant\"\r\n    [routerLink]=\"['/' + ROUTES.HOME]\"\r\n  >\r\n    <img src=\"assets/logo.png\" style=\"margin-left: 30px; padding: 5px\" />\r\n  </a>\r\n  <!--<div *ngIf=\"!isLoggedIn() || !tenant\" style=\"flex: 100000000 1 auto\"></div>-->\r\n  <button\r\n    class=\"navbar-toggler\"\r\n    type=\"button\"\r\n    data-toggle=\"collapse\"\r\n    data-target=\"#navbarSupportedContent\"\r\n    aria-controls=\"navbarSupportedContent\"\r\n    aria-expanded=\"false\"\r\n    aria-label=\"Toggle navigation\"\r\n  >\r\n    <span class=\"navbar-toggler-icon\"></span>\r\n  </button>\r\n\r\n  <div id=\"navbarSupportedContent\" class=\"collapse navbar-collapse\">\r\n    <ul\r\n      class=\"navbar-nav mr-auto\"\r\n      [ngClass]=\"{ 'mr-auto': isLoggedIn(), 'ml-auto': !isLoggedIn() }\"\r\n    >\r\n      <li class=\"nav-item\">\r\n        <a\r\n          class=\"nav-link\"\r\n          [routerLink]=\"[ROUTES.HOME]\"\r\n          routerLinkActive=\"active\"\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#navbarSupportedContent\"\r\n          >Home</a\r\n        >\r\n      </li>\r\n      <li class=\"nav-item\" *ngIf=\"tenant\">\r\n        <a\r\n          class=\"nav-link\"\r\n          [routerLink]=\"[\r\n            ROUTES.TENANT_PREFIX,\r\n            tenant.path,\r\n            ROUTES.TENANT_EVENTS\r\n          ]\"\r\n          routerLinkActive=\"active\"\r\n          [routerLinkActiveOptions]=\"{\r\n            __change_detection_hack__: [tenant.path]\r\n          }\"\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#navbarSupportedContent\"\r\n          >Events</a\r\n        >\r\n      </li>\r\n      <li class=\"nav-item\" *ngIf=\"isMemberOfCurrentTenant()\">\r\n        <a\r\n          class=\"nav-link\"\r\n          [routerLink]=\"[\r\n            ROUTES.TENANT_PREFIX,\r\n            tenant.path,\r\n            ROUTES.TENANT_PLANNER\r\n          ]\"\r\n          routerLinkActive=\"active\"\r\n          [routerLinkActiveOptions]=\"{\r\n            __change_detection_hack__: [tenant.path]\r\n          }\"\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#navbarSupportedContent\"\r\n          >Event-Planner</a\r\n        >\r\n      </li>\r\n      <li class=\"nav-item\" *ngIf=\"isAdminOfCurrentTenant()\">\r\n        <a\r\n          class=\"nav-link\"\r\n          [routerLink]=\"[\r\n            ROUTES.TENANT_PREFIX,\r\n            tenant.path,\r\n            ROUTES.TENANT_MANAGEMENT\r\n          ]\"\r\n          routerLinkActive=\"active\"\r\n          [routerLinkActiveOptions]=\"{\r\n            __change_detection_hack__: [tenant.path]\r\n          }\"\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#navbarSupportedContent\"\r\n          >Verwaltung</a\r\n        >\r\n      </li>\r\n      <li class=\"nav-item\" *ngIf=\"isLoggedIn()\">\r\n        <a\r\n          class=\"nav-link\"\r\n          [routerLink]=\"[ROUTES.MY_TENANTS]\"\r\n          routerLinkActive=\"active\"\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#navbarSupportedContent\"\r\n          >Meine Organisationen</a\r\n        >\r\n      </li>\r\n      <li class=\"nav-item\" *ngIf=\"isLoggedIn()\">\r\n        <a\r\n          class=\"nav-link\"\r\n          [routerLink]=\"[ROUTES.PROFILE]\"\r\n          routerLinkActive=\"active\"\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#navbarSupportedContent\"\r\n          >Mein Profil</a\r\n        >\r\n      </li>\r\n      <li class=\"nav-item\" *ngIf=\"!isLoggedIn()\">\r\n        <a\r\n          class=\"nav-link\"\r\n          [routerLink]=\"\r\n            tenant\r\n              ? [ROUTES.TENANT_PREFIX, tenant.path, ROUTES.LOGIN]\r\n              : [ROUTES.LOGIN]\r\n          \"\r\n          routerLinkActive=\"active\"\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#navbarSupportedContent\"\r\n          >Login</a\r\n        >\r\n      </li>\r\n    </ul>\r\n    <div *ngIf=\"isLoggedIn()\">\r\n      angemeldet als:&nbsp;<u\r\n        class=\"clickable\"\r\n        [routerLink]=\"[ROUTES.PROFILE]\"\r\n        >{{ username }}</u\r\n      >\r\n      <button\r\n        id=\"logout-button\"\r\n        class=\"btn btn-outline-danger my-2 my-sm-0 ml-3\"\r\n        (click)=\"logout()\"\r\n      >\r\n        Logout\r\n      </button>\r\n    </div>\r\n  </div>\r\n</nav>\r\n<div class=\"container-fluid\">\r\n  <div class=\"row\" style=\"margin-top: 30px\">\r\n    <div class=\"col-12 col-xl-10 offset-xl-1\">\r\n      <router-outlet></router-outlet>\r\n    </div>\r\n  </div>\r\n  <app-notification style=\"z-index: 10000\"></app-notification>\r\n</div>\r\n\r\n<footer>\r\n  <div class=\"credits\">\r\n    <a [routerLink]=\"[ROUTES.IMPRINT]\">Impressum</a>\r\n  </div>\r\n  <div class=\"credits\">\r\n    <small>zur Verfügung gestellt von</small>&nbsp;<br />\r\n    <a href=\"https://s4-consulting.de\"\r\n      >Stefan Strobel Software & Service Consulting</a\r\n    >\r\n  </div>\r\n</footer>\r\n","import { Injectable } from '@angular/core';\r\nimport { Adapter } from '../helpers/adapter';\r\nimport { SubscriptionI } from '../../../../common/subscription';\r\nimport { TenantI } from '../../../../common/tenant';\r\n\r\nexport class Subscription implements SubscriptionI {\r\n  id?: string;\r\n  tenant?: TenantI;\r\n  tenantId: string;\r\n  pricePerMonth?: number;\r\n  paid: Date = null;\r\n  createdAt?: Date;\r\n\r\n  constructor(item?: any) {\r\n    if (item) {\r\n      this.id = item.id;\r\n      this.tenantId = item.tenantId;\r\n      this.tenant = item.tenant;\r\n      this.paid = item.paid;\r\n      this.pricePerMonth = item.pricePerMonth;\r\n      this.createdAt = item.createdAt;\r\n    }\r\n  }\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class SubscriptionAdapter implements Adapter<Subscription> {\r\n  adapt(item: any): Subscription {\r\n    return new Subscription(item);\r\n  }\r\n}\r\n","import { EventRelationI } from '../../../../common/event-relation';\r\nimport { Injectable } from '@angular/core';\r\nimport { Adapter } from '../helpers/adapter';\r\nimport { User } from './user';\r\nimport { Event } from './event';\r\nimport { EventSeriesI } from '../../../../common/event-series';\r\n\r\nexport class EventRelation implements EventRelationI {\r\n  id: string;\r\n  user?: User;\r\n  userId: string;\r\n  event?: Event;\r\n  eventId: string;\r\n  eventSeries?: EventSeriesI;\r\n  eventSeriesId: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class EventRelationAdapter implements Adapter<EventRelation> {\r\n  adapt(item: any): EventRelation {\r\n    const relation = new EventRelation();\r\n    relation.id = item.id;\r\n    relation.userId = item.userId;\r\n    relation.eventId = item.eventId;\r\n    relation.eventSeriesId = item.eventSeriesId;\r\n    return relation;\r\n  }\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { Tenant } from 'src/app/models/tenant';\r\nimport { SubscriptionService } from 'src/app/services/subscription.service';\r\nimport { Subscription } from 'src/app/models/subscription';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport * as moment from 'moment';\r\nimport { environment } from 'src/environments/environment';\r\ndeclare var Stripe: any;\r\n\r\n@Component({\r\n  selector: 'subscription',\r\n  templateUrl: './subscription.component.html',\r\n  styleUrls: ['./subscription.component.scss'],\r\n})\r\nexport class SubscriptionComponent implements OnInit {\r\n  @Input()\r\n  tenant: Tenant;\r\n  subscriptions: Subscription[] = null;\r\n  subscriptionForm: FormGroup = new FormGroup({\r\n    months: new FormControl(1, Validators.required),\r\n  });\r\n  linkToCustomerPortal: string = null;\r\n\r\n  constructor(private subscriptionService: SubscriptionService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.subscriptionService\r\n      .getLinkToStripCustomerPortal(this.tenant.id)\r\n      .subscribe(responseWithLink => {\r\n        this.linkToCustomerPortal = responseWithLink.link;\r\n      });\r\n  }\r\n\r\n  initializeSubscription(): void {\r\n    this.subscriptionService\r\n      .initializePayment({\r\n        tenantId: this.tenant.id,\r\n        paid: null,\r\n      })\r\n      .subscribe(\r\n        (responseWithStripeSessionID: any) => {\r\n          // we received a link to the PSP. open a new browser window / tab\r\n          const stripe = Stripe(environment.stripePubKey);\r\n          stripe\r\n            .redirectToCheckout({\r\n              sessionId: responseWithStripeSessionID.stripeSessionID,\r\n            })\r\n            .then(() => {\r\n              console.log('success for stripe callback! :-)');\r\n            });\r\n        },\r\n        error => {\r\n          console.error(error);\r\n        }\r\n      );\r\n  }\r\n\r\n  moreMonths(): string {\r\n    const months = parseInt(this.subscriptionForm.get('months').value);\r\n    return (\r\n      (months === 1 ? 'weiteren ' : 'weitere ') +\r\n      (months === 1 ? 'Monat' : 'Monate') +\r\n      ' kaufen.'\r\n    );\r\n  }\r\n\r\n  subscriptionEndsSoon(): boolean {\r\n    return (\r\n      this.tenant.subscriptionUntil &&\r\n      moment(this.tenant.subscriptionUntil).diff(moment(), 'days') <= 7\r\n    );\r\n  }\r\n}\r\n","<h4>Lizenz</h4>\r\n<div\r\n  class=\"alert alert-secondary d-flex\"\r\n  *ngIf=\"tenant.active\"\r\n  style=\"background-color: whitesmoke\"\r\n>\r\n  <div style=\"width: 50px\">\r\n    <i class=\"fas fa-check text-success\"></i>\r\n  </div>\r\n  <div class=\"flex-grow-1\">\r\n    <div>\r\n      Die Organisation hat<span *ngIf=\"tenant.subscriptionUntil\">\r\n        noch bis zum\r\n        <b>{{ tenant.subscriptionUntil | date: 'dd.MM.yyyy' }}</b></span\r\n      >\r\n      eine gültige Lizenz.\r\n    </div>\r\n    <a\r\n      *ngIf=\"linkToCustomerPortal && tenant.subscriptionUntil\"\r\n      [href]=\"linkToCustomerPortal\"\r\n      target=\"_blank\"\r\n    >\r\n      Alte Rechnungen einsehen\r\n    </a>\r\n    <a\r\n      *ngIf=\"linkToCustomerPortal && !tenant.subscriptionUntil\"\r\n      class=\"btn btn-sm btn-outline-success float-right\"\r\n      [href]=\"linkToCustomerPortal\"\r\n      target=\"_blank\"\r\n    >\r\n      Zahlungen und Rechnungen verwalten\r\n    </a>\r\n    <button\r\n      *ngIf=\"tenant.subscriptionUntil\"\r\n      class=\"btn btn-sm btn-outline-success float-right\"\r\n      (click)=\"initializeSubscription()\"\r\n    >\r\n      Neue Lizenz erwerben\r\n    </button>\r\n  </div>\r\n</div>\r\n<div\r\n  class=\"alert alert-secondary d-flex\"\r\n  *ngIf=\"!tenant.active\"\r\n  style=\"background-color: whitesmoke\"\r\n>\r\n  <div style=\"width: 50px\">\r\n    <i class=\"fas fa-exclamation-triangle text-danger\"></i>\r\n  </div>\r\n  <div class=\"flex-grow-1\">\r\n    <div>\r\n      Diese Organisation ist gerade nicht freigeschaltet und kann daher nicht\r\n      genutzt werden. Bitte eine Lizenz kaufen, damit Events öffentlich\r\n      angezeigt werden.\r\n    </div>\r\n    <a\r\n      *ngIf=\"linkToCustomerPortal\"\r\n      [href]=\"linkToCustomerPortal\"\r\n      target=\"_blank\"\r\n    >\r\n      Alte Rechnungen einsehen\r\n    </a>\r\n    <button\r\n      class=\"btn btn-sm btn-outline-success float-right\"\r\n      (click)=\"initializeSubscription()\"\r\n    >\r\n      Jetzt Lizenz erwerben\r\n    </button>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-legal',\r\n  templateUrl: './legal.component.html',\r\n  styleUrls: ['./legal.component.scss']\r\n})\r\nexport class LegalComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<h1 id=\"agb\">Allgemeine Geschäftsbedingungen (AGB)</h1>\r\n<h2>\r\n  Zustandekommen einer Vereinbarung über die Nutzung der Eventplanungssoftware\r\n  \"plevents\"\r\n</h2>\r\n<p>\r\n  Durch Anklicken des Feldes \"Registrieren kommt eine Vereinbarung über die\r\n  Nutzung der Eventplanungssoftware plevents.de (nachfolgend \"plevents\" genannt)\r\n  zwischen der Stefan Strobel Software & Service Consulting (nachfolgend\r\n  \"Betreiber\" genannt) als Lizenzgeber und dem Nutzer der Eventplanungssoftware\r\n  (nachfolgend \"Nutzer\" genannt) als Lizenznehmer zu den nachfolgenden\r\n  Bedingungen zustande.\r\n</p>\r\n<p>\r\n  Der Betreiber schließt diese Vereinbarung über die Nutzung der\r\n  Eventplanungssoftware nicht mit Verbrauchern im Sinne des § 13 BGB ab.\r\n</p>\r\n\r\n<h2>Vertragsgegenstand und Lizenzumfang</h2>\r\n<p>\r\n  Vertragsgegenstand ist die Einräumung eines Nutzungsrechts des Nutzers durch\r\n  den Betreiber an der Eventplanungssoftware.\r\n</p>\r\n<p>\r\n  Die Beschreibung der Eventplanungssoftware ergibt sich aus der Beschreibung\r\n  auf der Internetseite https://plevents.de/home.\r\n</p>\r\n<p>\r\n  Der Betreiber räumt dem Nutzer ein jederzeit widerrufliches, einfaches, nicht\r\n  übertragbares Recht ein, die Eventplanungssoftware im Rahmen des\r\n  bestimmungsgemäßen Gebrauchs in der jeweils aktuellen Version zu nutzen. Der\r\n  Betreiber stellt hierfür einen Aufruf über https://plevents.de zur Verfügung.\r\n</p>\r\n\r\n<h2>Störfälle</h2>\r\n<p>\r\n  Für eventuelle Störfälle steht dem Nutzer die Möglichkeit zur Verfügung, unter\r\n  der E-Mail-Adresse stefan.strobel@s4-consulting.de die Störung zu melden.\r\n</p>\r\n\r\n<h2>Vergütung</h2>\r\n<p>\r\n  Eine Vergütung schuldet der Nutzer dem Betreiber für die Verwendung der\r\n  Eventplanungssoftware im Rahmen des zeitlich nicht limiterten Testzugangs\r\n  zunächst nicht.\r\n</p>\r\n<p>\r\n  Sobald der Nutzer die Plattform für eine öffentlich nutzbare\r\n  Teilnehmerregistrierung verwenden möchte, muss er hierfür eine Lizenzgebühr\r\n  zahlen. Die Höhe richtet sich nach den zu diesem Zeitpunkt geltenden Gebühren.\r\n  Der Bezahlvorgang erfolgt als angemeldeter Nutzer über einen angebundenen\r\n  Zahlungsdienstleister. Die Vergütung fällt monatlich an und kann jederzeit\r\n  fristlos bis zum Ende eines Laufzeitmonats gekündigt werden. Etwaig bereits\r\n  gezahlte Beträge sind nicht erstattbar. Diese entgeltbasierte Lizenz muss\r\n  aktiv in der Anwendung aktiviert werden.\r\n</p>\r\n\r\n<h2>Vertragsdauer und Kündigung</h2>\r\n<p>\r\n  Diese Vereinbarung beginnt am Datum des Vertragsabschlusses und wird auf\r\n  unbestimmte Zeit geschlossen. Die Vertragsparteien können diese\r\n  Nutzungsvereinbarung jederzeit ordentlich fristlos kündigen. Das Recht zur\r\n  Kündigung aus wichtigem Grund bleibt überdies unberührt. Mit Wirksamwerden der\r\n  Kündigung erlöschen die Nutzungsrechte des Nutzers.\r\n</p>\r\n<p>\r\n  Sobald ein Nutzer das Vertragsverhältnis ordentlich kündigt, erlischt jede\r\n  weitere Nutzbarkeit.\r\n</p>\r\n\r\n<h2>Geheimhaltung und Datenschutz</h2>\r\n<p>Es gelten die Regelungen unter „Datenschutzhinweise“.</p>\r\n\r\n<h2>Beauftragung Dritter</h2>\r\n<p>\r\n  Der Betreiber ist berechtigt, Leistungen ganz oder teilweise durch von ihr\r\n  beauftragte Dritte ausführen zu lassen. Hierüber wird der Betreiber über\r\n  geeignete Wege informieren.\r\n</p>\r\n\r\n<h2>Übertragung auf Dritte</h2>\r\n<p>\r\n  Der Betreiber kann die Gesamtheit der Rechte und Pflichten aus dieser\r\n  Vereinbarung einem Dritten übertragen. Der Betreiber wird den Kunden über die\r\n  Übertragung informieren.\r\n</p>\r\n\r\n<h2>Allgemeine Bestimmungen</h2>\r\n<ol>\r\n  <li>\r\n    Sollte eine Bestimmung dieser Vereinbarung ganz oder teilweise unwirksam\r\n    sein oder werden oder sollte sich in dieser Vereinbarung eine Lücke\r\n    herausstellen, so wird die Wirksamkeit der übrigen Bestimmungen nicht\r\n    berührt. Die Vertragsparteien verpflichten sich, die unwirksame Bestimmung\r\n    gemäß den gesetzlichen Vorschriften zu ersetzen oder zu ergänzen.\r\n  </li>\r\n  <li>\r\n    Diese Vereinbarung unterliegt dem Recht der Bundesrepublik Deutschland.\r\n  </li>\r\n  <li>Gerichtsstand ist Stuttgart.</li>\r\n</ol>\r\n\r\n<h1 id=\"datenschutz\" class=\"mt-5\">Datenschutz&shy;erkl&auml;rung</h1>\r\n<h2>1. Datenschutz auf einen Blick</h2>\r\n<h3>Allgemeine Hinweise</h3>\r\n<p>\r\n  Die folgenden Hinweise geben einen einfachen &Uuml;berblick dar&uuml;ber, was\r\n  mit Ihren personenbezogenen Daten passiert, wenn Sie diese Website besuchen.\r\n  Personenbezogene Daten sind alle Daten, mit denen Sie pers&ouml;nlich\r\n  identifiziert werden k&ouml;nnen. Ausf&uuml;hrliche Informationen zum Thema\r\n  Datenschutz entnehmen Sie unserer unter diesem Text aufgef&uuml;hrten\r\n  Datenschutzerkl&auml;rung.\r\n</p>\r\n<h3>Datenerfassung auf dieser Website</h3>\r\n<h4>Wer ist verantwortlich f&uuml;r die Datenerfassung auf dieser Website?</h4>\r\n<p>\r\n  Die Datenverarbeitung auf dieser Website erfolgt durch den Websitebetreiber.\r\n  Dessen Kontaktdaten k&ouml;nnen Sie dem Impressum dieser Website entnehmen.\r\n</p>\r\n<h4>Wie erfassen wir Ihre Daten?</h4>\r\n<p>\r\n  Ihre Daten werden zum einen dadurch erhoben, dass Sie uns diese mitteilen.\r\n  Hierbei kann es sich z.&nbsp;B. um Daten handeln, die Sie in ein\r\n  Kontaktformular eingeben.\r\n</p>\r\n<p>\r\n  Andere Daten werden automatisch oder nach Ihrer Einwilligung beim Besuch der\r\n  Website durch unsere IT-Systeme erfasst. Das sind vor allem technische Daten\r\n  (z.&nbsp;B. Internetbrowser, Betriebssystem oder Uhrzeit des Seitenaufrufs).\r\n  Die Erfassung dieser Daten erfolgt automatisch, sobald Sie diese Website\r\n  betreten.\r\n</p>\r\n<h4>Wof&uuml;r nutzen wir Ihre Daten?</h4>\r\n<p>\r\n  Ein Teil der Daten wird erhoben, um eine fehlerfreie Bereitstellung der\r\n  Website zu gew&auml;hrleisten. Andere Daten k&ouml;nnen zur Analyse Ihres\r\n  Nutzerverhaltens verwendet werden.\r\n</p>\r\n<h4>Welche Rechte haben Sie bez&uuml;glich Ihrer Daten?</h4>\r\n<p>\r\n  Sie haben jederzeit das Recht, unentgeltlich Auskunft &uuml;ber Herkunft,\r\n  Empf&auml;nger und Zweck Ihrer gespeicherten personenbezogenen Daten zu\r\n  erhalten. Sie haben au&szlig;erdem ein Recht, die Berichtigung oder\r\n  L&ouml;schung dieser Daten zu verlangen. Wenn Sie eine Einwilligung zur\r\n  Datenverarbeitung erteilt haben, k&ouml;nnen Sie diese Einwilligung jederzeit\r\n  f&uuml;r die Zukunft widerrufen. Au&szlig;erdem haben Sie das Recht, unter\r\n  bestimmten Umst&auml;nden die Einschr&auml;nkung der Verarbeitung Ihrer\r\n  personenbezogenen Daten zu verlangen. Des Weiteren steht Ihnen ein\r\n  Beschwerderecht bei der zust&auml;ndigen Aufsichtsbeh&ouml;rde zu.\r\n</p>\r\n<p>\r\n  Hierzu sowie zu weiteren Fragen zum Thema Datenschutz k&ouml;nnen Sie sich\r\n  jederzeit unter der im Impressum angegebenen Adresse an uns wenden.\r\n</p>\r\n<h2>2. Hosting und Content Delivery Networks (CDN)</h2>\r\n<h3>Externes Hosting</h3>\r\n<p>\r\n  Diese Website wird bei einem externen Dienstleister gehostet (Hoster). Die\r\n  personenbezogenen Daten, die auf dieser Website erfasst werden, werden auf den\r\n  Servern des Hosters gespeichert. Hierbei kann es sich v. a. um IP-Adressen,\r\n  Kontaktanfragen, Meta- und Kommunikationsdaten, Vertragsdaten, Kontaktdaten,\r\n  Namen, Websitezugriffe und sonstige Daten, die &uuml;ber eine Website\r\n  generiert werden, handeln.\r\n</p>\r\n<p>\r\n  Der Einsatz des Hosters erfolgt zum Zwecke der Vertragserf&uuml;llung\r\n  gegen&uuml;ber unseren potenziellen und bestehenden Kunden (Art. 6 Abs. 1 lit.\r\n  b DSGVO) und im Interesse einer sicheren, schnellen und effizienten\r\n  Bereitstellung unseres Online-Angebots durch einen professionellen Anbieter\r\n  (Art. 6 Abs. 1 lit. f DSGVO).\r\n</p>\r\n<p>\r\n  Unser Hoster wird Ihre Daten nur insoweit verarbeiten, wie dies zur\r\n  Erf&uuml;llung seiner Leistungspflichten erforderlich ist und unsere Weisungen\r\n  in Bezug auf diese Daten befolgen.\r\n</p>\r\n<p>Wir setzen folgenden Hoster ein:</p>\r\n<p>\r\n  Uberspace<br />\r\n  Jonas Pasche<br />\r\n  Kaiserstr. 15<br />\r\n  55116 Mainz\r\n</p>\r\n<h2>3. Allgemeine Hinweise und Pflicht&shy;informationen</h2>\r\n<h3>Datenschutz</h3>\r\n<p>\r\n  Die Betreiber dieser Seiten nehmen den Schutz Ihrer pers&ouml;nlichen Daten\r\n  sehr ernst. Wir behandeln Ihre personenbezogenen Daten vertraulich und\r\n  entsprechend der gesetzlichen Datenschutzvorschriften sowie dieser\r\n  Datenschutzerkl&auml;rung.\r\n</p>\r\n<p>\r\n  Wenn Sie diese Website benutzen, werden verschiedene personenbezogene Daten\r\n  erhoben. Personenbezogene Daten sind Daten, mit denen Sie pers&ouml;nlich\r\n  identifiziert werden k&ouml;nnen. Die vorliegende Datenschutzerkl&auml;rung\r\n  erl&auml;utert, welche Daten wir erheben und wof&uuml;r wir sie nutzen. Sie\r\n  erl&auml;utert auch, wie und zu welchem Zweck das geschieht.\r\n</p>\r\n<p>\r\n  Wir weisen darauf hin, dass die Daten&uuml;bertragung im Internet (z.&nbsp;B.\r\n  bei der Kommunikation per E-Mail) Sicherheitsl&uuml;cken aufweisen kann. Ein\r\n  l&uuml;ckenloser Schutz der Daten vor dem Zugriff durch Dritte ist nicht\r\n  m&ouml;glich.\r\n</p>\r\n<h3>Hinweis zur verantwortlichen Stelle</h3>\r\n<p>\r\n  Die verantwortliche Stelle f&uuml;r die Datenverarbeitung auf dieser Website\r\n  ist:\r\n</p>\r\n<p>\r\n  Stefan Strobel Software &amp; Service Consulting<br />\r\n  Stefan Strobel<br />\r\n  Robert-Bosch-Str. 43<br />\r\n  71277 Rutesheim\r\n</p>\r\n\r\n<p>\r\n  Telefon: +49 159 040 533 54<br />\r\n  E-Mail: stefan.strobel@s4-consulting.de\r\n</p>\r\n<p>\r\n  Verantwortliche Stelle ist die nat&uuml;rliche oder juristische Person, die\r\n  allein oder gemeinsam mit anderen &uuml;ber die Zwecke und Mittel der\r\n  Verarbeitung von personenbezogenen Daten (z.&nbsp;B. Namen, E-Mail-Adressen o.\r\n  &Auml;.) entscheidet.\r\n</p>\r\n\r\n<h3>Speicherdauer</h3>\r\n<p>\r\n  Soweit innerhalb dieser Datenschutzerkl&auml;rung keine speziellere\r\n  Speicherdauer genannt wurde, verbleiben Ihre personenbezogenen Daten bei uns,\r\n  bis der Zweck f&uuml;r die Datenverarbeitung entf&auml;llt. Wenn Sie ein\r\n  berechtigtes L&ouml;schersuchen geltend machen oder eine Einwilligung zur\r\n  Datenverarbeitung widerrufen, werden Ihre Daten gel&ouml;scht, sofern wir\r\n  keinen anderen rechtlich zul&auml;ssigen&nbsp; Gr&uuml;nde f&uuml;r die\r\n  Speicherung Ihrer personenbezogenen Daten haben (z.B. steuer- oder\r\n  handelsrechtliche Aufbewahrungsfristen); im letztgenannten Fall erfolgt die\r\n  L&ouml;schung nach Fortfall dieser Gr&uuml;nde.\r\n</p>\r\n<h3>Widerruf Ihrer Einwilligung zur Datenverarbeitung</h3>\r\n<p>\r\n  Viele Datenverarbeitungsvorg&auml;nge sind nur mit Ihrer ausdr&uuml;cklichen\r\n  Einwilligung m&ouml;glich. Sie k&ouml;nnen eine bereits erteilte Einwilligung\r\n  jederzeit widerrufen. Die Rechtm&auml;&szlig;igkeit der bis zum Widerruf\r\n  erfolgten Datenverarbeitung bleibt vom Widerruf unber&uuml;hrt.\r\n</p>\r\n<h3>\r\n  Widerspruchsrecht gegen die Datenerhebung in besonderen F&auml;llen sowie\r\n  gegen Direktwerbung (Art. 21 DSGVO)\r\n</h3>\r\n<p>\r\n  WENN DIE DATENVERARBEITUNG AUF GRUNDLAGE VON ART. 6 ABS. 1 LIT. E ODER F DSGVO\r\n  ERFOLGT, HABEN SIE JEDERZEIT DAS RECHT, AUS GR&Uuml;NDEN, DIE SICH AUS IHRER\r\n  BESONDEREN SITUATION ERGEBEN, GEGEN DIE VERARBEITUNG IHRER PERSONENBEZOGENEN\r\n  DATEN WIDERSPRUCH EINZULEGEN; DIES GILT AUCH F&Uuml;R EIN AUF DIESE\r\n  BESTIMMUNGEN GEST&Uuml;TZTES PROFILING. DIE JEWEILIGE RECHTSGRUNDLAGE, AUF\r\n  DENEN EINE VERARBEITUNG BERUHT, ENTNEHMEN SIE DIESER\r\n  DATENSCHUTZERKL&Auml;RUNG. WENN SIE WIDERSPRUCH EINLEGEN, WERDEN WIR IHRE\r\n  BETROFFENEN PERSONENBEZOGENEN DATEN NICHT MEHR VERARBEITEN, ES SEI DENN, WIR\r\n  K&Ouml;NNEN ZWINGENDE SCHUTZW&Uuml;RDIGE GR&Uuml;NDE F&Uuml;R DIE VERARBEITUNG\r\n  NACHWEISEN, DIE IHRE INTERESSEN, RECHTE UND FREIHEITEN &Uuml;BERWIEGEN ODER\r\n  DIE VERARBEITUNG DIENT DER GELTENDMACHUNG, AUS&Uuml;BUNG ODER VERTEIDIGUNG VON\r\n  RECHTSANSPR&Uuml;CHEN (WIDERSPRUCH NACH ART. 21 ABS. 1 DSGVO).\r\n</p>\r\n<p>\r\n  WERDEN IHRE PERSONENBEZOGENEN DATEN VERARBEITET, UM DIREKTWERBUNG ZU\r\n  BETREIBEN, SO HABEN SIE DAS RECHT, JEDERZEIT WIDERSPRUCH GEGEN DIE\r\n  VERARBEITUNG SIE BETREFFENDER PERSONENBEZOGENER DATEN ZUM ZWECKE DERARTIGER\r\n  WERBUNG EINZULEGEN; DIES GILT AUCH F&Uuml;R DAS PROFILING, SOWEIT ES MIT\r\n  SOLCHER DIREKTWERBUNG IN VERBINDUNG STEHT. WENN SIE WIDERSPRECHEN, WERDEN IHRE\r\n  PERSONENBEZOGENEN DATEN ANSCHLIESSEND NICHT MEHR ZUM ZWECKE DER DIREKTWERBUNG\r\n  VERWENDET (WIDERSPRUCH NACH ART. 21 ABS. 2 DSGVO).\r\n</p>\r\n<h3>\r\n  Beschwerde&shy;recht bei der zust&auml;ndigen Aufsichts&shy;beh&ouml;rde\r\n</h3>\r\n<p>\r\n  Im Falle von Verst&ouml;&szlig;en gegen die DSGVO steht den Betroffenen ein\r\n  Beschwerderecht bei einer Aufsichtsbeh&ouml;rde, insbesondere in dem\r\n  Mitgliedstaat ihres gew&ouml;hnlichen Aufenthalts, ihres Arbeitsplatzes oder\r\n  des Orts des mutma&szlig;lichen Versto&szlig;es zu. Das Beschwerderecht\r\n  besteht unbeschadet anderweitiger verwaltungsrechtlicher oder gerichtlicher\r\n  Rechtsbehelfe.\r\n</p>\r\n<h3>Recht auf Daten&shy;&uuml;bertrag&shy;barkeit</h3>\r\n<p>\r\n  Sie haben das Recht, Daten, die wir auf Grundlage Ihrer Einwilligung oder in\r\n  Erf&uuml;llung eines Vertrags automatisiert verarbeiten, an sich oder an einen\r\n  Dritten in einem g&auml;ngigen, maschinenlesbaren Format aush&auml;ndigen zu\r\n  lassen. Sofern Sie die direkte &Uuml;bertragung der Daten an einen anderen\r\n  Verantwortlichen verlangen, erfolgt dies nur, soweit es technisch machbar ist.\r\n</p>\r\n<h3>SSL- bzw. TLS-Verschl&uuml;sselung</h3>\r\n<p>\r\n  Diese Seite nutzt aus Sicherheitsgr&uuml;nden und zum Schutz der\r\n  &Uuml;bertragung vertraulicher Inhalte, wie zum Beispiel Bestellungen oder\r\n  Anfragen, die Sie an uns als Seitenbetreiber senden, eine SSL- bzw.\r\n  TLS-Verschl&uuml;sselung. Eine verschl&uuml;sselte Verbindung erkennen Sie\r\n  daran, dass die Adresszeile des Browsers von &bdquo;http://&ldquo; auf\r\n  &bdquo;https://&ldquo; wechselt und an dem Schloss-Symbol in Ihrer\r\n  Browserzeile.\r\n</p>\r\n<p>\r\n  Wenn die SSL- bzw. TLS-Verschl&uuml;sselung aktiviert ist, k&ouml;nnen die\r\n  Daten, die Sie an uns &uuml;bermitteln, nicht von Dritten mitgelesen werden.\r\n</p>\r\n<h3>Auskunft, L&ouml;schung und Berichtigung</h3>\r\n<p>\r\n  Sie haben im Rahmen der geltenden gesetzlichen Bestimmungen jederzeit das\r\n  Recht auf unentgeltliche Auskunft &uuml;ber Ihre gespeicherten\r\n  personenbezogenen Daten, deren Herkunft und Empf&auml;nger und den Zweck der\r\n  Datenverarbeitung und ggf. ein Recht auf Berichtigung oder L&ouml;schung\r\n  dieser Daten. Hierzu sowie zu weiteren Fragen zum Thema personenbezogene Daten\r\n  k&ouml;nnen Sie sich jederzeit unter der im Impressum angegebenen Adresse an\r\n  uns wenden.\r\n</p>\r\n<h3>Recht auf Einschr&auml;nkung der Verarbeitung</h3>\r\n<p>\r\n  Sie haben das Recht, die Einschr&auml;nkung der Verarbeitung Ihrer\r\n  personenbezogenen Daten zu verlangen. Hierzu k&ouml;nnen Sie sich jederzeit\r\n  unter der im Impressum angegebenen Adresse an uns wenden. Das Recht auf\r\n  Einschr&auml;nkung der Verarbeitung besteht in folgenden F&auml;llen:\r\n</p>\r\n<ul>\r\n  <li>\r\n    Wenn Sie die Richtigkeit Ihrer bei uns gespeicherten personenbezogenen Daten\r\n    bestreiten, ben&ouml;tigen wir in der Regel Zeit, um dies zu\r\n    &uuml;berpr&uuml;fen. F&uuml;r die Dauer der Pr&uuml;fung haben Sie das\r\n    Recht, die Einschr&auml;nkung der Verarbeitung Ihrer personenbezogenen Daten\r\n    zu verlangen.\r\n  </li>\r\n  <li>\r\n    Wenn die Verarbeitung Ihrer personenbezogenen Daten unrechtm&auml;&szlig;ig\r\n    geschah/geschieht, k&ouml;nnen Sie statt der L&ouml;schung die\r\n    Einschr&auml;nkung der Datenverarbeitung verlangen.\r\n  </li>\r\n  <li>\r\n    Wenn wir Ihre personenbezogenen Daten nicht mehr ben&ouml;tigen, Sie sie\r\n    jedoch zur Aus&uuml;bung, Verteidigung oder Geltendmachung von\r\n    Rechtsanspr&uuml;chen ben&ouml;tigen, haben Sie das Recht, statt der\r\n    L&ouml;schung die Einschr&auml;nkung der Verarbeitung Ihrer\r\n    personenbezogenen Daten zu verlangen.\r\n  </li>\r\n  <li>\r\n    Wenn Sie einen Widerspruch nach Art. 21 Abs. 1 DSGVO eingelegt haben, muss\r\n    eine Abw&auml;gung zwischen Ihren und unseren Interessen vorgenommen werden.\r\n    Solange noch nicht feststeht, wessen Interessen &uuml;berwiegen, haben Sie\r\n    das Recht, die Einschr&auml;nkung der Verarbeitung Ihrer personenbezogenen\r\n    Daten zu verlangen.\r\n  </li>\r\n</ul>\r\n<p>\r\n  Wenn Sie die Verarbeitung Ihrer personenbezogenen Daten eingeschr&auml;nkt\r\n  haben, d&uuml;rfen diese Daten &ndash; von ihrer Speicherung abgesehen &ndash;\r\n  nur mit Ihrer Einwilligung oder zur Geltendmachung, Aus&uuml;bung oder\r\n  Verteidigung von Rechtsanspr&uuml;chen oder zum Schutz der Rechte einer\r\n  anderen nat&uuml;rlichen oder juristischen Person oder aus Gr&uuml;nden eines\r\n  wichtigen &ouml;ffentlichen Interesses der Europ&auml;ischen Union oder eines\r\n  Mitgliedstaats verarbeitet werden.\r\n</p>\r\n<h2>4. Datenerfassung auf dieser Website</h2>\r\n<h3>Cookies</h3>\r\n<p>\r\n  Unsere Internetseiten verwenden so genannte &bdquo;Cookies&ldquo;. Cookies\r\n  sind kleine Textdateien und richten auf Ihrem Endger&auml;t keinen Schaden an.\r\n  Sie werden entweder vor&uuml;bergehend f&uuml;r die Dauer einer Sitzung\r\n  (Session-Cookies) oder dauerhaft (permanente Cookies) auf Ihrem Endger&auml;t\r\n  gespeichert. Session-Cookies werden nach Ende Ihres Besuchs automatisch\r\n  gel&ouml;scht. Permanente Cookies bleiben auf Ihrem Endger&auml;t gespeichert,\r\n  bis Sie diese selbst l&ouml;schen&nbsp;oder eine automatische L&ouml;schung\r\n  durch Ihren Webbrowser erfolgt.\r\n</p>\r\n<p>\r\n  Teilweise k&ouml;nnen auch Cookies von Drittunternehmen auf Ihrem\r\n  Endger&auml;t gespeichert werden, wenn Sie unsere Seite betreten\r\n  (Third-Party-Cookies). Diese erm&ouml;glichen uns oder Ihnen die Nutzung\r\n  bestimmter Dienstleistungen des Drittunternehmens (z.B. Cookies zur Abwicklung\r\n  von Zahlungsdienstleistungen).\r\n</p>\r\n<p>\r\n  Cookies haben verschiedene Funktionen. Zahlreiche Cookies sind technisch\r\n  notwendig, da bestimmte Websitefunktionen ohne diese nicht funktionieren\r\n  w&uuml;rden (z.B. die Warenkorbfunktion oder die Anzeige von Videos). Andere\r\n  Cookies dienen dazu, das Nutzerverhalten auszuwerten&nbsp;oder Werbung\r\n  anzuzeigen.\r\n</p>\r\n<p>\r\n  Cookies, die zur Durchf&uuml;hrung des elektronischen Kommunikationsvorgangs\r\n  (notwendige Cookies) oder zur Bereitstellung bestimmter, von Ihnen\r\n  erw&uuml;nschter Funktionen (funktionale Cookies, z. B. f&uuml;r die\r\n  Warenkorbfunktion) oder zur Optimierung der Website (z.B. Cookies zur Messung\r\n  des Webpublikums) erforderlich sind, werden auf Grundlage von Art. 6 Abs. 1\r\n  lit. f DSGVO gespeichert, sofern keine andere Rechtsgrundlage angegeben wird.\r\n  Der Websitebetreiber hat ein berechtigtes Interesse an der Speicherung von\r\n  Cookies zur technisch fehlerfreien und optimierten Bereitstellung seiner\r\n  Dienste. Sofern eine Einwilligung zur Speicherung von Cookies abgefragt wurde,\r\n  erfolgt die Speicherung der betreffenden Cookies ausschlie&szlig;lich auf\r\n  Grundlage dieser Einwilligung (Art. 6 Abs. 1 lit. a DSGVO); die Einwilligung\r\n  ist jederzeit widerrufbar.\r\n</p>\r\n<p>\r\n  Sie k&ouml;nnen Ihren Browser so einstellen, dass Sie &uuml;ber das Setzen von\r\n  Cookies informiert werden und Cookies nur im Einzelfall erlauben, die Annahme\r\n  von Cookies f&uuml;r bestimmte F&auml;lle oder generell ausschlie&szlig;en\r\n  sowie das automatische L&ouml;schen der Cookies beim Schlie&szlig;en des\r\n  Browsers aktivieren. Bei der Deaktivierung von Cookies kann die\r\n  Funktionalit&auml;t dieser Website eingeschr&auml;nkt sein.\r\n</p>\r\n<p>\r\n  Soweit Cookies von Drittunternehmen oder zu Analysezwecken eingesetzt werden,\r\n  werden wir Sie hier&uuml;ber im Rahmen dieser Datenschutzerkl&auml;rung\r\n  gesondert informieren und ggf. eine Einwilligung abfragen.\r\n</p>\r\n<h3>Server-Log-Dateien</h3>\r\n<p>\r\n  Der Provider der Seiten erhebt und speichert automatisch Informationen in so\r\n  genannten Server-Log-Dateien, die Ihr Browser automatisch an uns\r\n  &uuml;bermittelt. Dies sind:\r\n</p>\r\n<ul>\r\n  <li>Browsertyp und Browserversion</li>\r\n  <li>verwendetes Betriebssystem</li>\r\n  <li>Referrer URL</li>\r\n  <li>Hostname des zugreifenden Rechners</li>\r\n  <li>Uhrzeit der Serveranfrage</li>\r\n  <li>IP-Adresse</li>\r\n</ul>\r\n<p>\r\n  Eine Zusammenf&uuml;hrung dieser Daten mit anderen Datenquellen wird nicht\r\n  vorgenommen.\r\n</p>\r\n<p>\r\n  Die Erfassung dieser Daten erfolgt auf Grundlage von Art. 6 Abs. 1 lit. f\r\n  DSGVO. Der Websitebetreiber hat ein berechtigtes Interesse an der technisch\r\n  fehlerfreien Darstellung und der Optimierung seiner Website &ndash; hierzu\r\n  m&uuml;ssen die Server-Log-Files erfasst werden.\r\n</p>\r\n<h3>Anfrage per E-Mail, Telefon oder Telefax</h3>\r\n<p>\r\n  Wenn Sie uns per E-Mail, Telefon oder Telefax kontaktieren, wird Ihre Anfrage\r\n  inklusive aller daraus hervorgehenden personenbezogenen Daten (Name, Anfrage)\r\n  zum Zwecke der Bearbeitung Ihres Anliegens bei uns gespeichert und\r\n  verarbeitet. Diese Daten geben wir nicht ohne Ihre Einwilligung weiter.\r\n</p>\r\n<p>\r\n  Die Verarbeitung dieser Daten erfolgt auf Grundlage von Art. 6 Abs. 1 lit. b\r\n  DSGVO, sofern Ihre Anfrage mit der Erf&uuml;llung eines Vertrags\r\n  zusammenh&auml;ngt oder zur Durchf&uuml;hrung vorvertraglicher Ma&szlig;nahmen\r\n  erforderlich ist. In allen &uuml;brigen F&auml;llen beruht die Verarbeitung\r\n  auf unserem berechtigten Interesse an der effektiven Bearbeitung der an uns\r\n  gerichteten Anfragen (Art. 6 Abs. 1 lit. f DSGVO) oder auf Ihrer Einwilligung\r\n  (Art. 6 Abs. 1 lit. a DSGVO) sofern diese abgefragt wurde.\r\n</p>\r\n<p>\r\n  Die von Ihnen an uns per Kontaktanfragen &uuml;bersandten Daten verbleiben bei\r\n  uns, bis Sie uns zur L&ouml;schung auffordern, Ihre Einwilligung zur\r\n  Speicherung widerrufen oder der Zweck f&uuml;r die Datenspeicherung\r\n  entf&auml;llt (z.&nbsp;B. nach abgeschlossener Bearbeitung Ihres Anliegens).\r\n  Zwingende gesetzliche Bestimmungen &ndash; insbesondere gesetzliche\r\n  Aufbewahrungsfristen &ndash; bleiben unber&uuml;hrt.\r\n</p>\r\n<h2>5. Plugins und Tools</h2>\r\n<h3>Google Web Fonts (lokales Hosting)</h3>\r\n<p>\r\n  Diese Seite nutzt zur einheitlichen Darstellung von Schriftarten so genannte\r\n  Web Fonts, die von Google bereitgestellt werden. Die Google Fonts sind lokal\r\n  installiert. Eine Verbindung zu Servern von Google findet dabei nicht statt.\r\n</p>\r\n<p>\r\n  Weitere Informationen zu Google Web Fonts finden Sie unter\r\n  <a\r\n    href=\"https://developers.google.com/fonts/faq\"\r\n    target=\"_blank\"\r\n    rel=\"noopener noreferrer\"\r\n    >https://developers.google.com/fonts/faq</a\r\n  >\r\n  und in der Datenschutzerkl&auml;rung von Google:\r\n  <a\r\n    href=\"https://policies.google.com/privacy?hl=de\"\r\n    target=\"_blank\"\r\n    rel=\"noopener noreferrer\"\r\n    >https://policies.google.com/privacy?hl=de</a\r\n  >.\r\n</p>\r\n<h3>Font Awesome (lokales Hosting)</h3>\r\n<p>\r\n  Diese Seite nutzt zur einheitlichen Darstellung von Schriftarten Font Awesome.\r\n  Font Awesome ist lokal installiert. Eine Verbindung zu Servern von Fonticons,\r\n  Inc.&nbsp; findet dabei nicht statt.\r\n</p>\r\n<p>\r\n  Weitere Informationen zu Font Awesome finden Sie&nbsp;und in der\r\n  Datenschutzerkl&auml;rung f&uuml;r Font Awesome unter:\r\n  <a\r\n    href=\"https://fontawesome.com/privacy\"\r\n    target=\"_blank\"\r\n    rel=\"noopener noreferrer\"\r\n    >https://fontawesome.com/privacy</a\r\n  >.\r\n</p>\r\n<p>Quelle: <a href=\"https://www.e-recht24.de\">eRecht24</a></p>\r\n","import { TenantI } from './tenant';\r\nimport { UserI } from './user';\r\n\r\nexport enum ROLE {\r\n  MEMBER = 'member',\r\n  ADMIN = 'admin',\r\n  OWNER = 'owner',\r\n}\r\n\r\nexport interface TenantRelationI {\r\n  id: string;\r\n  active: boolean;\r\n  user?: UserI;\r\n  userId: string;\r\n  tenant?: TenantI;\r\n  tenantId: string;\r\n  role: ROLE;\r\n}\r\n","export enum ROUTES {\r\n  LOGIN = 'login',\r\n  REGISTER_USER = 'nutzer-registrierung',\r\n  REGISTER_TENANT = 'account-registrierung',\r\n  PASSWORD_FORGOTTEN = 'passwort-vergessen',\r\n  PASSWORD_RESET = 'passwort-reset',\r\n  IMPRINT = 'impressum',\r\n  LEGAL = 'rechtliches',\r\n  REGISTER_USER_FINISH = 'registrierung',\r\n  PROFILE = 'profil',\r\n  TENANT_PREFIX = 'o',\r\n  TENANT_PLANNER = 'planner',\r\n  TENANT_MANAGEMENT = 'verwaltung',\r\n  TENANT_EVENTS = 'events',\r\n  HOME = 'home',\r\n  MY_TENANTS = 'meine-organisationen',\r\n}\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { User } from 'src/app/models/user';\r\nimport { TenantService } from 'src/app/services/tenant.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { AppService } from 'src/app/services/app.service';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-registration',\r\n  templateUrl: './registration.component.html',\r\n  styleUrls: ['./registration.component.scss'],\r\n})\r\nexport class RegistrationComponent implements OnInit, OnDestroy {\r\n  registrationForm: FormGroup;\r\n  error: string = null;\r\n  loading: boolean = false;\r\n  success: boolean = false;\r\n  userSubscription: Subscription;\r\n  isLoggedIn: boolean = false;\r\n\r\n  constructor(\r\n    private tenantService: TenantService,\r\n    private route: ActivatedRoute,\r\n    private userService: UserService,\r\n    private appService: AppService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.userSubscription = this.appService.user.subscribe((user: User) => {\r\n      this.isLoggedIn = user !== null;\r\n    });\r\n    if (this.route.snapshot.params.tenantPath) {\r\n      this.tenantService.load(this.route.snapshot.params.tenantPath);\r\n    }\r\n    this.registrationForm = new FormGroup({\r\n      email: new FormControl('', [Validators.required, Validators.email]),\r\n      name: new FormControl('', Validators.required),\r\n      password: new FormControl('', Validators.required),\r\n      dataPrivacyCheck: new FormControl(false, Validators.required),\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.appService.setColor(null);\r\n    if (this.userSubscription) {\r\n      this.userSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  isInvalid(formControlName: string): boolean {\r\n    return (\r\n      this.registrationForm.get(formControlName).invalid &&\r\n      this.registrationForm.get(formControlName).touched\r\n    );\r\n  }\r\n\r\n  onSubmit(): void {\r\n    if (this.registrationForm.invalid) {\r\n      this.registrationForm.markAllAsTouched();\r\n      return;\r\n    }\r\n    if (this.isLoggedIn) {\r\n      return;\r\n    }\r\n    const user = new User(this.registrationForm.get('email').value);\r\n    user.name = this.registrationForm.get('name').value;\r\n    user.password = this.registrationForm.get('password').value;\r\n    this.userService\r\n      .register(user, this.route.snapshot.params.tenantPath)\r\n      .subscribe(\r\n        () => {\r\n          this.success = true;\r\n        },\r\n        error => {\r\n          console.error(error);\r\n        }\r\n      );\r\n  }\r\n}\r\n","<div class=\"row\" *ngIf=\"!success && !isLoggedIn\">\r\n  <div class=\"col-12 col-md-8 offset-md-2 col-xl-4 offset-xl-4\">\r\n    <div class=\"card\">\r\n      <h4 class=\"card-header\">Persönliches Profil anlegen</h4>\r\n      <div class=\"card-body\">\r\n        <form [formGroup]=\"registrationForm\" (ngSubmit)=\"onSubmit()\">\r\n          <div class=\"form-group\">\r\n            <label for=\"email\">Email</label>\r\n            <input\r\n              id=\"email\"\r\n              type=\"email\"\r\n              formControlName=\"email\"\r\n              class=\"form-control\"\r\n              [ngClass]=\"{\r\n                'is-invalid': isInvalid('email')\r\n              }\"\r\n            />\r\n            <div *ngIf=\"isInvalid('email')\" class=\"invalid-feedback\">\r\n              <div *ngIf=\"isInvalid('email')\">Bitte Email angeben</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"name\">Name</label>\r\n            <input\r\n              id=\"name\"\r\n              type=\"text\"\r\n              formControlName=\"name\"\r\n              class=\"form-control\"\r\n              [ngClass]=\"{\r\n                'is-invalid': isInvalid('name')\r\n              }\"\r\n            />\r\n            <div *ngIf=\"isInvalid('name')\" class=\"invalid-feedback\">\r\n              <div *ngIf=\"isInvalid('name')\">Bitte Name angeben</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"password\">Passwort</label>\r\n            <input\r\n              id=\"password\"\r\n              type=\"password\"\r\n              formControlName=\"password\"\r\n              class=\"form-control\"\r\n              [ngClass]=\"{\r\n                'is-invalid': isInvalid('password')\r\n              }\"\r\n            />\r\n            <div *ngIf=\"isInvalid('password')\" class=\"invalid-feedback\">\r\n              <div *ngIf=\"isInvalid('password')\">Bitte Passwort angeben</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <div class=\"form-check\">\r\n              <input\r\n                class=\"form-check-input\"\r\n                id=\"dataPrivacyCheck\"\r\n                type=\"checkbox\"\r\n                formControlName=\"dataPrivacyCheck\"\r\n                required\r\n              />\r\n              <label\r\n                class=\"form-check-label mt-0\"\r\n                for=\"dataPrivacyCheck\"\r\n                [ngClass]=\"{\r\n                  'is-invalid': isInvalid('dataPrivacyCheck')\r\n                }\"\r\n                >Hiermit bestätige ich, dass ich die\r\n                <a href=\"/rechtliches#datenschutz\" target=\"_blank\"\r\n                  >Datenschutzbestimmungen</a\r\n                >\r\n                gelesen habe und diesen zustimme. *</label\r\n              >\r\n              <div\r\n                *ngIf=\"isInvalid('dataPrivacyCheck')\"\r\n                class=\"invalid-feedback\"\r\n              >\r\n                Bitte stimmen Sie den Datenschutzbestimmungen zu.\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"text-right\">\r\n            <button [disabled]=\"loading\" class=\"btn btn-success\">\r\n              <span\r\n                *ngIf=\"loading\"\r\n                class=\"spinner-border spinner-border-sm mr-1\"\r\n              ></span>\r\n              Registrieren\r\n            </button>\r\n          </div>\r\n          <div *ngIf=\"error\" class=\"alert alert-danger mt-3 mb-0\">\r\n            {{ error }}\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf=\"success\" class=\"alert alert-success mt-3 mb-0\">\r\n  Bitte bestätigen Sie Ihre Organisation, indem Sie in der Registrierungs-Email,\r\n  die wir Ihnen eben geschickt haben, den Bestätigungslink klicken.\r\n  <br />\r\n  Sie können dieses Browserfenster nun schließen.\r\n</div>\r\n\r\n<div *ngIf=\"isLoggedIn\" class=\"alert alert-warning mt-3 mb-0 d-flex flex-row\">\r\n  <div style=\"width: 30px\">\r\n    <i class=\"fas fa-exclamation-triangle\"></i>\r\n  </div>\r\n  <div>\r\n    Sie sind derzeit bereits eingeloggt und können sich nicht nochmals\r\n    registrieren.\r\n    <br />\r\n    Sollten Sie ein zweites Profil erstellen wollen, loggen Sie sich erst aus\r\n    und registrieren Sie sich danach erneut.\r\n  </div>\r\n</div>\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { LoginComponent } from './views/login/login.component';\r\nimport { DashboardComponent } from './views/dashboard/dashboard.component';\r\nimport { EventsComponent } from './views/events/events.component';\r\nimport { TenantComponent } from './views/tenant/tenant.component';\r\nimport { RegistrationComponent } from './views/registration/registration.component';\r\nimport { TenantRegistrationComponent } from './views/tenant-registration/tenant-registration.component';\r\nimport { ErrorComponent } from './views/error/error.component';\r\nimport { QuillModule } from 'ngx-quill';\r\nimport { EventSelectComponent } from './components/event-select/event-select.component';\r\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { ModalModule } from 'ngx-bootstrap/modal';\r\nimport { ButtonsModule } from 'ngx-bootstrap/buttons';\r\nimport { ImprintComponent } from './views/imprint/imprint.component';\r\nimport { ProfileComponent } from './views/profile/profile.component';\r\nimport { LegalComponent } from './views/legal/legal.component';\r\nimport { ColorPickerModule } from 'ngx-color-picker';\r\nimport {\r\n  NgcCookieConsentModule,\r\n  NgcCookieConsentConfig,\r\n} from 'ngx-cookieconsent';\r\nimport { environment } from 'src/environments/environment';\r\nimport { CategoryManagementComponent } from './components/category-management/category-management.component';\r\nimport { CompleteRegistrationComponent } from './views/complete-registration/complete-registration.component';\r\nimport { PasswordResetComponent } from './views/password-reset/password-reset.component';\r\nimport { UserManagementComponent } from './components/user-management/user-management.component';\r\nimport { PasswordForgottenComponent } from './views/password-forgotten/password-forgotten.component';\r\nimport { IntroComponent } from './views/intro/intro.component';\r\nimport { MyAccountsComponent } from './views/my-accounts/my-accounts.component';\r\nimport { SubscriptionComponent } from './components/subscription/subscription.component';\r\nimport { ToastComponent } from './components/toast/toast.component';\r\nimport { NotificationService } from './services/notification.service';\r\nimport { LoadingComponent } from './components/loading/loading.component';\r\nimport { CalendarComponent } from './components/calendar/calendar.component';\r\n\r\nconst cookieConfig: NgcCookieConsentConfig = {\r\n  cookie: {\r\n    domain: environment.domain,\r\n  },\r\n  position: 'bottom',\r\n  theme: 'classic',\r\n  palette: {\r\n    popup: {\r\n      background: '#000000',\r\n      text: '#ffffff',\r\n      link: '#ffffff',\r\n    },\r\n    button: {\r\n      background: '#f1d600',\r\n      text: '#000000',\r\n      border: 'transparent',\r\n    },\r\n  },\r\n  type: 'info',\r\n  content: {\r\n    message:\r\n      'Diese Seite nutzt Cookies, um die korrekte Funktionsweise der Anwendung sicherzustellen. Es findet kein Tracking statt, persönliche Informationen bleiben rein auf diesem Gerät.',\r\n    dismiss: 'Verstanden, Cookies zulassen',\r\n    link: '',\r\n  },\r\n};\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    LoginComponent,\r\n    DashboardComponent,\r\n    EventsComponent,\r\n    TenantComponent,\r\n    RegistrationComponent,\r\n    TenantRegistrationComponent,\r\n    ErrorComponent,\r\n    EventSelectComponent,\r\n    ImprintComponent,\r\n    ProfileComponent,\r\n    LegalComponent,\r\n    CategoryManagementComponent,\r\n    CompleteRegistrationComponent,\r\n    PasswordResetComponent,\r\n    UserManagementComponent,\r\n    PasswordForgottenComponent,\r\n    IntroComponent,\r\n    MyAccountsComponent,\r\n    SubscriptionComponent,\r\n    ToastComponent,\r\n    LoadingComponent,\r\n    CalendarComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    HttpClientModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    QuillModule.forRoot({\r\n      modules: {\r\n        toolbar: [\r\n          ['bold', 'italic', 'underline'], // toggled buttons\r\n          ['blockquote'],\r\n          [{ list: 'ordered' }, { list: 'bullet' }],\r\n          [{ indent: '-1' }, { indent: '+1' }], // outdent/indent\r\n          [{ size: ['small', false, 'large', 'huge'] }], // custom dropdown\r\n          [{ color: [] }, { background: [] }], // dropdown with defaults from theme\r\n          [{ align: [] }],\r\n          ['link'],\r\n        ],\r\n      },\r\n      placeholder: 'Optionalen Text eingeben',\r\n    }),\r\n    NgbModule,\r\n    BrowserAnimationsModule,\r\n    ModalModule.forRoot(),\r\n    ButtonsModule.forRoot(),\r\n    NgcCookieConsentModule.forRoot(cookieConfig),\r\n    ColorPickerModule,\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent],\r\n})\r\nexport class AppModule {}\r\n","import { EventI } from '../../../../common/event';\r\nimport { Injectable } from '@angular/core';\r\nimport { Adapter } from '../helpers/adapter';\r\nimport * as moment from 'moment';\r\nimport { each, find } from 'lodash';\r\nimport { environment } from 'src/environments/environment';\r\nimport { EventSeriesI } from '../../../../common/event-series';\r\n\r\nexport class Event implements EventI {\r\n  id?: string;\r\n  date: Date;\r\n  maxSeats: number;\r\n  takenSeats: number;\r\n  name: string;\r\n  categoryId: string;\r\n  weekDay: number;\r\n  // time in seconds on that day\r\n  time: number;\r\n  disabled: boolean;\r\n  tenantId: string;\r\n  singleOccurence: boolean;\r\n  registrationOpenFrom: Date;\r\n  eventSeries?: EventSeriesI;\r\n\r\n  downloadLink(): string {\r\n    return `${environment.apiUrl}/secure/tenants/${this.tenantId}/events/${this.id}/pdf`;\r\n  }\r\n\r\n  displayName(): string {\r\n    return this.name;\r\n  }\r\n\r\n  displayTime(includeWeekDay: boolean = true): string {\r\n    const m = moment(this.date);\r\n    if (this.singleOccurence) {\r\n      return m.format('DD.MM. (ddd) HH:mm');\r\n    }\r\n    if (includeWeekDay) {\r\n      return m.format('ddd HH:mm');\r\n    }\r\n    return m.format('HH:mm');\r\n  }\r\n\r\n  displayDate(): string {\r\n    const m = moment(this.date);\r\n    return m.format('DD.MM.');\r\n  }\r\n\r\n  isInPast(): boolean {\r\n    const now = moment();\r\n    return now.isAfter(moment(this.date));\r\n  }\r\n\r\n  /**\r\n   * returns all unique events based on name, weekDay, targetClass and time\r\n   * @param events\r\n   */\r\n  static unique(events: Event[]): Event[] {\r\n    const uniqueEvents = new Array<Event>();\r\n    each(events, (event: Event) => {\r\n      const identicalEvent = find(uniqueEvents, (uniqueEvent: Event) => {\r\n        return (\r\n          uniqueEvent.name === event.name &&\r\n          uniqueEvent.weekDay === event.weekDay &&\r\n          uniqueEvent.categoryId === event.categoryId &&\r\n          uniqueEvent.time === event.time\r\n        );\r\n      });\r\n      if (identicalEvent === undefined) {\r\n        uniqueEvents.push(event);\r\n      }\r\n    });\r\n    return uniqueEvents;\r\n  }\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class EventAdapter implements Adapter<Event> {\r\n  adapt(item: any): Event {\r\n    const event = new Event();\r\n    event.id = item.id;\r\n    event.name = item.name;\r\n    event.categoryId = item.categoryId;\r\n    const m = moment(item.date);\r\n    event.date = m.toDate();\r\n    // compute the week day and the time in minutes on that day:\r\n    event.weekDay = m.isoWeekday();\r\n    event.time = m.hours() / 60 + m.minutes();\r\n    event.maxSeats = item.maxSeats;\r\n    event.takenSeats = item.takenSeats;\r\n    event.disabled = item.disabled;\r\n    event.tenantId = item.tenantId;\r\n    event.singleOccurence = item.singleOccurence;\r\n    if (item.registrationOpenFrom) {\r\n      event.registrationOpenFrom = moment(item.registrationOpenFrom).toDate();\r\n    }\r\n    event.eventSeries = item.eventSeries;\r\n    return event;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { map } from 'rxjs/operators';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Category, CategoryAdapter } from '../models/category';\r\nimport { CategoryI } from '../../../../common/category';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class CategoryService {\r\n  constructor(private http: HttpClient, private adapter: CategoryAdapter) {}\r\n\r\n  getCategories(tenantPath: string): Observable<Category[]> {\r\n    return this.http\r\n      .get(`${environment.apiUrl}/tenants/${tenantPath}/categories`)\r\n      .pipe(\r\n        // Adapt the raw items\r\n        map((data: any[]) => data.map(item => this.adapter.adapt(item)))\r\n      );\r\n  }\r\n\r\n  deleteCategory(id: string): Observable<any> {\r\n    return this.http.delete(`${environment.apiUrl}/secure/categories/${id}`);\r\n  }\r\n\r\n  createCategory(category: CategoryI): Observable<Category> {\r\n    return this.http\r\n      .post(`${environment.apiUrl}/secure/categories`, category)\r\n      .pipe(\r\n        // Adapt the raw items\r\n        map((data: any) => this.adapter.adapt(data))\r\n      );\r\n  }\r\n\r\n  updateCategory(category: Category): Observable<Category> {\r\n    return this.http\r\n      .put(`${environment.apiUrl}/secure/categories/${category.id}`, category)\r\n      .pipe(\r\n        // Adapt the raw items\r\n        map((data: any) => this.adapter.adapt(data))\r\n      );\r\n  }\r\n}\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"crnd\";","import { Injectable, SecurityContext } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { map, tap } from 'rxjs/operators';\r\nimport { TenantAdapter, Tenant } from '../models/tenant';\r\nimport { Observable, Subscription, of } from 'rxjs';\r\nimport { environment } from '../../environments/environment';\r\nimport {\r\n  TenantRelation,\r\n  TenantRelationAdapter,\r\n} from '../models/tenant-relation';\r\nimport { AppService } from './app.service';\r\nimport { Invitation, InvitationAdapter } from '../models/invitation';\r\nimport { clone } from 'lodash';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class TenantService {\r\n  private checkPathSubscription: Subscription = null;\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private tenantAdapter: TenantAdapter,\r\n    private tenantRelationAdapter: TenantRelationAdapter,\r\n    private appService: AppService,\r\n    private invitationAdapter: InvitationAdapter,\r\n    private domSanitizer: DomSanitizer\r\n  ) {}\r\n\r\n  /**\r\n   * loads the tenant for the given path.\r\n   * if the tenant is already loaded, it is not requested at the backend again.\r\n   * @param tenantPath\r\n   */\r\n  load(tenantPath: string, force: boolean = false) {\r\n    if (\r\n      !force &&\r\n      this.appService.getCurrentTenant() &&\r\n      this.appService.getCurrentTenant().path === tenantPath\r\n    ) {\r\n      this.appService.setCurrentTenant(this.appService.getCurrentTenant());\r\n    } else {\r\n      // we must load the tenant from server-side\r\n      this.getByPath(tenantPath).subscribe((tenant: Tenant) => {\r\n        this.appService.setCurrentTenant(tenant);\r\n      });\r\n    }\r\n  }\r\n\r\n  getByPath(tenantPath: string): Observable<Tenant> {\r\n    if (\r\n      this.appService.getCurrentTenant() &&\r\n      this.appService.getCurrentTenant().path === tenantPath\r\n    ) {\r\n      return of(this.appService.getCurrentTenant());\r\n    } else {\r\n      return this.http.get(`${environment.apiUrl}/tenants/${tenantPath}`).pipe(\r\n        // Adapt the raw item\r\n        map(item => this.tenantAdapter.adapt(item))\r\n      );\r\n    }\r\n  }\r\n\r\n  get(tenantId: string): Observable<Tenant> {\r\n    if (\r\n      this.appService.getCurrentTenant() &&\r\n      this.appService.getCurrentTenant().id === tenantId\r\n    ) {\r\n      return of(this.appService.getCurrentTenant());\r\n    } else {\r\n      return this.http\r\n        .get(`${environment.apiUrl}/secure/tenants/${tenantId}`)\r\n        .pipe(\r\n          // Adapt the raw item\r\n          map(item => this.tenantAdapter.adapt(item))\r\n        );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * loads all tenant relationships for the current user\r\n   */\r\n  getAll(): Observable<TenantRelation[]> {\r\n    return this.http.get(`${environment.apiUrl}/secure/tenants`).pipe(\r\n      // Adapt the raw item\r\n      map((data: any[]) =>\r\n        data.map(item => this.tenantRelationAdapter.adapt(item))\r\n      ),\r\n      tap(tenantRelations => {\r\n        this.appService.setCurrentTenantRelations(tenantRelations);\r\n      })\r\n    );\r\n  }\r\n\r\n  update(tenant: Tenant): Observable<Tenant> {\r\n    const tenantToUpdate = clone(tenant);\r\n    // update the logo from the current tenant object\r\n    if (tenantToUpdate.logo) {\r\n      if (typeof tenantToUpdate.logo === 'object') {\r\n        // it's a SafeResourceUrl oject - convert it to string first\r\n        tenantToUpdate.logo = this.domSanitizer.sanitize(\r\n          SecurityContext.RESOURCE_URL,\r\n          tenantToUpdate.logo\r\n        );\r\n      }\r\n    }\r\n    return this.http\r\n      .put(\r\n        `${environment.apiUrl}/secure/tenants/${tenantToUpdate.id}`,\r\n        tenantToUpdate\r\n      )\r\n      .pipe(\r\n        // Adapt the raw item\r\n        map(item => this.tenantAdapter.adapt(item)),\r\n        tap((tenant: Tenant) => {\r\n          if (tenant.id === this.appService.getCurrentTenant().id) {\r\n            this.appService.setCurrentTenant(tenant);\r\n          }\r\n        })\r\n      );\r\n  }\r\n\r\n  create(tenant: Tenant): Observable<Tenant> {\r\n    return this.http.post(`${environment.apiUrl}/secure/tenants`, tenant).pipe(\r\n      // Adapt the raw item\r\n      map(item => this.tenantAdapter.adapt(item))\r\n    );\r\n  }\r\n\r\n  delete(tenantId: string): Observable<any> {\r\n    return this.http.delete(`${environment.apiUrl}/secure/tenants/${tenantId}`);\r\n  }\r\n\r\n  getUsers(tenantId: string): Observable<TenantRelation[]> {\r\n    return this.http\r\n      .get(`${environment.apiUrl}/secure/tenants/${tenantId}/users`)\r\n      .pipe(\r\n        // Adapt the raw items\r\n        map((data: any[]) =>\r\n          data.map(item => this.tenantRelationAdapter.adapt(item))\r\n        )\r\n      );\r\n  }\r\n\r\n  getOpenInvitations(tenantId: string): Observable<Invitation[]> {\r\n    return this.http\r\n      .get(`${environment.apiUrl}/secure/tenants/${tenantId}/invitations`)\r\n      .pipe(\r\n        // Adapt the raw items\r\n        map((data: any[]) =>\r\n          data.map(item => this.invitationAdapter.adapt(item))\r\n        )\r\n      );\r\n  }\r\n\r\n  revokeOpenInvitations(\r\n    tenantId: string,\r\n    invitationId: string\r\n  ): Observable<any> {\r\n    return this.http.delete(\r\n      `${environment.apiUrl}/secure/tenants/${tenantId}/invitations/${invitationId}`\r\n    );\r\n  }\r\n\r\n  addUser(tenantId: string, email: string): Observable<Invitation> {\r\n    return this.http\r\n      .post(`${environment.apiUrl}/secure/tenants/${tenantId}/users`, {\r\n        email,\r\n      })\r\n      .pipe(\r\n        // Adapt the raw items\r\n        map(item => this.invitationAdapter.adapt(item))\r\n      );\r\n  }\r\n\r\n  /**\r\n   * will check if a given path is already taken by someone. the result (true|false) will be set on the parameter variable \"checkResultReference\"\r\n   * @param pathToCheck\r\n   */\r\n  checkPath(\r\n    pathToCheck: string,\r\n    checkResultReference: { pathTaken: boolean }\r\n  ): void {\r\n    // unsubscribe from any potential previous request:\r\n    if (this.checkPathSubscription) {\r\n      this.checkPathSubscription.unsubscribe();\r\n    }\r\n    this.checkPathSubscription = this.getByPath(pathToCheck).subscribe(\r\n      potentiallyExistingTenant => {\r\n        // now check if a tenant exists:\r\n        if (\r\n          potentiallyExistingTenant &&\r\n          potentiallyExistingTenant.path === pathToCheck\r\n        ) {\r\n          checkResultReference.pathTaken = true;\r\n          this.checkPathSubscription.unsubscribe();\r\n          this.checkPathSubscription = null;\r\n        } else {\r\n          checkResultReference.pathTaken = false;\r\n          this.checkPathSubscription.unsubscribe();\r\n          this.checkPathSubscription = null;\r\n        }\r\n      },\r\n      error => {\r\n        checkResultReference.pathTaken = false;\r\n        this.checkPathSubscription.unsubscribe();\r\n        this.checkPathSubscription = null;\r\n      }\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { map } from 'rxjs/operators';\r\nimport { environment } from 'src/environments/environment';\r\nimport { User, UserAdapter } from '../models/user';\r\nimport { AppService } from './app.service';\r\nimport { ROUTES } from '../../../../common/frontend.routes';\r\nimport { UserI } from '../../../../common/user';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthenticationService {\r\n  constructor(\r\n    private router: Router,\r\n    private http: HttpClient,\r\n    private appService: AppService,\r\n    private userAdapter: UserAdapter\r\n  ) {\r\n    if (localStorage.getItem('user')) {\r\n      const storedData = JSON.parse(localStorage.getItem('user'));\r\n      const user = this.userAdapter.adapt(storedData);\r\n      user.authdata = storedData.authdata;\r\n      this.appService.setCurrentUser(user);\r\n    }\r\n  }\r\n\r\n  login(email: string, password: string) {\r\n    const user = new User(email);\r\n    user.password = password;\r\n    return this.http\r\n      .post<User>(`${environment.apiUrl}/authenticate`, user)\r\n      .pipe(\r\n        map((loggedInUser: UserI) => {\r\n          // store user details and basic auth credentials in local storage to keep user logged in between page refreshes\r\n          this.update(this.userAdapter.adapt(loggedInUser), password);\r\n          return loggedInUser;\r\n        })\r\n      );\r\n  }\r\n\r\n  /**\r\n   * this will update the user object in the application's cache. this can happen in the following scenarios:\r\n   * - after successful login (with password)\r\n   * - after update of user profile\r\n   * - after update of password (with password)\r\n   * - when opening the profile page\r\n   * - when loading the stored user object from local storage (with password)\r\n   * @param user\r\n   * @param password\r\n   */\r\n  update(user: User, password?: string): void {\r\n    if (user) {\r\n      if (password) {\r\n        user.authdata = window.btoa(user.email + ':' + password);\r\n      } else {\r\n        delete user.authdata;\r\n      }\r\n      let existingUserData: User;\r\n      if (localStorage.getItem('user')) {\r\n        const storedData = JSON.parse(localStorage.getItem('user'));\r\n        existingUserData = this.userAdapter.adapt(storedData);\r\n        existingUserData.authdata = storedData.authdata;\r\n      } else {\r\n        existingUserData = user;\r\n      }\r\n      const updatedUserData = Object.assign(existingUserData, user);\r\n      localStorage.setItem('user', JSON.stringify(updatedUserData));\r\n      this.appService.setCurrentUser(updatedUserData);\r\n    }\r\n  }\r\n\r\n  logout() {\r\n    // remove user from local storage to log user out\r\n    localStorage.removeItem('user');\r\n    this.appService.setCurrentUser(null);\r\n    this.appService.setCurrentTenantRelations(null);\r\n    if (\r\n      this.appService.getCurrentTenant() &&\r\n      this.appService.getCurrentTenant().path\r\n    ) {\r\n      this.router.navigate([\r\n        this.appService.getCurrentTenant().path,\r\n        ROUTES.LOGIN,\r\n      ]);\r\n    } else {\r\n      this.router.navigate([`/${ROUTES.LOGIN}`]);\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport {\r\n  HttpRequest,\r\n  HttpHandler,\r\n  HttpEvent,\r\n  HttpInterceptor,\r\n} from \"@angular/common/http\";\r\nimport { Observable, throwError } from \"rxjs\";\r\nimport { catchError } from \"rxjs/operators\";\r\nimport { AuthenticationService } from \"../services/authentication.service\";\r\n\r\n@Injectable()\r\nexport class ErrorInterceptor implements HttpInterceptor {\r\n  constructor(private authenticationService: AuthenticationService) {}\r\n\r\n  intercept(\r\n    request: HttpRequest<any>,\r\n    next: HttpHandler\r\n  ): Observable<HttpEvent<any>> {\r\n    return next.handle(request).pipe(\r\n      catchError((err) => {\r\n        if (err.status === 401) {\r\n          // auto logout if 401 response returned from api\r\n          this.authenticationService.logout();\r\n        }\r\n        const error = err.error.message || err.statusText;\r\n        return throwError(error);\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { Component, Input, OnInit, TemplateRef } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { clone, find, reject } from 'lodash';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\r\nimport { Category } from 'src/app/models/category';\r\nimport { Tenant } from 'src/app/models/tenant';\r\nimport { AppService } from 'src/app/services/app.service';\r\nimport { CategoryService } from 'src/app/services/category.service';\r\nimport { NotificationService } from 'src/app/services/notification.service';\r\nimport { ROLE } from '../../../../../common/tenant-relation';\r\n\r\n@Component({\r\n  selector: 'category-management',\r\n  templateUrl: './category-management.component.html',\r\n  styleUrls: ['./category-management.component.scss'],\r\n})\r\nexport class CategoryManagementComponent implements OnInit {\r\n  @Input()\r\n  tenant: Tenant;\r\n  categories: Category[];\r\n  ROLE = ROLE;\r\n  categoriesBeingEdited: string[] = new Array<string>();\r\n  categoryForm: FormGroup = new FormGroup({\r\n    newCategory: new FormControl('', Validators.required),\r\n  });\r\n  modalRef: BsModalRef;\r\n  iconClassNames = [\r\n    'fa-swimmer',\r\n    'fa-volleyball-ball',\r\n    'fa-futbol',\r\n    'fa-basketball-ball',\r\n    'fa-biking',\r\n    'fa-skiing',\r\n    'fa-hiking',\r\n    'fa-table-tennis',\r\n    'fa-bowling-ball',\r\n    'fa-dice',\r\n    'fa-chess',\r\n    'fa-campground',\r\n    'fa-music',\r\n    'fa-church',\r\n    'fa-users',\r\n    'fa-video',\r\n    'fa-camera-retro',\r\n    'fa-paint-brush',\r\n    'fa-tools',\r\n    'fa-car',\r\n    'fa-utensils',\r\n    'fa-dog',\r\n    'fa-cat',\r\n    'fa-horse-head',\r\n    'fa-hippo',\r\n  ];\r\n  categoryBeingEdited: Category;\r\n  newCategory: Category = new Category();\r\n\r\n  constructor(\r\n    private categoryService: CategoryService,\r\n    public appService: AppService,\r\n    private modalService: BsModalService,\r\n    private notification: NotificationService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.categoryService\r\n      .getCategories(this.tenant.path)\r\n      .subscribe(categories => {\r\n        this.categories = categories;\r\n      });\r\n  }\r\n\r\n  isBeingEdited(categoryId: string): boolean {\r\n    return this.categoriesBeingEdited.includes(categoryId);\r\n  }\r\n\r\n  edit(category: Category): void {\r\n    this.categoryForm.addControl(\r\n      category.id,\r\n      new FormControl(category.name, Validators.required)\r\n    );\r\n    this.categoriesBeingEdited.push(category.id);\r\n  }\r\n\r\n  save(category?: Category): void {\r\n    if (category) {\r\n      // an existing category needs to be updated\r\n      const categoryToUpdate = clone(category);\r\n      categoryToUpdate.name = this.categoryForm.get(categoryToUpdate.id).value;\r\n      if (!this.validationPassed(categoryToUpdate)) {\r\n        return;\r\n      }\r\n      this.categoryService.updateCategory(categoryToUpdate).subscribe(\r\n        (updatedCategory: Category) => {\r\n          this.categories.splice(\r\n            this.categories.indexOf(category),\r\n            1,\r\n            updatedCategory\r\n          );\r\n          this.categoriesBeingEdited.splice(\r\n            this.categoriesBeingEdited.indexOf(category.id),\r\n            1\r\n          );\r\n          this.categoryForm.removeControl(category.id);\r\n          this.notification.success('Kategorie aktualisiert');\r\n        },\r\n        error => {\r\n          console.error(error);\r\n          this.notification.error('Fehler beim Erstellen der neuen Kategorie');\r\n        }\r\n      );\r\n    } else {\r\n      // a new category shall be added\r\n      this.newCategory.name = this.categoryForm.get('newCategory').value;\r\n      this.newCategory.tenantId = this.tenant.id;\r\n      if (!this.validationPassed(this.newCategory)) {\r\n        return;\r\n      }\r\n      this.categoryService.createCategory(this.newCategory).subscribe(\r\n        (createdCategory: Category) => {\r\n          this.categories.push(createdCategory);\r\n          this.newCategory = new Category();\r\n          this.categoryForm.get('newCategory').reset();\r\n          this.notification.success('Neue Kategorie erstellt');\r\n        },\r\n        error => {\r\n          console.error(error);\r\n          this.notification.error('Fehler beim Erstellen der neuen Kategorie');\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  deleteCategory(category: Category): void {\r\n    this.notification.confirm({\r\n      title: 'Kategorie löschen?',\r\n      text: 'Möchten Sie diese Kategorie wirklich löschen?',\r\n      yesButtonClass: 'btn-danger',\r\n      yesButtonText: 'Löschen',\r\n      yesCallback: () => {\r\n        this.categoryService.deleteCategory(category.id).subscribe(\r\n          () => {\r\n            this.categories = reject(this.categories, { id: category.id });\r\n            this.notification.success('Kategorie gelöscht');\r\n          },\r\n          error => {\r\n            console.error(error);\r\n            this.notification.error('Fehler beim Löschen der Kategorie');\r\n          }\r\n        );\r\n      },\r\n    });\r\n  }\r\n\r\n  validationPassed(category: Category): boolean {\r\n    if (category.name.length === 0) {\r\n      this.notification.success(\r\n        'Bitte vergeben Sie einen Namen für die Kategorie'\r\n      );\r\n      return false;\r\n    }\r\n    if (!this.isCategoryUnique(category)) {\r\n      this.notification.error('Diese Kategorie existiert bereits');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * checks if the name is already existing in another category\r\n   * @param category\r\n   */\r\n  isCategoryUnique(category: Category): boolean {\r\n    for (let i = 0; i < this.categories.length; i++) {\r\n      if (\r\n        this.categories[i].name.toLowerCase() === category.name.toLowerCase() &&\r\n        this.categories[i].id !== category.id\r\n      ) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  openIconSelection(\r\n    selectedCategory: Category,\r\n    iconSelectionModal: TemplateRef<any>\r\n  ): void {\r\n    if (\r\n      selectedCategory === this.newCategory ||\r\n      this.categoriesBeingEdited.includes(selectedCategory.id)\r\n    ) {\r\n      this.categoryBeingEdited = selectedCategory;\r\n      this.modalRef = this.modalService.show(iconSelectionModal);\r\n    }\r\n  }\r\n\r\n  selectIcon(iconClassName: string): void {\r\n    this.categoryBeingEdited.icon = iconClassName;\r\n    this.modalRef.hide();\r\n  }\r\n}\r\n","<div>\r\n  <h4>Kategorien</h4>\r\n  <p>Definieren Sie hier die Kategorien, denen Events zugeordnet werden.</p>\r\n  <form [formGroup]=\"categoryForm\">\r\n    <ul class=\"list-group\">\r\n      <li\r\n        class=\"list-group-item list-group-item-action\"\r\n        *ngFor=\"let category of categories\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"col-8 col-md-9 d-flex\">\r\n            <i\r\n              class=\"fas mr-2 {{ category.icon }}\"\r\n              [ngStyle]=\"{\r\n                'line-height': isBeingEdited(category.id) ? '31px' : '24px',\r\n                'color': isBeingEdited(category.id)\r\n                  ? 'var(--plevents-main-color)'\r\n                  : ''\r\n              }\"\r\n              *ngIf=\"category.icon\"\r\n              [ngClass]=\"{ clickable: isBeingEdited(category.id) }\"\r\n              (click)=\"openIconSelection(category, iconSelectionModal)\"\r\n            ></i>\r\n            <i\r\n              class=\"fas mr-2 fa-image clickable\"\r\n              [ngStyle]=\"{\r\n                'line-height': isBeingEdited(category.id) ? '31px' : '24px',\r\n                'color': isBeingEdited(category.id)\r\n                  ? 'var(--plevents-main-color)'\r\n                  : ''\r\n              }\"\r\n              *ngIf=\"!category.icon && isBeingEdited(category.id)\"\r\n              (click)=\"openIconSelection(category, iconSelectionModal)\"\r\n            ></i>\r\n            <span *ngIf=\"!isBeingEdited(category.id)\">\r\n              {{ category.name }}\r\n            </span>\r\n            <input\r\n              *ngIf=\"isBeingEdited(category.id)\"\r\n              class=\"form-control form-control-sm flex-grow-1\"\r\n              type=\"text\"\r\n              [formControlName]=\"category.id\"\r\n              [ngClass]=\"{\r\n                'is-invalid': categoryForm.controls[category.id].invalid\r\n              }\"\r\n            />\r\n          </div>\r\n          <div\r\n            class=\"col-4 col-md-3 text-right\"\r\n            *ngIf=\"appService.hasRole(tenant.id, ROLE.OWNER)\"\r\n          >\r\n            <i\r\n              *ngIf=\"!isBeingEdited(category.id)\"\r\n              class=\"fas fa-edit clickable\"\r\n              (click)=\"edit(category)\"\r\n            ></i>\r\n            <i\r\n              *ngIf=\"!isBeingEdited(category.id)\"\r\n              class=\"fas fa-trash-alt clickable ml-4 text-danger\"\r\n              (click)=\"deleteCategory(category)\"\r\n            ></i>\r\n            <button\r\n              *ngIf=\"isBeingEdited(category.id)\"\r\n              class=\"btn btn-sm btn-outline-success\"\r\n              (click)=\"save(category)\"\r\n            >\r\n              Speichern\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li\r\n        class=\"list-group-item list-group-item-action text-center\"\r\n        *ngIf=\"!categories\"\r\n      >\r\n        <loading></loading> Kategorien werden geladen\r\n      </li>\r\n      <li\r\n        class=\"list-group-item list-group-item-action\"\r\n        *ngIf=\"appService.hasRole(tenant.id, ROLE.OWNER)\"\r\n      >\r\n        <div class=\"d-flex\">\r\n          <i\r\n            class=\"fas mr-2 clickable {{\r\n              newCategory.icon ? newCategory.icon : 'fa-icons'\r\n            }}\"\r\n            style=\"line-height: 38px\"\r\n            (click)=\"openIconSelection(newCategory, iconSelectionModal)\"\r\n          ></i>\r\n          <div class=\"flex-grow-1\">\r\n            <input\r\n              class=\"form-control w-100\"\r\n              type=\"text\"\r\n              formControlName=\"newCategory\"\r\n              placeholder=\"Neue Kategorie anlegen\"\r\n            />\r\n            <div\r\n              *ngIf=\"\r\n                categoryForm.get('newCategory').value &&\r\n                categoryForm.get('newCategory').value.length >= 20\r\n              \"\r\n              class=\"text-warning mt-1\"\r\n              style=\"font-size: small\"\r\n            >\r\n              <i class=\"fas fa-exclamation-triangle mr-1\"></i>\r\n              Der Name der Kategorie sollte für eine gute Darstellung am besten\r\n              unter 20 Zeichen lang sein\r\n            </div>\r\n          </div>\r\n          <button class=\"ml-3 btn btn-outline-success\" (click)=\"save()\">\r\n            Hinzufügen\r\n          </button>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </form>\r\n</div>\r\n\r\n<ng-template #iconSelectionModal>\r\n  <div class=\"modal-header\">\r\n    <h4 class=\"modal-title pull-left\">Icon Auswahl</h4>\r\n    <button\r\n      type=\"button\"\r\n      class=\"close pull-right\"\r\n      aria-label=\"Close\"\r\n      (click)=\"modalRef.hide()\"\r\n    >\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div class=\"modal-body\">\r\n    <p>\r\n      Wählen Sie zwischen den verfügbaren Icons aus, um Ihren Events ein\r\n      aussagekräftiges Icon hinzuzufügen.\r\n    </p>\r\n    <!-- icon selection -->\r\n    <div\r\n      class=\"iconContainer clickable\"\r\n      *ngFor=\"let iconClassName of iconClassNames\"\r\n      (click)=\"selectIcon(iconClassName)\"\r\n    >\r\n      <i class=\"fas {{ iconClassName }}\"></i>\r\n    </div>\r\n    <div class=\"alert alert-light p-2 mt-2\" style=\"background-color: #f9f9f9\">\r\n      Kein passendes Icon dabei? Einfach eine Mail an\r\n      <a href=\"mailto: stefan.strobel@s4-consulting.de\"\r\n        >stefan.strobel@s4-consulting.de</a\r\n      >\r\n      mit dem Wunsch-Icon schreiben.\r\n    </div>\r\n  </div>\r\n  <div class=\"modal-footer d-block\">\r\n    <button\r\n      type=\"button\"\r\n      class=\"btn btn-outline-secondary float-left\"\r\n      (click)=\"modalRef.hide()\"\r\n    >\r\n      Abbrechen\r\n    </button>\r\n    <button\r\n      type=\"button\"\r\n      class=\"btn btn-outline-secondary float-right\"\r\n      (click)=\"selectIcon(null)\"\r\n    >\r\n      Kein Icon\r\n    </button>\r\n  </div>\r\n</ng-template>\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { map } from 'rxjs/operators';\r\nimport { Observable } from 'rxjs';\r\nimport { Event, EventAdapter } from '../models/event';\r\nimport { EventI } from '../../../../common/event';\r\nimport { ParticipantI } from '../../../../common/participant';\r\nimport { Participant, ParticipantAdapter } from '../models/participant';\r\nimport { saveAs } from 'file-saver';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class EventService {\r\n  constructor(\r\n    private http: HttpClient,\r\n    private eventAdapter: EventAdapter,\r\n    private participantAdapter: ParticipantAdapter\r\n  ) {}\r\n\r\n  /**\r\n   * get all events for a specific tenant\r\n   * @param tenantId\r\n   * @param start the start date/time of the timeframe\r\n   * @param end the end date/time of the timeframe\r\n   */\r\n  getEvents(\r\n    tenantId: string,\r\n    start?: moment.Moment,\r\n    end?: moment.Moment,\r\n    privateEvents?: boolean\r\n  ): Observable<Event[]> {\r\n    const params: any = {};\r\n    if (start) {\r\n      params.start = start.format('yyyy-MM-DD');\r\n    }\r\n    if (end) {\r\n      params.end = end.format('yyyy-MM-DD');\r\n    }\r\n    return this.http\r\n      .get(\r\n        `${environment.apiUrl}${\r\n          privateEvents ? '/secure' : ''\r\n        }/tenants/${tenantId}/events`,\r\n        { params }\r\n      )\r\n      .pipe(\r\n        // Adapt the raw items\r\n        map((data: any[]) => data.map(item => this.eventAdapter.adapt(item)))\r\n      );\r\n  }\r\n\r\n  createEvent(tenantId: string, event: EventI): Observable<Event> {\r\n    return this.http\r\n      .post(`${environment.apiUrl}/secure/tenants/${tenantId}/events`, event)\r\n      .pipe(\r\n        // Adapt the raw items\r\n        map(data => this.eventAdapter.adapt(data))\r\n      );\r\n  }\r\n\r\n  updateEvent(event: Event): Observable<Event> {\r\n    return this.http\r\n      .put(\r\n        `${environment.apiUrl}/secure/tenants/${event.tenantId}/events/${event.id}`,\r\n        event\r\n      )\r\n      .pipe(\r\n        // Adapt the raw items\r\n        map(data => this.eventAdapter.adapt(data))\r\n      );\r\n  }\r\n\r\n  updateEventSeries(event: Event): Observable<Event> {\r\n    return this.http\r\n      .put(\r\n        `${environment.apiUrl}/secure/tenants/${event.tenantId}/eventSeries/${event.eventSeries.id}`,\r\n        event\r\n      )\r\n      .pipe(\r\n        // Adapt the raw items\r\n        map(data => this.eventAdapter.adapt(data))\r\n      );\r\n  }\r\n\r\n  deleteEvent(tenantId: string, eventId: string): Observable<any> {\r\n    return this.http.delete(\r\n      `${environment.apiUrl}/secure/tenants/${tenantId}/events/${eventId}`\r\n    );\r\n  }\r\n\r\n  deleteEventSeries(tenantId: string, eventSeriesId: string): Observable<any> {\r\n    return this.http.delete(\r\n      `${environment.apiUrl}/secure/tenants/${tenantId}/eventSeries/${eventSeriesId}`\r\n    );\r\n  }\r\n\r\n  setDisabled(\r\n    tenantId: string,\r\n    id: string,\r\n    disabled: boolean\r\n  ): Observable<Event> {\r\n    return this.http\r\n      .put(\r\n        `${environment.apiUrl}/secure/tenants/${tenantId}/events/${id}/disabled/${disabled}`,\r\n        null\r\n      )\r\n      .pipe(\r\n        // Adapt the raw items\r\n        map(data => this.eventAdapter.adapt(data))\r\n      );\r\n  }\r\n\r\n  addParticipant(participant: ParticipantI): Observable<Participant> {\r\n    return this.http\r\n      .post(\r\n        `${environment.apiUrl}/events/${participant.eventId}/participant`,\r\n        participant\r\n      )\r\n      .pipe(\r\n        // Adapt the raw items\r\n        map(data => this.participantAdapter.adapt(data))\r\n      );\r\n  }\r\n\r\n  getParticipants(\r\n    tenantId: string,\r\n    eventId: string\r\n  ): Observable<Participant[]> {\r\n    return this.http\r\n      .get(\r\n        `${environment.apiUrl}/secure/tenants/${tenantId}/events/${eventId}/participants`\r\n      )\r\n      .pipe(\r\n        // Adapt the raw items\r\n        map((data: any[]) =>\r\n          data.map(item => this.participantAdapter.adapt(item))\r\n        )\r\n      );\r\n  }\r\n\r\n  deleteParticipant(\r\n    tenantId: string,\r\n    eventId: string,\r\n    participantId: number\r\n  ): Observable<any> {\r\n    return this.http.delete(\r\n      `${environment.apiUrl}/secure/tenants/${tenantId}/events/${eventId}/participants/${participantId}`\r\n    );\r\n  }\r\n\r\n  downloadPdf(event: Event): void {\r\n    const headers = new HttpHeaders();\r\n    headers.set('Accept', 'application/pdf');\r\n    this.http\r\n      .get(event.downloadLink(), {\r\n        headers: headers,\r\n        responseType: 'blob',\r\n      })\r\n      .subscribe(pdfBlob => {\r\n        const blob = new Blob([pdfBlob], { type: 'application/pdf' });\r\n        const fileName = `Teilnehmerliste ${event.displayName()} - ${event.displayDate()}.pdf`;\r\n        saveAs(blob, fileName);\r\n      });\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { UserService } from 'src/app/services/user.service';\r\n\r\n@Component({\r\n  selector: 'app-complete-registration',\r\n  templateUrl: './complete-registration.component.html',\r\n  styleUrls: ['./complete-registration.component.scss'],\r\n})\r\nexport class CompleteRegistrationComponent implements OnInit {\r\n  noCode: boolean = false;\r\n  activated: boolean = false;\r\n  error: boolean = false;\r\n  loggedIn: boolean = false;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private userService: UserService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    // first of all, make sure that there is no user logged-in currently:\r\n    if (localStorage.getItem('user')) {\r\n      this.loggedIn = true;\r\n      return;\r\n    }\r\n    if (this.route.snapshot.queryParams.code) {\r\n      this.userService\r\n        .finishRegistration(this.route.snapshot.queryParams.code)\r\n        .subscribe(\r\n          () => {\r\n            this.activated = true;\r\n          },\r\n          error => {\r\n            console.error(error);\r\n            this.error = true;\r\n          }\r\n        );\r\n    } else {\r\n      this.noCode = true;\r\n    }\r\n  }\r\n}\r\n","<h1 class=\"mb-5\">Bestätigung Ihres Nutzerprofils</h1>\r\n<p *ngIf=\"!noCode && !activated && !error && !loggedIn\">\r\n  Wir aktivieren gerade Ihr Profil ...\r\n</p>\r\n<div class=\"alert alert-success text-center\" *ngIf=\"activated\">\r\n  <b>Ihr Profil wurde freigesschaltet!</b>\r\n  <br />\r\n  Bitte gehen Sie <a [routerLink]=\"['/login']\">zur Login-Seite</a> und loggen\r\n  sich dort ein.\r\n</div>\r\n<div class=\"alert alert-warning text-center\" *ngIf=\"noCode\">\r\n  Sie haben die Seite ohne einen gültigen Code aufgerufen.\r\n  <br />\r\n  Sie können dieses Browserfenster schließen.\r\n</div>\r\n<div class=\"alert alert-warning text-center\" *ngIf=\"error\">\r\n  Es trat leider ein Fehler auf. Versuchen Sie es in ein paar Minuten nochmals.\r\n  <br />\r\n  Falls der Fehler bestehen bleibt, wenden Sie sich bitte an den Support.\r\n</div>\r\n<div class=\"alert alert-warning text-center\" *ngIf=\"loggedIn\">\r\n  Sie sind gerade angemeldet und können daher kein neues Nutzerprofil\r\n  bestätigen.\r\n  <br />\r\n  Bitte melden Sie sich ab und rufen Sie danach diese URL nochmals auf.\r\n</div>\r\n","import { Component, OnDestroy, OnInit, TemplateRef } from '@angular/core';\r\nimport { Week } from 'src/app/models/week';\r\nimport { EventService } from 'src/app/services/event.service';\r\nimport { Event } from '../../models/event';\r\nimport * as moment from 'moment';\r\nimport { filter, sortBy, each, find, reject, map } from 'lodash';\r\nimport {\r\n  FormGroup,\r\n  FormControl,\r\n  Validators,\r\n  AbstractControl,\r\n} from '@angular/forms';\r\nimport { Subscription } from 'rxjs';\r\nimport { TenantService } from 'src/app/services/tenant.service';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Tenant } from 'src/app/models/tenant';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { Category } from 'src/app/models/category';\r\nimport { CategoryService } from 'src/app/services/category.service';\r\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\r\nimport { Participant } from 'src/app/models/participant';\r\nimport { AppService } from 'src/app/services/app.service';\r\nimport { ROLE } from '../../../../../common/tenant-relation';\r\nimport { User } from 'src/app/models/user';\r\nimport { TenantRelation } from 'src/app/models/tenant-relation';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { EventSeriesI } from '../../../../../common/event-series';\r\nimport { NotificationService } from 'src/app/services/notification.service';\r\n\r\nexport enum VIEW {\r\n  CALENDAR,\r\n  LIST,\r\n}\r\n\r\n@Component({\r\n  selector: 'app-dashboard',\r\n  templateUrl: './dashboard.component.html',\r\n  styleUrls: ['./dashboard.component.scss'],\r\n})\r\nexport class DashboardComponent implements OnInit, OnDestroy {\r\n  allEvents: Event[];\r\n  weeks: Week[] = new Array<Week>();\r\n  uniqueEvents: Event[] = null;\r\n  newEventSeriesForm: FormGroup;\r\n  newSingleEventForm: FormGroup;\r\n  operationOngoing: boolean = false;\r\n  newEventSeriesFormShown: boolean = false;\r\n  newSingleEventFormShown: boolean = false;\r\n  eventsOpened: boolean[];\r\n  categories: Category[];\r\n  tenantSubscription: Subscription;\r\n  tenant: Tenant = null;\r\n  modalRef: BsModalRef;\r\n  eventBeingEdited: Event = null;\r\n  editEventForm: FormGroup = new FormGroup({\r\n    name: new FormControl('', Validators.required),\r\n    date: new FormControl(null),\r\n    weekDay: new FormControl(''),\r\n    time: new FormControl('', Validators.required),\r\n    maxSeats: new FormControl('', [Validators.required, Validators.min(1)]),\r\n    categoryId: new FormControl(null),\r\n    registrationOpenFrom: new FormControl(null),\r\n  });\r\n  selectedEvent: Event = null;\r\n  participants: Participant[] = null;\r\n  ROLE = ROLE;\r\n  today = new Date();\r\n  addParticipantForm: FormGroup = new FormGroup({\r\n    firstname: new FormControl('', Validators.required),\r\n    lastname: new FormControl('', Validators.required),\r\n    email: new FormControl('', [Validators.required, Validators.email]),\r\n    phone: new FormControl('', Validators.required),\r\n    street: new FormControl('', Validators.required),\r\n    zip: new FormControl('', Validators.required),\r\n    city: new FormControl('', Validators.required),\r\n  });\r\n  showAddParticipantForm: boolean = false;\r\n  addParticipantSuccess: string = null;\r\n  orgMembers: User[];\r\n  userIdsAllowedOnNewEvent: string[];\r\n  VIEW = VIEW;\r\n  view: VIEW = VIEW.LIST;\r\n\r\n  constructor(\r\n    private eventService: EventService,\r\n    private tenantService: TenantService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private categoryService: CategoryService,\r\n    private modalService: BsModalService,\r\n    public appService: AppService,\r\n    private userService: UserService,\r\n    private notification: NotificationService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.eventsOpened = new Array<boolean>();\r\n    // load the tenant information and redirect in case tenant path does not exist:\r\n    this.tenantSubscription = this.tenantService\r\n      .getByPath(this.route.snapshot.params.tenantPath)\r\n      .subscribe(\r\n        () => {},\r\n        error => {\r\n          if (\r\n            error === 'Not Found' ||\r\n            (error instanceof HttpErrorResponse && error.status === 404)\r\n          ) {\r\n            this.router.navigate(['fehler', 'account-not-found']);\r\n          }\r\n        }\r\n      );\r\n    this.appService.tenant.subscribe((tenant: Tenant) => {\r\n      if (tenant && tenant != this.tenant) {\r\n        this.tenant = tenant;\r\n        this.appService.setColor(this.tenant);\r\n        this.loadAllEvents(this.tenant);\r\n        if (this.appService.hasRole(this.tenant.id, ROLE.ADMIN)) {\r\n          this.createNewEventSeriesForm();\r\n          this.createNewSingleEventForm();\r\n          this.tenantService\r\n            .getUsers(this.tenant.id)\r\n            .subscribe((tenantRelations: TenantRelation[]) => {\r\n              this.orgMembers = map(\r\n                filter(tenantRelations, tenantRelation => {\r\n                  return !tenantRelation.isAdmin() && !tenantRelation.isOwner();\r\n                }),\r\n                'user'\r\n              );\r\n            });\r\n        }\r\n      }\r\n    });\r\n    this.tenantService.load(this.route.snapshot.params.tenantPath);\r\n    this.categoryService\r\n      .getCategories(this.route.snapshot.params.tenantPath)\r\n      .subscribe(categories => {\r\n        this.categories = categories;\r\n        if (this.categories.length > 0) {\r\n          this.categories.sort();\r\n          this.categories.unshift(\r\n            new Category({\r\n              id: null,\r\n              name: '-- ohne Kategorie --',\r\n              tenantId: this.tenant.id,\r\n            })\r\n          );\r\n        }\r\n      });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.appService.setColor(null);\r\n    if (this.tenantSubscription) {\r\n      this.tenantSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  currentCW(): number {\r\n    return moment().isoWeek();\r\n  }\r\n\r\n  loadAllEvents(tenant: Tenant): void {\r\n    this.uniqueEvents = null;\r\n    this.eventService\r\n      .getEvents(tenant.id, null, null, true)\r\n      .subscribe((events: Event[]) => {\r\n        this.weeks = new Array<Week>();\r\n        this.uniqueEvents = new Array<Event>();\r\n        this.allEvents = events;\r\n        this.uniqueEvents = Event.unique(this.allEvents);\r\n        const sortOrder = ['weekDay', 'time', 'name'];\r\n        this.uniqueEvents = sortBy(this.uniqueEvents, sortOrder);\r\n        // prepare the weeks, calculate the past 4 weeks until the end of the year:\r\n        const today = moment();\r\n        const weekNumberFourWeeksAgo = today\r\n          .clone()\r\n          .subtract(4, 'weeks')\r\n          .week();\r\n        const startOfWeekFourWeeksAgo = today\r\n          .clone()\r\n          .startOf('week')\r\n          .subtract(4, 'weeks');\r\n        const endOfWeekFourWeeksAgo = today\r\n          .clone()\r\n          .endOf('week')\r\n          .subtract(4, 'weeks');\r\n        for (\r\n          let kw = today.week() - 4;\r\n          kw <= moment().date(31).month(11).isoWeek();\r\n          kw++\r\n        ) {\r\n          const week = new Week(kw);\r\n          const weekStart = startOfWeekFourWeeksAgo\r\n            .clone()\r\n            .add(kw - weekNumberFourWeeksAgo, 'weeks');\r\n          const weekEnd = endOfWeekFourWeeksAgo\r\n            .clone()\r\n            .add(kw - weekNumberFourWeeksAgo, 'weeks');\r\n          // add all events for this week\r\n          const eventsInThisWeek = filter(events, (event: Event) => {\r\n            return moment(event.date).isBetween(\r\n              weekStart,\r\n              weekEnd,\r\n              undefined,\r\n              '[]'\r\n            );\r\n          });\r\n          // match the event instances in this week to their according event\r\n          // this is necessary in case in a specific week an event is not existent\r\n          week.events = new Array<Event>(this.uniqueEvents.length);\r\n          each(this.uniqueEvents, (uniqueEvent: Event, index: number) => {\r\n            week.events[index] = find(eventsInThisWeek, {\r\n              name: uniqueEvent.name,\r\n              weekDay: uniqueEvent.weekDay,\r\n              time: uniqueEvent.time,\r\n              categoryId: uniqueEvent.categoryId,\r\n            });\r\n          });\r\n          this.weeks.push(week);\r\n        }\r\n      });\r\n  }\r\n\r\n  createNewEventSeriesForm(): void {\r\n    this.newEventSeriesForm = new FormGroup({\r\n      name: new FormControl('', Validators.required),\r\n      categoryId: new FormControl(null),\r\n      fromDate: new FormControl('', Validators.required),\r\n      time: new FormControl('', Validators.required),\r\n      maxSeats: new FormControl('', [Validators.required, Validators.min(1)]),\r\n    });\r\n  }\r\n\r\n  createNewSingleEventForm(): void {\r\n    this.newSingleEventForm = new FormGroup({\r\n      name: new FormControl('', Validators.required),\r\n      categoryId: new FormControl(null),\r\n      date: new FormControl('', Validators.required),\r\n      time: new FormControl('', Validators.required),\r\n      maxSeats: new FormControl('', [Validators.required, Validators.min(1)]),\r\n      registrationOpenFrom: new FormControl(null),\r\n    });\r\n  }\r\n\r\n  addNewEventSeries(): void {\r\n    if (!this.newEventSeriesForm.valid) {\r\n      this.newEventSeriesForm.markAllAsTouched();\r\n      return;\r\n    }\r\n    this.operationOngoing = true;\r\n    const m = moment(this.newEventSeriesForm.get('fromDate').value);\r\n    const time = <string>this.newEventSeriesForm.get('time').value;\r\n    m.hours(parseInt(time.split(':')[0]));\r\n    m.minutes(parseInt(time.split(':')[1]));\r\n    const event = new Event();\r\n    event.singleOccurence = false;\r\n    event.name = this.newEventSeriesForm.get('name').value;\r\n    event.categoryId = this.newEventSeriesForm.get('categoryId')\r\n      .value as string;\r\n    event.maxSeats = this.newEventSeriesForm.get('maxSeats').value;\r\n    event.date = m.toDate();\r\n    this.eventService.createEvent(this.tenant.id, event).subscribe(\r\n      (eventSeries: EventSeriesI) => {\r\n        this.notification.success('Neue Eventserie angelegt');\r\n        this.loadAllEvents(this.appService.getCurrentTenant());\r\n        this.operationOngoing = false;\r\n        this.newEventSeriesFormShown = false;\r\n        this.newEventSeriesForm.reset();\r\n        // now add all the users on the event series (if any were selected):\r\n        each(this.userIdsAllowedOnNewEvent, (userId: string) => {\r\n          this.userService\r\n            .allowAccessToEventSeries(this.tenant.id, userId, eventSeries.id)\r\n            .subscribe();\r\n        });\r\n      },\r\n      error => {\r\n        console.error(error);\r\n        this.notification.error('Es trat ein Fehler auf');\r\n        this.operationOngoing = false;\r\n      }\r\n    );\r\n  }\r\n\r\n  addNewSingleEvent(): void {\r\n    if (!this.newSingleEventForm.valid) {\r\n      this.newSingleEventForm.markAllAsTouched();\r\n      return;\r\n    }\r\n    this.operationOngoing = true;\r\n    const m = moment(this.newSingleEventForm.get('date').value);\r\n    const time = <string>this.newSingleEventForm.get('time').value;\r\n    m.hours(parseInt(time.split(':')[0]));\r\n    m.minutes(parseInt(time.split(':')[1]));\r\n    const event = new Event();\r\n    event.singleOccurence = true;\r\n    event.name = this.newSingleEventForm.get('name').value;\r\n    event.categoryId = this.newSingleEventForm.get('categoryId')\r\n      .value as string;\r\n    event.maxSeats = this.newSingleEventForm.get('maxSeats').value;\r\n    event.date = m.toDate();\r\n    const startOfRegistration = moment(\r\n      this.newSingleEventForm.get('registrationOpenFrom').value\r\n    );\r\n    if (startOfRegistration) {\r\n      startOfRegistration.hours(0).minutes(0).seconds(0).milliseconds(0);\r\n      event.registrationOpenFrom = startOfRegistration.toDate();\r\n    }\r\n    this.eventService.createEvent(this.tenant.id, event).subscribe(\r\n      (createdEvent: Event) => {\r\n        this.notification.success('Neues Einzelevent angelegt');\r\n        this.loadAllEvents(this.appService.getCurrentTenant());\r\n        this.operationOngoing = false;\r\n        this.newSingleEventFormShown = false;\r\n        this.newSingleEventForm.reset();\r\n        // now add all the users on the event (if any were selected):\r\n        each(this.userIdsAllowedOnNewEvent, (userId: string) => {\r\n          this.userService\r\n            .allowAccessToEvent(this.tenant.id, userId, createdEvent.id)\r\n            .subscribe();\r\n        });\r\n      },\r\n      error => {\r\n        console.error(error);\r\n        this.notification.error('Es trat ein Fehler auf');\r\n        this.operationOngoing = false;\r\n      }\r\n    );\r\n  }\r\n\r\n  isInvalid(formControl: AbstractControl): boolean {\r\n    return formControl.invalid && formControl.touched;\r\n  }\r\n\r\n  toggleDisabled(event: Event, clickEvent?: any): void {\r\n    if (clickEvent) {\r\n      clickEvent.stopPropagation();\r\n    }\r\n    event.disabled = !event.disabled;\r\n    // update it on server side, too\r\n    this.eventService\r\n      .setDisabled(this.tenant.id, event.id, event.disabled)\r\n      .subscribe();\r\n  }\r\n\r\n  deleteEventSeries(uniqueEventSeriesIndex: number): void {\r\n    const eventToDelete = this.uniqueEvents[uniqueEventSeriesIndex];\r\n    if (eventToDelete.singleOccurence) {\r\n      this.notification.confirm({\r\n        title: 'Event löschen?',\r\n        text:\r\n          'Wollen Sie wirklich dieses Event löschen? Alle Daten gehen unwiderbringlich verloren?',\r\n        yesButtonClass: 'btn-danger',\r\n        yesButtonText: 'Löschen',\r\n        yesCallback: () => {\r\n          this.operationOngoing = true;\r\n          this.eventService\r\n            .deleteEvent(this.tenant.id, eventToDelete.id)\r\n            .subscribe(\r\n              () => {\r\n                this.notification.success('Event gelöscht');\r\n                this.loadAllEvents(this.appService.getCurrentTenant());\r\n                this.operationOngoing = false;\r\n              },\r\n              error => {\r\n                console.error(error);\r\n                this.notification.error(\r\n                  'Es trat ein Fehler auf, Event wurde nicht gelöscht'\r\n                );\r\n                this.operationOngoing = false;\r\n              }\r\n            );\r\n        },\r\n      });\r\n    } else {\r\n      this.notification.confirm({\r\n        title: 'Künftige Events löschen?',\r\n        text:\r\n          'Wollen Sie alle KÜNFTIGEN Events in dieser Spalte wirklich löschen? Alle Daten dieser Events gehen unwiderbringlich verloren!',\r\n        yesButtonClass: 'btn-danger',\r\n        yesButtonText: 'Löschen',\r\n        yesCallback: () => {\r\n          this.operationOngoing = true;\r\n          this.eventService\r\n            .deleteEventSeries(this.tenant.id, eventToDelete.eventSeries.id)\r\n            .subscribe(\r\n              () => {\r\n                this.notification.success('Zukünftige Serienevents gelöscht');\r\n                this.loadAllEvents(this.appService.getCurrentTenant());\r\n                this.operationOngoing = false;\r\n              },\r\n              error => {\r\n                this.notification.error(\r\n                  'Es trat ein Fehler auf, die Eventserie wurde nicht gelöscht'\r\n                );\r\n                this.operationOngoing = false;\r\n              }\r\n            );\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  downloadPdf(clickEvent: any, event: Event): void {\r\n    clickEvent.stopPropagation();\r\n    this.eventService.downloadPdf(event);\r\n  }\r\n\r\n  /**\r\n   * search the events array and find the one event that is a series event of the given unique event\r\n   * @param events\r\n   * @param uniqueEvent\r\n   */\r\n  searchEventByUniqueEvent(events: Event[], uniqueEvent: Event): Event {\r\n    return find(events, {\r\n      name: uniqueEvent.name,\r\n      weekDay: uniqueEvent.weekDay,\r\n      time: uniqueEvent.time,\r\n    });\r\n  }\r\n\r\n  categoryName(categoryId: string): string {\r\n    if (this.categoryById(categoryId)) {\r\n      return this.categoryById(categoryId).name;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  categoryById(categoryId: string): Category {\r\n    return find(this.categories, { id: categoryId });\r\n  }\r\n\r\n  editSeriesEvent(uniqueEvent: Event, template: TemplateRef<any>) {\r\n    this.newEventSeriesFormShown = false;\r\n    this.newSingleEventFormShown = false;\r\n    this.modalRef = this.modalService.show(template);\r\n    this.eventBeingEdited = this.lastEventOfSeries(uniqueEvent);\r\n    this.editEventForm.get('name').setValue(this.eventBeingEdited.name);\r\n    this.editEventForm.get('weekDay').setValue(this.eventBeingEdited.weekDay);\r\n    this.editEventForm\r\n      .get('date')\r\n      .setValue(moment(this.eventBeingEdited.date).format('yyyy-MM-DD'));\r\n    this.editEventForm\r\n      .get('time')\r\n      .setValue(moment(this.eventBeingEdited.date).format('HH:mm'));\r\n    const optionalCategory = find(this.categories, {\r\n      id: this.eventBeingEdited.categoryId,\r\n    });\r\n    if (optionalCategory) {\r\n      this.editEventForm.get('categoryId').setValue(optionalCategory.id);\r\n    }\r\n    this.editEventForm.get('maxSeats').setValue(this.eventBeingEdited.maxSeats);\r\n    if (this.eventBeingEdited.singleOccurence) {\r\n      this.editEventForm\r\n        .get('registrationOpenFrom')\r\n        .setValue(\r\n          moment(this.eventBeingEdited.registrationOpenFrom).format(\r\n            'yyyy-MM-DD'\r\n          )\r\n        );\r\n      this.editEventForm.get('date').setValidators(Validators.required);\r\n      this.editEventForm.get('weekDay').setValidators(null);\r\n    } else {\r\n      this.editEventForm.get('weekDay').setValidators(Validators.required);\r\n      this.editEventForm.get('date').setValidators(null);\r\n    }\r\n  }\r\n\r\n  updateEvents(): void {\r\n    if (this.editEventForm.invalid) {\r\n      this.notification.error('Bitte erst alle Felder korrekt ausfüllen');\r\n      return;\r\n    }\r\n    this.operationOngoing = true;\r\n    const updatedEventData: any = {\r\n      name: this.editEventForm.get('name').value,\r\n      maxSeats: this.editEventForm.get('maxSeats').value,\r\n      categoryId: this.editEventForm.get('categoryId').value as string,\r\n      tenantId: this.tenant.id,\r\n    };\r\n    // the date is being constructed out of weekday and time\r\n    const time = <string>this.editEventForm.get('time').value;\r\n    if (this.eventBeingEdited.singleOccurence) {\r\n      // the date is being constructed out of weekday and time\r\n      updatedEventData.date = moment(this.editEventForm.get('date').value)\r\n        .hours(parseInt(time.split(':')[0]))\r\n        .minutes(parseInt(time.split(':')[1]))\r\n        .toDate();\r\n      const startOfRegistration = moment(\r\n        this.editEventForm.get('registrationOpenFrom').value\r\n      );\r\n      if (startOfRegistration) {\r\n        startOfRegistration.hours(0).minutes(0).seconds(0).milliseconds(0);\r\n        updatedEventData.registrationOpenFrom = startOfRegistration.toDate();\r\n      }\r\n      updatedEventData.id = this.eventBeingEdited.id;\r\n      this.eventService.updateEvent(updatedEventData).subscribe(\r\n        () => {\r\n          this.operationOngoing = false;\r\n          this.notification.success('Eventdaten aktualisiert');\r\n          this.modalRef.hide();\r\n          this.loadAllEvents(this.appService.getCurrentTenant());\r\n        },\r\n        error => {\r\n          console.error(error);\r\n          this.operationOngoing = false;\r\n          this.notification.error('Es trat ein Fehler auf');\r\n        }\r\n      );\r\n    } else {\r\n      // the date is being constructed out of weekday and time\r\n      updatedEventData.date = moment(this.eventBeingEdited.date)\r\n        .isoWeekday(this.editEventForm.get('weekDay').value)\r\n        .hours(parseInt(time.split(':')[0]))\r\n        .minutes(parseInt(time.split(':')[1]))\r\n        .toDate();\r\n      updatedEventData.eventSeries = this.eventBeingEdited.eventSeries;\r\n      this.eventService.updateEventSeries(updatedEventData).subscribe(\r\n        () => {\r\n          this.notification.success('Alle künftigen Events aktualisiert');\r\n          this.modalRef.hide();\r\n          this.loadAllEvents(this.appService.getCurrentTenant());\r\n        },\r\n        error => {\r\n          console.error(error);\r\n          this.notification.error('Es trat ein Fehler auf');\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  eventNotinPast(): boolean {\r\n    return !this.selectedEvent.isInPast();\r\n  }\r\n\r\n  showEventParticipants(event: Event, template: TemplateRef<any>): void {\r\n    this.selectedEvent = event;\r\n    this.participants = null;\r\n    this.showAddParticipantForm = false;\r\n    this.addParticipantSuccess = null;\r\n    this.addParticipantForm.reset();\r\n    this.eventService\r\n      .getParticipants(this.tenant.id, event.id)\r\n      .subscribe(participants => {\r\n        this.participants = participants;\r\n      });\r\n    this.modalRef = this.modalService.show(template, { class: 'modal-xl' });\r\n  }\r\n\r\n  deleteParticipant(participant: Participant): void {\r\n    this.notification.confirm({\r\n      title: 'Teilnehmer entfernen?',\r\n      text: 'Möchten Sie diesen Teilnehmer wirklich von der Liste entfernen?',\r\n      yesButtonClass: 'btn-danger',\r\n      yesButtonText: 'Entfernen',\r\n      yesCallback: () => {\r\n        this.eventService\r\n          .deleteParticipant(\r\n            this.tenant.id,\r\n            this.selectedEvent.id,\r\n            participant.id\r\n          )\r\n          .subscribe(() => {\r\n            this.notification.success('Teilnehmer von Aktivität entfernt');\r\n            this.participants = reject(this.participants, {\r\n              id: participant.id,\r\n            });\r\n            this.selectedEvent.takenSeats -= 1;\r\n          });\r\n      },\r\n    });\r\n  }\r\n\r\n  addParticipant(): void {\r\n    if (this.addParticipantForm.invalid) {\r\n      this.addParticipantForm.markAllAsTouched();\r\n      return;\r\n    }\r\n    this.operationOngoing = true;\r\n    const participant = new Participant();\r\n    participant.firstname = this.addParticipantForm.get('firstname').value;\r\n    participant.lastname = this.addParticipantForm.get('lastname').value;\r\n    participant.email = this.addParticipantForm.get('email').value;\r\n    participant.phone = this.addParticipantForm.get('phone').value;\r\n    participant.street = this.addParticipantForm.get('street').value;\r\n    participant.zip = this.addParticipantForm.get('zip').value;\r\n    participant.city = this.addParticipantForm.get('city').value;\r\n    participant.eventId = this.selectedEvent.id;\r\n    this.eventService.addParticipant(participant).subscribe(\r\n      (createdParticipant: Participant) => {\r\n        this.addParticipantForm.reset();\r\n        this.addParticipantSuccess =\r\n          'Teilnehmer ' +\r\n          participant.firstname +\r\n          ' ' +\r\n          participant.lastname +\r\n          ' zur Veranstaltung hinzugefügt';\r\n        this.participants.push(createdParticipant);\r\n        this.operationOngoing = false;\r\n        this.selectedEvent.takenSeats++;\r\n      },\r\n      error => {\r\n        this.notification.error('Es trat leider ein Fehler auf');\r\n        this.operationOngoing = false;\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * this function will traverse all events and return the last event of its respective series. if it is a single event, the event itself is being returned\r\n   * @param uniqueEvent\r\n   */\r\n  lastEventOfSeries(uniqueEvent: Event): Event {\r\n    if (uniqueEvent.singleOccurence) {\r\n      return uniqueEvent;\r\n    }\r\n    const eventsInRow = filter(this.allEvents, (event: Event) => {\r\n      return (\r\n        uniqueEvent.name === event.name &&\r\n        uniqueEvent.weekDay === event.weekDay &&\r\n        uniqueEvent.categoryId === event.categoryId &&\r\n        uniqueEvent.time === event.time\r\n      );\r\n    });\r\n    // now determine the last happening\r\n    let lastEvent = eventsInRow[0];\r\n    each(eventsInRow, event => {\r\n      if (moment(event.date).isAfter(moment(lastEvent.date))) {\r\n        lastEvent = event;\r\n      }\r\n    });\r\n    return lastEvent;\r\n  }\r\n\r\n  showNewSingleEventForm(): void {\r\n    this.newSingleEventFormShown = true;\r\n    this.userIdsAllowedOnNewEvent = new Array<string>();\r\n  }\r\n\r\n  showEventSeriesForm(): void {\r\n    this.newEventSeriesFormShown = true;\r\n    this.userIdsAllowedOnNewEvent = new Array<string>();\r\n  }\r\n\r\n  toggleUserOnNewEvent(user: User): void {\r\n    if (this.userIdsAllowedOnNewEvent.includes(user.id)) {\r\n      this.userIdsAllowedOnNewEvent = reject(\r\n        this.userIdsAllowedOnNewEvent,\r\n        id => id === user.id\r\n      );\r\n    } else {\r\n      this.userIdsAllowedOnNewEvent.push(user.id);\r\n    }\r\n  }\r\n}\r\n","<h2>Übersicht über alle anstehenden Events</h2>\r\n<!-- notification in case tenant is not active -->\r\n<div\r\n  class=\"alert alert-warning d-flex flex-row\"\r\n  *ngIf=\"tenant && !tenant.active\"\r\n>\r\n  <div style=\"width: 30px\">\r\n    <i class=\"fas fa-exclamation-triangle\"></i>\r\n  </div>\r\n  <div>\r\n    Diese Organisation ist derzeit noch <b>nicht</b> freigeschaltet. Events sind\r\n    daher noch nicht öffentlich verfübar. Bitte kontaktieren Sie den Support für\r\n    Unterstützung:\r\n    <a href=\"mailto:stefan.strobel@s4-consulting.de\"\r\n      >stefan.strobel@s4-consulting.de</a\r\n    >\r\n  </div>\r\n</div>\r\n\r\n<!-- action buttons to create new events or change the view -->\r\n<div class=\"row\" *ngIf=\"tenant && appService.hasRole(tenant.id, ROLE.ADMIN)\">\r\n  <div class=\"col-12 col-md-6 col-lg-4\">\r\n    <div class=\"btn-group btn-block mb-3\" role=\"group\">\r\n      <button\r\n        class=\"w-50 btn\"\r\n        [ngClass]=\"{\r\n          'btn-outline-success': view !== VIEW.LIST,\r\n          'btn-success': view === VIEW.LIST\r\n        }\"\r\n        (click)=\"view = VIEW.LIST\"\r\n      >\r\n        <i class=\"fas fa-list mr-2\"></i>\r\n        Liste\r\n      </button>\r\n      <button\r\n        class=\"w-50 btn\"\r\n        [ngClass]=\"{\r\n          'btn-outline-success': view !== VIEW.CALENDAR,\r\n          'btn-success': view === VIEW.CALENDAR\r\n        }\"\r\n        (click)=\"view = VIEW.CALENDAR\"\r\n      >\r\n        <i class=\"fas fa-calendar-alt mr-2\"></i>\r\n        Kalender\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <!--<div class=\"flex-grow-1\"></div>-->\r\n  <div class=\"col-12 col-md-6 col-lg-4 offset-lg-4\">\r\n    <div\r\n      class=\"btn-group btn-block\"\r\n      role=\"group\"\r\n      *ngIf=\"!newSingleEventFormShown && !newEventSeriesFormShown\"\r\n    >\r\n      <button\r\n        class=\"w-50 btn btn-outline-success\"\r\n        (click)=\"showEventSeriesForm()\"\r\n      >\r\n        Neues Serienevent\r\n      </button>\r\n      <button\r\n        class=\"w-50 btn btn-outline-success\"\r\n        (click)=\"showNewSingleEventForm()\"\r\n      >\r\n        Neues Einzelevent\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- form to create a new event series -->\r\n<div\r\n  class=\"newEventContainer\"\r\n  *ngIf=\"newEventSeriesForm && newEventSeriesFormShown\"\r\n>\r\n  <h5>Daten für neues Reihenevent bis Ende dieses Jahres:</h5>\r\n  <button\r\n    type=\"button\"\r\n    class=\"close pull-right\"\r\n    aria-label=\"Close\"\r\n    (click)=\"newEventSeriesFormShown = false\"\r\n  >\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n  <p>\r\n    Legen Sie hier die Daten für ein neues Serienevent bis zum Ende dieses\r\n    Jahres fest. Die Terminserie wiederholt sich jede Woche ab dem angegebenen\r\n    Startdatum.\r\n  </p>\r\n  <form [formGroup]=\"newEventSeriesForm\" (ngSubmit)=\"addNewEventSeries()\">\r\n    <div class=\"row\">\r\n      <div\r\n        class=\"col-12 col-md-4\"\r\n        [ngClass]=\"{ invalid: isInvalid(newEventSeriesForm.controls.name) }\"\r\n      >\r\n        <label for=\"name\">Event-Name</label>\r\n        <br />\r\n        <input\r\n          class=\"form-control\"\r\n          id=\"name\"\r\n          type=\"text\"\r\n          formControlName=\"name\"\r\n        />\r\n      </div>\r\n      <div\r\n        class=\"col-6 col-md-4\"\r\n        [ngClass]=\"{ invalid: isInvalid(newEventSeriesForm.controls.fromDate) }\"\r\n      >\r\n        <label for=\"fromDate\">Starttermin</label>\r\n        <br />\r\n        <input\r\n          class=\"form-control\"\r\n          id=\"fromDate\"\r\n          type=\"date\"\r\n          formControlName=\"fromDate\"\r\n          min=\"{{ today | date: 'yyyy-MM-dd' }}\"\r\n        />\r\n      </div>\r\n      <div\r\n        *ngIf=\"categories && categories.length > 0\"\r\n        class=\"col-6 col-md-4\"\r\n        [ngClass]=\"{\r\n          invalid: isInvalid(newEventSeriesForm.controls.categoryId)\r\n        }\"\r\n      >\r\n        <label>Kategorie</label>\r\n        <br />\r\n        <select class=\"form-control\" formControlName=\"categoryId\">\r\n          <option *ngFor=\"let category of categories\" [ngValue]=\"category.id\">\r\n            {{ category.name }}\r\n          </option>\r\n        </select>\r\n      </div>\r\n      <div\r\n        class=\"col-6 col-md-4\"\r\n        [ngClass]=\"{ invalid: isInvalid(newEventSeriesForm.controls.time) }\"\r\n      >\r\n        <label for=\"name\">Startzeit</label>\r\n        <br />\r\n        <input\r\n          class=\"form-control\"\r\n          id=\"time\"\r\n          type=\"time\"\r\n          formControlName=\"time\"\r\n        />\r\n      </div>\r\n      <div\r\n        class=\"col-6 col-md-4\"\r\n        [ngClass]=\"{ invalid: isInvalid(newEventSeriesForm.controls.maxSeats) }\"\r\n      >\r\n        <label for=\"maxSeats\">max. Teilnehmer</label>\r\n        <br />\r\n        <input\r\n          class=\"form-control\"\r\n          id=\"maxSeats\"\r\n          type=\"number\"\r\n          formControlName=\"maxSeats\"\r\n          min=\"1\"\r\n        />\r\n      </div>\r\n      <div class=\"col-6 col-md-4\" *ngIf=\"orgMembers && orgMembers.length > 0\">\r\n        <!-- the list of users with role \"leader\" that have access to this event -->\r\n        <label>Nutzer mit Zugriff auf Teilnehmerdaten</label>\r\n        <div class=\"allowedMembersBox\">\r\n          <div\r\n            class=\"clickable\"\r\n            *ngFor=\"let user of orgMembers\"\r\n            [ngClass]=\"{\r\n              'text-secondary': !userIdsAllowedOnNewEvent.includes(user.id)\r\n            }\"\r\n            (click)=\"toggleUserOnNewEvent(user)\"\r\n          >\r\n            <i\r\n              class=\"fas mr-1\"\r\n              [ngClass]=\"{\r\n                'fa-check-circle': userIdsAllowedOnNewEvent.includes(user.id),\r\n                'fa-times-circle': !userIdsAllowedOnNewEvent.includes(user.id)\r\n              }\"\r\n            ></i>\r\n            {{ user.name }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-4\">\r\n        <button\r\n          class=\"btn btn-block btn-outline-success\"\r\n          type=\"submit\"\r\n          style=\"margin-top: 32px\"\r\n          [disabled]=\"operationOngoing\"\r\n        >\r\n          <loading *ngIf=\"operationOngoing\" textClass=\"text-success\"></loading>\r\n          Eventserie erstellen\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n\r\n<!-- form to create a new single event -->\r\n<div\r\n  class=\"newEventContainer\"\r\n  *ngIf=\"newSingleEventForm && newSingleEventFormShown\"\r\n>\r\n  <h5>Daten für neues Einzelevent:</h5>\r\n  <button\r\n    type=\"button\"\r\n    class=\"close pull-right\"\r\n    aria-label=\"Close\"\r\n    (click)=\"newSingleEventFormShown = false\"\r\n  >\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n  <p>\r\n    Legen Sie hier die Daten für ein neues, einzelnes Event fest. Der Termin ist\r\n    einmalig und findet am angegebenen Tag zur angegebenen Uhrzeit statt.\r\n  </p>\r\n  <form [formGroup]=\"newSingleEventForm\" (ngSubmit)=\"addNewSingleEvent()\">\r\n    <div class=\"row\">\r\n      <div\r\n        class=\"col-12 col-md-4\"\r\n        [ngClass]=\"{ invalid: isInvalid(newSingleEventForm.controls.name) }\"\r\n      >\r\n        <label for=\"name\">Event-Name *</label>\r\n        <br />\r\n        <input\r\n          class=\"form-control\"\r\n          id=\"name\"\r\n          type=\"text\"\r\n          formControlName=\"name\"\r\n        />\r\n      </div>\r\n      <div\r\n        class=\"col-6 col-md-4\"\r\n        [ngClass]=\"{ invalid: isInvalid(newSingleEventForm.controls.date) }\"\r\n      >\r\n        <label for=\"date\">Termin *</label>\r\n        <br />\r\n        <input\r\n          class=\"form-control\"\r\n          id=\"date\"\r\n          type=\"date\"\r\n          formControlName=\"date\"\r\n          min=\"{{ today | date: 'yyyy-MM-dd' }}\"\r\n        />\r\n      </div>\r\n      <div\r\n        *ngIf=\"categories && categories.length > 0\"\r\n        class=\"col-6 col-md-4\"\r\n        [ngClass]=\"{\r\n          invalid: isInvalid(newSingleEventForm.controls.categoryId)\r\n        }\"\r\n      >\r\n        <label>Kategorie</label>\r\n        <br />\r\n        <select class=\"form-control\" formControlName=\"categoryId\">\r\n          <option *ngFor=\"let category of categories\" [ngValue]=\"category.id\">\r\n            {{ category.name }}\r\n          </option>\r\n        </select>\r\n      </div>\r\n      <div\r\n        class=\"col-6 col-md-4\"\r\n        [ngClass]=\"{ invalid: isInvalid(newSingleEventForm.controls.time) }\"\r\n      >\r\n        <label for=\"name\">Startzeit *</label>\r\n        <br />\r\n        <input\r\n          class=\"form-control\"\r\n          id=\"time\"\r\n          type=\"time\"\r\n          formControlName=\"time\"\r\n        />\r\n      </div>\r\n      <div\r\n        class=\"col-6 col-md-4\"\r\n        [ngClass]=\"{ invalid: isInvalid(newSingleEventForm.controls.maxSeats) }\"\r\n      >\r\n        <label for=\"maxSeats\">max. Teilnehmer *</label>\r\n        <br />\r\n        <input\r\n          class=\"form-control\"\r\n          id=\"maxSeats\"\r\n          type=\"number\"\r\n          formControlName=\"maxSeats\"\r\n          min=\"1\"\r\n        />\r\n      </div>\r\n      <div\r\n        class=\"col-6 col-md-4\"\r\n        [ngClass]=\"{\r\n          invalid: isInvalid(newSingleEventForm.controls.registrationOpenFrom)\r\n        }\"\r\n      >\r\n        <label for=\"registrationOpenFrom\">Anmeldung möglich ab</label>\r\n        <br />\r\n        <input\r\n          class=\"form-control\"\r\n          id=\"registrationOpenFrom\"\r\n          type=\"date\"\r\n          formControlName=\"registrationOpenFrom\"\r\n          min=\"{{ today | date: 'yyyy-MM-dd' }}\"\r\n        />\r\n      </div>\r\n      <div class=\"col-6 col-md-4\" *ngIf=\"orgMembers && orgMembers.length > 0\">\r\n        <!-- the list of users with role \"leader\" that have access to this event -->\r\n        <label>Nutzer mit Zugriff auf Teilnehmerdaten</label>\r\n        <div class=\"allowedMembersBox\">\r\n          <div\r\n            class=\"clickable\"\r\n            *ngFor=\"let user of orgMembers\"\r\n            [ngClass]=\"{\r\n              'text-secondary': !userIdsAllowedOnNewEvent.includes(user.id)\r\n            }\"\r\n            (click)=\"toggleUserOnNewEvent(user)\"\r\n          >\r\n            <i\r\n              class=\"fas mr-1\"\r\n              [ngClass]=\"{\r\n                'fa-check-circle': userIdsAllowedOnNewEvent.includes(user.id),\r\n                'fa-times-circle': !userIdsAllowedOnNewEvent.includes(user.id)\r\n              }\"\r\n            ></i>\r\n            {{ user.name }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 col-md-4\">\r\n        <button\r\n          class=\"btn btn-block btn-outline-success\"\r\n          type=\"submit\"\r\n          style=\"margin-top: 32px\"\r\n          [disabled]=\"operationOngoing\"\r\n        >\r\n          <loading *ngIf=\"operationOngoing\" textClass=\"text-success\"></loading>\r\n          Event erstellen\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n\r\n<!-- calendar view -->\r\n<div *ngIf=\"allEvents && view === VIEW.CALENDAR\">\r\n  <p>\r\n    <i class=\"fas mr-1 fa-info-circle\"></i> In der Kalenderansicht ist es nicht\r\n    möglich, Termine zu editieren oder löschen. Verwenden Sie hierzu bitte die\r\n    Listenansicht.\r\n  </p>\r\n  <calendar\r\n    [events]=\"allEvents\"\r\n    [tenant]=\"tenant\"\r\n    (eventClicked)=\"showEventParticipants($event, showParticipantsModal)\"\r\n    (statusToggled)=\"toggleDisabled($event)\"\r\n  ></calendar>\r\n</div>\r\n\r\n<!-- display on wide screens -->\r\n<div\r\n  class=\"w-100 d-none d-xl-block mt-3\"\r\n  style=\"overflow-x: auto\"\r\n  *ngIf=\"view === VIEW.LIST\"\r\n>\r\n  <table class=\"w-100\" *ngIf=\"uniqueEvents\">\r\n    <thead>\r\n      <tr>\r\n        <th style=\"width: 100px\">KW</th>\r\n        <th\r\n          style=\"min-width: 140px; width: 300px; text-align: center\"\r\n          *ngFor=\"let uniqueEvent of uniqueEvents\"\r\n        >\r\n          <h4>{{ uniqueEvent.displayName() }}</h4>\r\n          {{ uniqueEvent.displayTime() }}\r\n          <span\r\n            class=\"badge badge-plevents ml-2\"\r\n            *ngIf=\"uniqueEvent.categoryId\"\r\n          >\r\n            <i\r\n              class=\"fas mr-1 {{ categoryById(uniqueEvent.categoryId).icon }}\"\r\n              *ngIf=\"categoryById(uniqueEvent.categoryId).icon\"\r\n            ></i\r\n            >{{ categoryName(uniqueEvent.categoryId) }}</span\r\n          >\r\n        </th>\r\n      </tr>\r\n      <tr *ngIf=\"appService.hasRole(tenant.id, ROLE.ADMIN)\">\r\n        <th></th>\r\n        <th *ngFor=\"let uniqueEvent of uniqueEvents; let i = index\" class=\"p-2\">\r\n          <!-- only allow to change/delete events that are not in the past -->\r\n          <div class=\"row\" *ngIf=\"!lastEventOfSeries(uniqueEvent).isInPast()\">\r\n            <div\r\n              class=\"col-md-12\"\r\n              [ngClass]=\"{\r\n                'col-6': appService.hasRole(tenant.id, ROLE.OWNER),\r\n                'col-xl-6': appService.hasRole(tenant.id, ROLE.OWNER)\r\n              }\"\r\n            >\r\n              <button\r\n                class=\"btn btn-sm btn-block btn-outline-success\"\r\n                (click)=\"editSeriesEvent(uniqueEvent, editSeriesEventModal)\"\r\n                [disabled]=\"operationOngoing\"\r\n              >\r\n                <i class=\"fas mr-1 fa-edit\"></i>Ändern\r\n              </button>\r\n            </div>\r\n            <div class=\"col-6 col-md-12 col-xl-6\">\r\n              <button\r\n                *ngIf=\"appService.hasRole(tenant.id, ROLE.OWNER)\"\r\n                class=\"btn btn-sm btn-block btn-outline-danger\"\r\n                (click)=\"deleteEventSeries(i)\"\r\n                [disabled]=\"operationOngoing\"\r\n              >\r\n                <i class=\"fas mr-1 fa-trash-alt\"></i>Löschen\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor=\"let week of weeks\">\r\n        <td [ngClass]=\"{ currentCW: week.number === currentCW() }\">\r\n          {{ week.number }}\r\n          <small *ngIf=\"week.number === currentCW()\"\r\n            ><br />aktuelle Woche</small\r\n          >\r\n        </td>\r\n        <td\r\n          *ngFor=\"let event of week.events\"\r\n          class=\"greyedOut\"\r\n          [ngClass]=\"{\r\n            'happening': event,\r\n            'unavailable': event && event.takenSeats >= event.maxSeats,\r\n            'disabled': event && event.disabled,\r\n            'empty': event && event.takenSeats === 0,\r\n            'has-passed': event && event.isInPast()\r\n          }\"\r\n        >\r\n          <div\r\n            *ngIf=\"event\"\r\n            style=\"position: relative\"\r\n            [ngClass]=\"{\r\n              clickable:\r\n                event &&\r\n                (appService.hasRole(tenant.id, ROLE.ADMIN) ||\r\n                  appService.getCurrentUser().hasAccessToEvent(event))\r\n            }\"\r\n            (click)=\"showEventParticipants(event, showParticipantsModal)\"\r\n          >\r\n            {{ event.displayDate() }}<br />\r\n            <small>{{ event.takenSeats }} / {{ event.maxSeats }} </small\r\n            ><i\r\n              *ngIf=\"\r\n                appService.hasRole(tenant.id, ROLE.ADMIN) ||\r\n                appService.getCurrentUser().hasAccessToEvent(event)\r\n              \"\r\n              class=\"fas fa-file-pdf actionableIcon\"\r\n              (click)=\"downloadPdf($event, event)\"\r\n              title=\"Download Teilnehmerliste\"\r\n            ></i>\r\n            <small\r\n              class=\"stateToggler\"\r\n              [ngClass]=\"{ clickable: !event.isInPast() }\"\r\n              (click)=\"event.isInPast() || toggleDisabled(event, $event)\"\r\n            >\r\n              <i *ngIf=\"!event.disabled\">aktiv</i>\r\n              <i *ngIf=\"event.disabled\">inaktiv</i>\r\n            </small>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<!-- display on small screens -->\r\n<div class=\"d-xl-none mt-3\" *ngIf=\"uniqueEvents && view === VIEW.LIST\">\r\n  <div\r\n    class=\"card w-100 mb-3\"\r\n    *ngFor=\"let uniqueEvent of uniqueEvents; let i = index\"\r\n  >\r\n    <div class=\"card-header\">\r\n      <h4>{{ uniqueEvent.displayName() }}</h4>\r\n      {{ uniqueEvent.displayTime() }}\r\n      <span\r\n        class=\"badge badge-plevents float-right\"\r\n        *ngIf=\"uniqueEvent.categoryId\"\r\n      >\r\n        <i\r\n          class=\"fas mr-1 {{ categoryById(uniqueEvent.categoryId).icon }}\"\r\n          *ngIf=\"categoryById(uniqueEvent.categoryId).icon\"\r\n        ></i\r\n        >{{ categoryName(uniqueEvent.categoryId) }}</span\r\n      >\r\n    </div>\r\n    <div class=\"card-body\">\r\n      <button\r\n        class=\"btn btn-block btn-outline-secondary\"\r\n        type=\"button\"\r\n        data-toggle=\"collapse\"\r\n        [attr.data-target]=\"'#events-collapser-' + i\"\r\n        (click)=\"eventsOpened[i] = !eventsOpened[i]\"\r\n      >\r\n        <i class=\"fas fa-angle-down\" *ngIf=\"!eventsOpened[i]\"></i>\r\n        <i class=\"fas fa-angle-up\" *ngIf=\"eventsOpened[i]\"></i>\r\n        Events anzeigen\r\n      </button>\r\n      <div class=\"collapse\" [attr.id]=\"'events-collapser-' + i\">\r\n        <table class=\"w-100 mt-2\">\r\n          <thead>\r\n            <tr>\r\n              <th style=\"width: 30%\">KW</th>\r\n              <th style=\"width: 70%; text-align: center\">Event</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr *ngFor=\"let week of weeks\">\r\n              <td [ngClass]=\"{ currentCW: week.number === currentCW() }\">\r\n                {{ week.number }}\r\n                <small *ngIf=\"week.number === currentCW()\"\r\n                  ><br />aktuelle Woche</small\r\n                >\r\n              </td>\r\n              <td\r\n                *ngFor=\"\r\n                  let event of [\r\n                    searchEventByUniqueEvent(week.events, uniqueEvent)\r\n                  ]\r\n                \"\r\n                class=\"greyedOut\"\r\n                [ngClass]=\"{\r\n                  'happening': event,\r\n                  'unavailable': event && event.takenSeats >= event.maxSeats,\r\n                  'disabled': event && event.disabled,\r\n                  'empty': event && event.takenSeats === 0,\r\n                  'has-passed': event && event.isInPast()\r\n                }\"\r\n              >\r\n                <div\r\n                  *ngIf=\"event\"\r\n                  [ngClass]=\"{\r\n                    disabled: event.disabled,\r\n                    clickable:\r\n                      event &&\r\n                      (appService.hasRole(tenant.id, ROLE.ADMIN) ||\r\n                        appService.getCurrentUser().hasAccessToEvent(event))\r\n                  }\"\r\n                  style=\"position: relative\"\r\n                  (click)=\"showEventParticipants(event, showParticipantsModal)\"\r\n                >\r\n                  {{ event.displayDate() }}<br />\r\n                  <small>{{ event.takenSeats }} / {{ event.maxSeats }} </small\r\n                  ><i\r\n                    *ngIf=\"\r\n                      appService.hasRole(tenant.id, ROLE.ADMIN) ||\r\n                      appService.getCurrentUser().hasAccessToEvent(event)\r\n                    \"\r\n                    class=\"fas fa-file-pdf actionableIcon\"\r\n                    (click)=\"downloadPdf($event, event)\"\r\n                    title=\"Download Teilnehmerliste\"\r\n                  ></i>\r\n                  <small\r\n                    class=\"stateToggler\"\r\n                    [ngClass]=\"{ clickable: !event.isInPast() }\"\r\n                    (click)=\"event.isInPast() || toggleDisabled(event, $event)\"\r\n                  >\r\n                    <i *ngIf=\"!event.disabled\">aktiv</i>\r\n                    <i *ngIf=\"event.disabled\">inaktiv</i>\r\n                  </small>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <!-- only allow to change/delete events that are not in the past -->\r\n      <div class=\"row mt-2\" *ngIf=\"!lastEventOfSeries(uniqueEvent).isInPast()\">\r\n        <div\r\n          class=\"col-md-12\"\r\n          [ngClass]=\"{\r\n            'col-6': appService.hasRole(tenant.id, ROLE.OWNER),\r\n            'col-xl-6': appService.hasRole(tenant.id, ROLE.OWNER)\r\n          }\"\r\n        >\r\n          <button\r\n            class=\"btn btn-sm btn-block btn-outline-success\"\r\n            (click)=\"editSeriesEvent(uniqueEvent, editSeriesEventModal)\"\r\n            [disabled]=\"operationOngoing\"\r\n          >\r\n            <i class=\"fas mr-1 fa-edit\"></i>Ändern\r\n          </button>\r\n        </div>\r\n        <div class=\"col-6 col-md-12 col-xl-6\">\r\n          <button\r\n            *ngIf=\"appService.hasRole(tenant.id, ROLE.OWNER)\"\r\n            class=\"btn btn-sm btn-block btn-outline-danger\"\r\n            (click)=\"deleteEventSeries(i)\"\r\n            [disabled]=\"operationOngoing\"\r\n          >\r\n            <i class=\"fas mr-1 fa-trash-alt\"></i>Löschen\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- loading message -->\r\n<div\r\n  class=\"alert alert-secondary text-center\"\r\n  style=\"margin-top: 100px\"\r\n  *ngIf=\"!uniqueEvents\"\r\n>\r\n  <loading></loading>\r\n  Daten werden geladen...\r\n</div>\r\n\r\n<!-- modal to edit events -->\r\n<ng-template #editSeriesEventModal>\r\n  <div class=\"modal-header\">\r\n    <h4 class=\"modal-title pull-left\">Event bearbeiten</h4>\r\n    <button\r\n      type=\"button\"\r\n      class=\"close pull-right\"\r\n      aria-label=\"Close\"\r\n      (click)=\"modalRef.hide()\"\r\n    >\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div class=\"modal-body\">\r\n    <p>\r\n      Ändern Sie hier den Titel des Events, den Tag sowie die Uhrzeit beliebig\r\n      ab.\r\n    </p>\r\n    <p *ngIf=\"!eventBeingEdited.singleOccurence\">\r\n      Diese Änderung wirkt sich\r\n      <b>nur auf alle in der Zukunft liegenden</b> Events aus.\r\n    </p>\r\n    <form [formGroup]=\"editEventForm\">\r\n      <div class=\"row\">\r\n        <div\r\n          class=\"col-12 form-group\"\r\n          [ngClass]=\"{ invalid: isInvalid(editEventForm.controls.name) }\"\r\n        >\r\n          <label for=\"editEventName\">Event-Name</label>\r\n          <br />\r\n          <input\r\n            class=\"form-control\"\r\n            id=\"editEventName\"\r\n            type=\"text\"\r\n            formControlName=\"name\"\r\n          />\r\n        </div>\r\n        <div\r\n          class=\"col-12 form-group\"\r\n          *ngIf=\"!eventBeingEdited.singleOccurence\"\r\n        >\r\n          <label>Wochentag</label>\r\n          <br />\r\n          <div class=\"btn-group w-100\" btnRadioGroup formControlName=\"weekDay\">\r\n            <label class=\"btn btn-success\" [btnRadio]=\"1\">Mo</label>\r\n            <label class=\"btn btn-success\" [btnRadio]=\"2\">Di</label>\r\n            <label class=\"btn btn-success\" [btnRadio]=\"3\">Mi</label>\r\n            <label class=\"btn btn-success\" [btnRadio]=\"4\">Do</label>\r\n            <label class=\"btn btn-success\" [btnRadio]=\"5\">Fr</label>\r\n            <label class=\"btn btn-success\" [btnRadio]=\"6\">Sa</label>\r\n            <label class=\"btn btn-success\" [btnRadio]=\"7\">So</label>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-12 form-group\" *ngIf=\"eventBeingEdited.singleOccurence\">\r\n          <label for=\"date\">Datum</label>\r\n          <br />\r\n          <input\r\n            class=\"form-control\"\r\n            id=\"date\"\r\n            type=\"date\"\r\n            formControlName=\"date\"\r\n            min=\"{{ today | date: 'yyyy-MM-dd' }}\"\r\n          />\r\n        </div>\r\n        <div\r\n          *ngIf=\"categories && categories.length > 0\"\r\n          class=\"col-12 form-group\"\r\n          [ngClass]=\"{ invalid: isInvalid(editEventForm.controls.categoryId) }\"\r\n        >\r\n          <label>Kategorie</label>\r\n          <br />\r\n          <select class=\"form-control\" formControlName=\"categoryId\">\r\n            <option *ngFor=\"let category of categories\" [ngValue]=\"category.id\">\r\n              {{ category.name }}\r\n            </option>\r\n          </select>\r\n        </div>\r\n        <div\r\n          class=\"col-12 form-group\"\r\n          [ngClass]=\"{ invalid: isInvalid(editEventForm.controls.time) }\"\r\n        >\r\n          <label for=\"name\">Startzeit</label>\r\n          <br />\r\n          <input\r\n            class=\"form-control\"\r\n            id=\"time\"\r\n            type=\"time\"\r\n            formControlName=\"time\"\r\n          />\r\n        </div>\r\n        <div\r\n          class=\"col-12 form-group\"\r\n          [ngClass]=\"{ invalid: isInvalid(editEventForm.controls.maxSeats) }\"\r\n        >\r\n          <label for=\"maxSeats\">max. Teilnehmer</label>\r\n          <br />\r\n          <input\r\n            class=\"form-control\"\r\n            id=\"maxSeats\"\r\n            type=\"number\"\r\n            formControlName=\"maxSeats\"\r\n          />\r\n        </div>\r\n        <div\r\n          *ngIf=\"eventBeingEdited.singleOccurence\"\r\n          class=\"col-12 form-group\"\r\n          [ngClass]=\"{\r\n            invalid: isInvalid(editEventForm.controls.registrationOpenFrom)\r\n          }\"\r\n        >\r\n          <label for=\"registrationOpenFrom\">Anmeldung möglich ab</label>\r\n          <br />\r\n          <input\r\n            class=\"form-control\"\r\n            id=\"registrationOpenFrom\"\r\n            type=\"date\"\r\n            formControlName=\"registrationOpenFrom\"\r\n            min=\"{{ today | date: 'yyyy-MM-dd' }}\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <div class=\"modal-footer\">\r\n    <button\r\n      type=\"button\"\r\n      class=\"btn btn-outline-secondary\"\r\n      (click)=\"modalRef.hide()\"\r\n    >\r\n      Abbrechen\r\n    </button>\r\n    <button\r\n      type=\"button\"\r\n      class=\"btn btn-outline-success\"\r\n      (click)=\"updateEvents()\"\r\n      [disabled]=\"operationOngoing\"\r\n    >\r\n      <loading *ngIf=\"operationOngoing\" textClass=\"text-success\"></loading>\r\n      Speichern\r\n    </button>\r\n  </div>\r\n</ng-template>\r\n\r\n<!-- modal to display and edit participants -->\r\n<ng-template #showParticipantsModal>\r\n  <div class=\"modal-header\">\r\n    <h4 class=\"modal-title pull-left\">Teilnehmer</h4>\r\n    <button\r\n      type=\"button\"\r\n      class=\"close pull-right\"\r\n      aria-label=\"Close\"\r\n      (click)=\"modalRef.hide()\"\r\n    >\r\n      <span aria-hidden=\"true\">&times;</span>\r\n    </button>\r\n  </div>\r\n  <div class=\"modal-body\">\r\n    <p>\r\n      Nachfolgend sind alle bisher angemeldeten Teilnehmer zu\r\n      <b>{{ selectedEvent.name }}</b> am\r\n      <b>{{ selectedEvent.displayDate() }}</b> um\r\n      <b>{{ selectedEvent.displayTime(false) }} Uhr</b>\r\n      aufgeführt:\r\n    </p>\r\n    <ul class=\"list-group\" *ngIf=\"participants && participants.length > 0\">\r\n      <li\r\n        class=\"list-group-item sg-hoverable-list-item\"\r\n        *ngFor=\"let participant of participants\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"col-9\">\r\n            <div class=\"row\">\r\n              <div class=\"col-12 col-lg-6 col-xl-3\">\r\n                {{ participant.firstname + ' ' + participant.lastname }}\r\n              </div>\r\n              <div class=\"col-12 col-lg-6 col-xl-3\">\r\n                {{ participant.street }}<br />\r\n                {{ participant.zip }}, {{ participant.city }}\r\n              </div>\r\n              <div class=\"col-12 col-lg-6 col-xl-3\">\r\n                {{ participant.email }}\r\n              </div>\r\n              <div class=\"col-12 col-lg-6 col-xl-3\">\r\n                {{ participant.phone }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-danger\"\r\n              (click)=\"deleteParticipant(participant)\"\r\n              *ngIf=\"eventNotinPast()\"\r\n            >\r\n              <i class=\"fas fa-trash-alt\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    <div\r\n      class=\"alert alert-secondary\"\r\n      *ngIf=\"participants && participants.length === 0\"\r\n    >\r\n      Noch keine Teilnehmer zu dieser Aktivität.\r\n    </div>\r\n    <small *ngIf=\"!participants\">Teilnehmer werden geladen...</small>\r\n    <div class=\"alert alert-success mt-3 mb-1\" *ngIf=\"addParticipantSuccess\">\r\n      {{ addParticipantSuccess }}\r\n    </div>\r\n    <div *ngIf=\"eventNotinPast()\">\r\n      <form\r\n        [formGroup]=\"addParticipantForm\"\r\n        *ngIf=\"showAddParticipantForm\"\r\n        (ngSubmit)=\"addParticipant()\"\r\n      >\r\n        <div class=\"row\">\r\n          <div\r\n            class=\"col-6 col-md-4\"\r\n            [ngClass]=\"{ invalid: isInvalid('firstname') }\"\r\n          >\r\n            <label for=\"firstname\">Vorname</label>\r\n            <br />\r\n            <input\r\n              class=\"form-control\"\r\n              id=\"firstname\"\r\n              type=\"text\"\r\n              placeholder=\"Vorname des Teilnehmers\"\r\n              formControlName=\"firstname\"\r\n            />\r\n          </div>\r\n          <div\r\n            class=\"col-6 col-md-4\"\r\n            [ngClass]=\"{ invalid: isInvalid('lastname') }\"\r\n          >\r\n            <label for=\"lastname\">Nachname</label>\r\n            <br />\r\n            <input\r\n              class=\"form-control\"\r\n              id=\"lastname\"\r\n              type=\"text\"\r\n              placeholder=\"Nachname des Teilnehmers\"\r\n              formControlName=\"lastname\"\r\n            />\r\n          </div>\r\n          <div\r\n            class=\"col-6 col-md-4\"\r\n            [ngClass]=\"{ invalid: isInvalid('email') }\"\r\n          >\r\n            <label for=\"email\">Email</label>\r\n            <br />\r\n            <input\r\n              class=\"form-control\"\r\n              id=\"email\"\r\n              type=\"email\"\r\n              placeholder=\"Kontakt-Email Adresse\"\r\n              formControlName=\"email\"\r\n            />\r\n          </div>\r\n          <div\r\n            class=\"col-6 col-md-4\"\r\n            [ngClass]=\"{ invalid: isInvalid('phone') }\"\r\n          >\r\n            <label for=\"phone\">Telefonnummer</label>\r\n            <br />\r\n            <input\r\n              class=\"form-control\"\r\n              id=\"phone\"\r\n              type=\"phone\"\r\n              placeholder=\"Telefonnr für Rückfragen\"\r\n              formControlName=\"phone\"\r\n            />\r\n          </div>\r\n          <div\r\n            class=\"col-6 col-md-4\"\r\n            [ngClass]=\"{ invalid: isInvalid('street') }\"\r\n          >\r\n            <label for=\"street\">Adresse</label>\r\n            <br />\r\n            <input\r\n              class=\"form-control\"\r\n              id=\"street\"\r\n              type=\"text\"\r\n              placeholder=\"Straße & Hausnummer\"\r\n              formControlName=\"street\"\r\n            />\r\n          </div>\r\n          <div class=\"col-6 col-md-4\" [ngClass]=\"{ invalid: isInvalid('zip') }\">\r\n            <label for=\"zip\">PLZ</label>\r\n            <br />\r\n            <input\r\n              class=\"form-control\"\r\n              id=\"zip\"\r\n              type=\"text\"\r\n              placeholder=\"Postleitzahl\"\r\n              formControlName=\"zip\"\r\n            />\r\n          </div>\r\n          <div\r\n            class=\"col-6 col-md-4\"\r\n            [ngClass]=\"{ invalid: isInvalid('city') }\"\r\n          >\r\n            <label for=\"city\">Ort</label>\r\n            <br />\r\n            <input\r\n              class=\"form-control\"\r\n              id=\"city\"\r\n              type=\"text\"\r\n              placeholder=\"Wohnort\"\r\n              formControlName=\"city\"\r\n            />\r\n          </div>\r\n          <div class=\"col-6 col-md-4 offset-md-4\">\r\n            <button\r\n              class=\"btn btn-block btn-success\"\r\n              type=\"submit\"\r\n              style=\"margin-top: 32px\"\r\n              [disabled]=\"operationOngoing\"\r\n            >\r\n              <loading\r\n                *ngIf=\"operationOngoing\"\r\n                textClass=\"text-success\"\r\n              ></loading>\r\n              Zum Event hinzufügen\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <div class=\"text-right mt-2\" *ngIf=\"tenant && tenant.active\">\r\n        <button\r\n          type=\"button\"\r\n          *ngIf=\"!showAddParticipantForm\"\r\n          class=\"btn btn-sm btn-outline-success\"\r\n          (click)=\"showAddParticipantForm = true\"\r\n        >\r\n          Neuen Teilnehmer erfassen\r\n        </button>\r\n      </div>\r\n      <div\r\n        class=\"alert alert-warning d-flex flex-row\"\r\n        *ngIf=\"tenant && !tenant.active\"\r\n      >\r\n        <div style=\"width: 30px\">\r\n          <i class=\"fas fa-exclamation-triangle\"></i>\r\n        </div>\r\n        <div>\r\n          Diese Organisation ist derzeit noch <b>nicht</b> freigeschaltet.\r\n          Teilnehmer können daher noch nicht erfasst werden. Bitte kontaktieren\r\n          Sie den Support für Unterstützung:\r\n          <a href=\"mailto:stefan.strobel@s4-consulting.de\"\r\n            >stefan.strobel@s4-consulting.de</a\r\n          >\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"modal-footer\">\r\n    <button\r\n      type=\"button\"\r\n      class=\"btn btn-outline-secondary\"\r\n      (click)=\"modalRef.hide()\"\r\n    >\r\n      Schließen\r\n    </button>\r\n  </div>\r\n</ng-template>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'loading',\r\n  templateUrl: './loading.component.html',\r\n  styleUrls: ['./loading.component.scss'],\r\n})\r\nexport class LoadingComponent implements OnInit {\r\n  @Input()\r\n  textClass: string = '';\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {}\r\n}\r\n","<div class=\"spinner-border {{ textClass }}\" role=\"status\">\r\n  <span class=\"sr-only\"></span>\r\n</div>\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { AppService } from 'src/app/services/app.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { ROUTES } from '../../../../../common/frontend.routes';\r\n\r\n@Component({\r\n  selector: 'app-password-reset',\r\n  templateUrl: './password-reset.component.html',\r\n  styleUrls: ['./password-reset.component.scss'],\r\n})\r\nexport class PasswordResetComponent implements OnInit, OnDestroy {\r\n  private userSubscription: Subscription;\r\n  error: string;\r\n  loading: boolean = false;\r\n  submitted: boolean = false;\r\n  passwordForm: FormGroup = new FormGroup({\r\n    password: new FormControl('', Validators.required),\r\n  });\r\n  noCode: boolean = false;\r\n  passwordSet: boolean = false;\r\n  ROUTES = ROUTES;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private appService: AppService,\r\n    private userService: UserService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.userSubscription = this.appService.user.subscribe(user => {\r\n      if (user) {\r\n        this.router.navigate([`/${ROUTES.PROFILE}`]);\r\n      }\r\n    });\r\n    if (!this.route.snapshot.queryParams.code) {\r\n      this.noCode = true;\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.userSubscription) {\r\n      this.userSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  onSubmit(): void {\r\n    if (this.noCode) {\r\n      return;\r\n    }\r\n    if (this.passwordForm.invalid) {\r\n      this.passwordForm.markAllAsTouched();\r\n      return;\r\n    }\r\n    this.loading = true;\r\n    this.userService\r\n      .resetPassword(\r\n        this.route.snapshot.queryParams.code,\r\n        this.passwordForm.get('password').value\r\n      )\r\n      .subscribe(\r\n        () => {\r\n          this.passwordSet = true;\r\n        },\r\n        error => {\r\n          console.error(error);\r\n          this.error =\r\n            'Es trat ein technischer Fehler auf. Bitte versuchen Sie es später erneut.';\r\n        }\r\n      );\r\n  }\r\n}\r\n","<div class=\"row\">\r\n  <div class=\"col-12 col-md-8 offset-md-2 col-xl-4 offset-xl-4\">\r\n    <div class=\"card\">\r\n      <h4 class=\"card-header\">Passwort-Rücksetzung</h4>\r\n      <div class=\"card-body\">\r\n        <form\r\n          [formGroup]=\"passwordForm\"\r\n          (ngSubmit)=\"onSubmit()\"\r\n          *ngIf=\"!passwordSet\"\r\n        >\r\n          <div class=\"form-group\">\r\n            <label for=\"password\">Neues Passwort vergeben *</label>\r\n            <input\r\n              id=\"password\"\r\n              type=\"password\"\r\n              formControlName=\"password\"\r\n              class=\"form-control\"\r\n              [ngClass]=\"{\r\n                'is-invalid':\r\n                  passwordForm.get('password').invalid &&\r\n                  passwordForm.get('password').touched\r\n              }\"\r\n            />\r\n            <div\r\n              *ngIf=\"\r\n                passwordForm.get('password').errors &&\r\n                passwordForm.get('password').touched\r\n              \"\r\n              class=\"invalid-feedback\"\r\n            >\r\n              Bitte ein neues, gültiges Passwort eingeben\r\n            </div>\r\n          </div>\r\n          <div class=\"text-right\">\r\n            <button\r\n              [disabled]=\"loading || noCode\"\r\n              class=\"btn btn-success\"\r\n              style=\"margin-top: 32px\"\r\n            >\r\n              Neues Passwort setzen\r\n            </button>\r\n          </div>\r\n        </form>\r\n        <div *ngIf=\"error\" class=\"alert alert-danger text-center mt-3 mb-0\">\r\n          {{ error }}\r\n        </div>\r\n        <div *ngIf=\"noCode\" class=\"alert alert-warning text-center mt-3 mb-0\">\r\n          Sie haben diese Seite ohne Code aufgerufen. Sie gelangen\r\n          <a [routerLink]=\"['/' + ROUTES.LOGIN]\">zurück zur Loginseite</a>.\r\n        </div>\r\n        <div\r\n          *ngIf=\"passwordSet\"\r\n          class=\"alert alert-success text-center mt-3 mb-0\"\r\n        >\r\n          Das neue Passwort wurde gespeichert. Bitte gehen Sie\r\n          <a [routerLink]=\"['/' + ROUTES.LOGIN]\">zur Loginseite</a> und melden\r\n          Sie sich an.\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { UserAdapter, User } from '../models/user';\r\nimport { Observable } from 'rxjs';\r\nimport { environment } from '../../environments/environment';\r\nimport { map } from 'rxjs/operators';\r\nimport { UserI } from '../../../../common/user';\r\nimport { ROLE } from '../../../../common/tenant-relation';\r\nimport { Invitation, InvitationAdapter } from '../models/invitation';\r\nimport { EventRelation, EventRelationAdapter } from '../models/event-relation';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class UserService {\r\n  constructor(\r\n    private http: HttpClient,\r\n    private userAdapter: UserAdapter,\r\n    private invitationAdapter: InvitationAdapter,\r\n    private eventRelationAdapter: EventRelationAdapter\r\n  ) {}\r\n\r\n  register(user: UserI, tenantPath?: string): Observable<User> {\r\n    const payload = Object.assign({}, user) as any;\r\n    if (tenantPath) {\r\n      payload.tenantPath = tenantPath;\r\n    }\r\n    return this.http.post(`${environment.apiUrl}/profile`, payload).pipe(\r\n      // Adapt the raw item\r\n      map(item => this.userAdapter.adapt(item))\r\n    );\r\n  }\r\n\r\n  finishRegistration(code: string): Observable<any> {\r\n    return this.http.post(\r\n      `${environment.apiUrl}/profile/activate/${code}`,\r\n      null\r\n    );\r\n  }\r\n\r\n  removeFromTenant(tenantId: string, userId: string): Observable<any> {\r\n    return this.http.delete(\r\n      `${environment.apiUrl}/secure/tenants/${tenantId}/users/${userId}`\r\n    );\r\n  }\r\n\r\n  setRole(tenantId: string, userId: string, role: ROLE): Observable<User> {\r\n    return this.http\r\n      .put(\r\n        `${environment.apiUrl}/secure/tenants/${tenantId}/users/${userId}/role/${role}`,\r\n        null\r\n      )\r\n      .pipe(\r\n        // Adapt the raw item\r\n        map(item => this.userAdapter.adapt(item))\r\n      );\r\n  }\r\n\r\n  activate(tenantId: string, userId: string): Observable<User> {\r\n    return this.http\r\n      .put(\r\n        `${environment.apiUrl}/secure/tenants/${tenantId}/users/${userId}/active/true`,\r\n        null\r\n      )\r\n      .pipe(\r\n        // Adapt the raw item\r\n        map(item => this.userAdapter.adapt(item))\r\n      );\r\n  }\r\n\r\n  deactivate(tenantId: string, userId: string): Observable<User> {\r\n    return this.http\r\n      .put(\r\n        `${environment.apiUrl}/secure/tenants/${tenantId}/users/${userId}/active/false`,\r\n        null\r\n      )\r\n      .pipe(\r\n        // Adapt the raw item\r\n        map(item => this.userAdapter.adapt(item))\r\n      );\r\n  }\r\n\r\n  getProfile(): Observable<User> {\r\n    return this.http.get(`${environment.apiUrl}/secure/profile`).pipe(\r\n      // Adapt the raw item\r\n      map(item => this.userAdapter.adapt(item))\r\n    );\r\n  }\r\n\r\n  updateProfile(user: User): Observable<User> {\r\n    return this.http.put(`${environment.apiUrl}/secure/profile`, user).pipe(\r\n      // Adapt the raw item\r\n      map(item => this.userAdapter.adapt(item))\r\n    );\r\n  }\r\n\r\n  updatePassword(oldPassword: string, newPassword: string): Observable<any> {\r\n    return this.http.put(`${environment.apiUrl}/secure/profile/password`, {\r\n      oldPassword,\r\n      newPassword,\r\n    });\r\n  }\r\n\r\n  initiatePasswordReset(email: string): Observable<any> {\r\n    return this.http.post(`${environment.apiUrl}/forgotten-password`, {\r\n      email,\r\n    });\r\n  }\r\n\r\n  resetPassword(code: string, password: string): Observable<any> {\r\n    return this.http.post(`${environment.apiUrl}/forgotten-password/${code}`, {\r\n      password,\r\n    });\r\n  }\r\n\r\n  deleteProfile(): Observable<any> {\r\n    return this.http.delete(`${environment.apiUrl}/secure/profile`);\r\n  }\r\n\r\n  getPendingInvitations(): Observable<Invitation[]> {\r\n    return this.http.get(`${environment.apiUrl}/secure/invitations`).pipe(\r\n      // Adapt the raw items\r\n      map((data: any[]) => data.map(item => this.invitationAdapter.adapt(item)))\r\n    );\r\n  }\r\n\r\n  declineInvitation(tenantId: string): Observable<any> {\r\n    return this.http.delete(\r\n      `${environment.apiUrl}/secure/invitations/${tenantId}`\r\n    );\r\n  }\r\n\r\n  acceptInvitation(invitationId: string): Observable<any> {\r\n    return this.http.post(\r\n      `${environment.apiUrl}/secure/invitations/${invitationId}`,\r\n      null\r\n    );\r\n  }\r\n\r\n  allowAccessToEvent(\r\n    tenantId: string,\r\n    userId: string,\r\n    eventId: string\r\n  ): Observable<EventRelation> {\r\n    return this.http\r\n      .post(\r\n        `${environment.apiUrl}/secure/tenants/${tenantId}/users/${userId}/event/${eventId}`,\r\n        null\r\n      )\r\n      .pipe(map(item => this.eventRelationAdapter.adapt(item)));\r\n  }\r\n\r\n  denyAccessToEvent(\r\n    tenantId: string,\r\n    userId: string,\r\n    eventId: string\r\n  ): Observable<any> {\r\n    return this.http.delete(\r\n      `${environment.apiUrl}/secure/tenants/${tenantId}/users/${userId}/event/${eventId}`\r\n    );\r\n  }\r\n\r\n  allowAccessToEventSeries(\r\n    tenantId: string,\r\n    userId: string,\r\n    eventSeriesId: string\r\n  ): Observable<EventRelation> {\r\n    return this.http\r\n      .post(\r\n        `${environment.apiUrl}/secure/tenants/${tenantId}/users/${userId}/eventSeries/${eventSeriesId}`,\r\n        null\r\n      )\r\n      .pipe(map(item => this.eventRelationAdapter.adapt(item)));\r\n  }\r\n\r\n  denyAccessToEventSeries(\r\n    tenantId: string,\r\n    userId: string,\r\n    eventSeriesId: string\r\n  ): Observable<any> {\r\n    return this.http.delete(\r\n      `${environment.apiUrl}/secure/tenants/${tenantId}/users/${userId}/eventSeries/${eventSeriesId}`\r\n    );\r\n  }\r\n\r\n  loadEventsWithAccessTo(): Observable<EventRelation[]> {\r\n    return this.http.get(`${environment.apiUrl}/secure/event-relations`).pipe(\r\n      // Adapt the raw items\r\n      map((data: any[]) =>\r\n        data.map(item => this.eventRelationAdapter.adapt(item))\r\n      )\r\n    );\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { reject } from 'lodash';\r\nimport { Invitation } from 'src/app/models/invitation';\r\nimport { TenantRelation } from 'src/app/models/tenant-relation';\r\nimport { AppService } from 'src/app/services/app.service';\r\nimport { NotificationService } from 'src/app/services/notification.service';\r\nimport { TenantService } from 'src/app/services/tenant.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { ROUTES } from '../../../../../common/frontend.routes';\r\n\r\n@Component({\r\n  selector: 'app-my-accounts',\r\n  templateUrl: './my-accounts.component.html',\r\n  styleUrls: ['./my-accounts.component.scss'],\r\n})\r\nexport class MyAccountsComponent implements OnInit {\r\n  tenantRelations: TenantRelation[] = null;\r\n  invitations: Invitation[] = null;\r\n  ROUTES = ROUTES;\r\n\r\n  constructor(\r\n    private tenantService: TenantService,\r\n    private userService: UserService,\r\n    private appService: AppService,\r\n    private notification: NotificationService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadTenantsAndInvitations();\r\n  }\r\n\r\n  loadTenantsAndInvitations(): void {\r\n    this.tenantRelations = null;\r\n    this.invitations = null;\r\n    this.tenantService\r\n      .getAll()\r\n      .subscribe((tenantRelations: TenantRelation[]) => {\r\n        this.tenantRelations = tenantRelations;\r\n      });\r\n    this.userService\r\n      .getPendingInvitations()\r\n      .subscribe((invitations: Invitation[]) => {\r\n        this.invitations = invitations;\r\n      });\r\n  }\r\n\r\n  detach(tenantRelation: TenantRelation): void {\r\n    this.notification.confirm({\r\n      title: 'Von Organisation trennen?',\r\n      text: 'Möchten Sie sich wirklich von dieser Organisation trennen?',\r\n      yesButtonClass: 'btn-danger',\r\n      yesButtonText: 'Ja',\r\n      yesCallback: () => {\r\n        this.userService\r\n          .removeFromTenant(tenantRelation.tenantId, tenantRelation.userId)\r\n          .subscribe(\r\n            () => {\r\n              this.notification.success(\r\n                'Sie haben sich von Organisation \"' +\r\n                  tenantRelation.tenant.name +\r\n                  '\" getrennt'\r\n              );\r\n              if (\r\n                this.appService.getCurrentTenant() &&\r\n                this.appService.getCurrentTenant().id ===\r\n                  tenantRelation.tenantId\r\n              ) {\r\n                this.appService.setCurrentTenant(null);\r\n              }\r\n              this.tenantRelations = reject(\r\n                this.tenantRelations,\r\n                tenantRelation\r\n              );\r\n            },\r\n            error => {\r\n              if (error === 'Conflict') {\r\n                this.notification.success(\r\n                  'Sie sind der einzige Administrator für diese Organisation und können sich daher nicht von ihr trennen'\r\n                );\r\n              } else {\r\n                this.notification.error('Es trat ein Fehler auf');\r\n              }\r\n            }\r\n          );\r\n      },\r\n    });\r\n  }\r\n\r\n  join(invitation: Invitation): void {\r\n    this.userService.acceptInvitation(invitation.id).subscribe(\r\n      (tenantRelation: TenantRelation) => {\r\n        this.loadTenantsAndInvitations();\r\n        this.notification.success('Accout beigetreten');\r\n      },\r\n      error => {\r\n        console.error(error);\r\n        this.notification.error('Es trat ein Fehler auf');\r\n      }\r\n    );\r\n  }\r\n\r\n  decline(invitation: Invitation): void {\r\n    this.notification.confirm({\r\n      title: 'Einladung ablehnen?',\r\n      text: 'Möchten Sie die Einladung wirklich ablehnen?',\r\n      yesButtonClass: 'btn-danger',\r\n      yesButtonText: 'Ja',\r\n      yesCallback: () => {\r\n        this.userService.declineInvitation(invitation.tenantId).subscribe(\r\n          () => {\r\n            this.notification.success('Einladung abgelehnt');\r\n            this.invitations = reject(this.invitations, invitation);\r\n          },\r\n          error => {\r\n            console.error(error);\r\n            this.notification.error('Es trat ein Fehler auf');\r\n          }\r\n        );\r\n      },\r\n    });\r\n  }\r\n}\r\n","<h2>Meine Organisationen</h2>\r\n\r\n<div class=\"row\">\r\n  <div class=\"col-12\">\r\n    <p>\r\n      Behalten Sie den Überblick über die mit Ihnen verbundenen Organisation.\r\n    </p>\r\n    <p class=\"float-left\">\r\n      Die folgende Übersicht listet alle Organisationen auf, denen Sie\r\n      zugeordnet sind.\r\n    </p>\r\n  </div>\r\n  <div class=\"col-12 col-lg-6\">\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <div class=\"row\">\r\n          <div class=\"col-12\">\r\n            <a\r\n              class=\"btn float-right btn-sm btn-outline-success mb-2\"\r\n              [routerLink]=\"['/' + ROUTES.REGISTER_TENANT]\"\r\n            >\r\n              Neue Organisation anlegen\r\n            </a>\r\n          </div>\r\n        </div>\r\n\r\n        <ul\r\n          class=\"list-group mt-3\"\r\n          *ngIf=\"\r\n            (tenantRelations && tenantRelations.length > 0) ||\r\n            (invitations && invitations.length > 0)\r\n          \"\r\n        >\r\n          <li\r\n            class=\"list-group-item sg-hoverable-list-item\"\r\n            *ngFor=\"let tenantRelation of tenantRelations\"\r\n          >\r\n            <i\r\n              class=\"fas fa-power-off mr-2\"\r\n              [ngClass]=\"{\r\n                'text-success': tenantRelation.tenant.active,\r\n                'text-secondary': !tenantRelation.tenant.active\r\n              }\"\r\n              title=\"{{\r\n                tenantRelation.tenant.active\r\n                  ? 'Organisation ist aktiv'\r\n                  : 'Organisation ist inaktiv'\r\n              }}\"\r\n            ></i>\r\n            <a\r\n              *ngIf=\"tenantRelation.active\"\r\n              [routerLink]=\"[\r\n                '/' + ROUTES.TENANT_PREFIX,\r\n                tenantRelation.tenant.path,\r\n                tenantRelation.isAdmin()\r\n                  ? ROUTES.TENANT_MANAGEMENT\r\n                  : ROUTES.TENANT_PLANNER\r\n              ]\"\r\n              >{{ tenantRelation.tenant.name }}<br /><small\r\n                >/{{ tenantRelation.tenant.path }}</small\r\n              ></a\r\n            >\r\n            <span *ngIf=\"!tenantRelation.active\"\r\n              >{{ tenantRelation.tenant.name }}<br /><small\r\n                >/{{ tenantRelation.tenant.path }}</small\r\n              ></span\r\n            >\r\n            <button\r\n              class=\"float-right btn btn-sm ml-2 btn-outline-danger\"\r\n              (click)=\"detach(tenantRelation)\"\r\n            >\r\n              von Organisation trennen\r\n            </button>\r\n            <span\r\n              class=\"badge badge-warning mt-2 float-right\"\r\n              *ngIf=\"!tenantRelation.active\"\r\n            >\r\n              noch nicht zugelassen\r\n            </span>\r\n            <span\r\n              class=\"badge mt-2 float-right\"\r\n              *ngIf=\"tenantRelation.active\"\r\n              [ngClass]=\"{\r\n                'badge-success':\r\n                  tenantRelation.isAdmin() && !tenantRelation.isOwner(),\r\n                'badge-primary': tenantRelation.isOwner(),\r\n                'badge-secondary':\r\n                  !tenantRelation.isAdmin() && !tenantRelation.isOwner()\r\n              }\"\r\n            >\r\n              <span *ngIf=\"tenantRelation.isOwner()\"\r\n                ><i class=\"fas fa-crown\"></i> Owner</span\r\n              >\r\n              <span\r\n                *ngIf=\"tenantRelation.isAdmin() && !tenantRelation.isOwner()\"\r\n                >Admin</span\r\n              >\r\n              <span\r\n                *ngIf=\"!tenantRelation.isAdmin() && !tenantRelation.isOwner()\"\r\n                >Leiter</span\r\n              >\r\n            </span>\r\n          </li>\r\n          <li\r\n            class=\"list-group-item sg-hoverable-list-item\"\r\n            *ngFor=\"let invitation of invitations\"\r\n          >\r\n            {{ invitation.tenant.name }}<br /><small\r\n              >/{{ invitation.tenant.path }}</small\r\n            >\r\n            <button\r\n              class=\"float-right btn btn-sm ml-2 btn-outline-danger\"\r\n              (click)=\"decline(invitation)\"\r\n            >\r\n              Einladung ablehnen\r\n            </button>\r\n            <button\r\n              class=\"float-right btn btn-sm ml-2 btn-outline-success\"\r\n              (click)=\"join(invitation)\"\r\n            >\r\n              Organisation beitreten\r\n            </button>\r\n          </li>\r\n        </ul>\r\n        <div\r\n          class=\"alert alert-secondary\"\r\n          *ngIf=\"\r\n            tenantRelations &&\r\n            tenantRelations.length === 0 &&\r\n            invitations &&\r\n            invitations.length === 0\r\n          \"\r\n        >\r\n          Sie sind noch keiner Organisation zugeordnet. Möchten Sie einen\r\n          <a [routerLink]=\"['/' + ROUTES.REGISTER_TENANT]\"\r\n            >neue Organisation erstellen</a\r\n          >?\r\n        </div>\r\n        <div class=\"alert alert-light\" *ngIf=\"!tenantRelations\">\r\n          <loading></loading>\r\n          Organisationen werden geladen ...\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ROUTES } from '../../../../../common/frontend.routes';\r\nimport Viewer from 'viewerjs';\r\n\r\n@Component({\r\n  selector: 'app-intro',\r\n  templateUrl: './intro.component.html',\r\n  styleUrls: ['./intro.component.scss'],\r\n})\r\nexport class IntroComponent implements OnInit {\r\n  ROUTES = ROUTES;\r\n\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {\r\n    const gallery = new Viewer(document.getElementById('imageGallery'), {\r\n      toolbar: false,\r\n      movable: false,\r\n    });\r\n  }\r\n\r\n  scrollToElement(elementId: string): void {\r\n    document.getElementById(elementId).scrollIntoView({\r\n      behavior: 'smooth',\r\n      block: 'start',\r\n      inline: 'nearest',\r\n    });\r\n  }\r\n\r\n  showImage(imageID: string): void {\r\n    const viewer = new Viewer(document.getElementById(imageID), {\r\n      inline: false,\r\n      navbar: false,\r\n      toolbar: false,\r\n    });\r\n  }\r\n}\r\n","<h1>Willkommen bei <span class=\"highlighted\">plevents</span></h1>\r\n\r\n<a class=\"jump-to\" (click)=\"scrollToElement('about')\"\r\n  >Über <span class=\"highlighted\">plevents</span></a\r\n>\r\n<a class=\"jump-to\" (click)=\"scrollToElement('benefits')\">Vorteile</a>\r\n<a class=\"jump-to\" (click)=\"scrollToElement('howitworks')\">Funktionsweise</a>\r\n<a class=\"jump-to\" (click)=\"scrollToElement('demo')\">Demo</a>\r\n<a class=\"jump-to\" (click)=\"scrollToElement('price')\">Preis</a>\r\n<a class=\"jump-to\" (click)=\"scrollToElement('contract')\">Vertragslaufzeit</a>\r\n<a class=\"jump-to\" (click)=\"scrollToElement('faq')\">Häufige Fragen</a>\r\n<hr />\r\n<h2 id=\"about\">Über <span class=\"highlighted\">plevents</span></h2>\r\n<p>\r\n  Mit <span class=\"highlighted\">plevents</span> lassen sich Teilnehmer bei\r\n  Veranstaltungen kinderleicht verwalten.\r\n  <span class=\"highlighted\">plevents</span> stellt hierfür eine Plattform\r\n  bereit, über die Sie Events veröffentlichen, zu denen sich dann Teilnehmer\r\n  anmelden können.\r\n</p>\r\n<p>\r\n  Aufgrund der aktuellen Corona-Lage müssen dabei bestimmte Regelungen\r\n  eingehalten werden. <span class=\"highlighted\">plevents</span> unterstützt Sie\r\n  hier. Teilnehmer müssen bei der Anmeldung ihren Namen sowie Adress- und\r\n  Kontaktdaten hinterlegen. Diese Daten werden sicher gespeichert und\r\n  DSGVO-konform nach 4 Wochen automatisch gelöscht. Nur die für die\r\n  Verantstaltung verantwortlichen Personen haben Zugriff auf die Daten.\r\n</p>\r\n<p>\r\n  <b\r\n    >Damit findet <span class=\"highlighted\">plevents</span> eine gute Balance\r\n    zwischen lästiger Datenerfassung auf der einen und Sorge um Datenschutz auf\r\n    der anderen Seite.</b\r\n  >\r\n</p>\r\n<a [routerLink]=\"['/' + ROUTES.REGISTER_USER]\" class=\"btn btn-success\">\r\n  <i class=\"fas fa-chevron-right\" style=\"color: inherit\"></i>\r\n  Jetzt kostenlos registrieren und alle Funktionen testen\r\n</a>\r\n<hr />\r\n<h2 id=\"benefits\">Vorteile</h2>\r\n<p>\r\n  <span class=\"highlighted\">plevents</span> wurde speziell entwickelt, um\r\n  Anmelde- und Registrierprozesse für Events abzubilden. Der Fokus liegt dabei\r\n  auf sich wiederholenden, regelmäßig stattfindenen Events wie z.B. ein\r\n  wöchentlicher Volleyball-Kurs. <span class=\"highlighted\">plevents</span>\r\n  eignet sich aber auch hervorragend für die Verwaltung von kleinen und großen\r\n  Einzelevents:\r\n</p>\r\n\r\n<div class=\"row\">\r\n  <div class=\"col-12 col-lg-8 offset-lg-2\">\r\n    <ul class=\"no-bullets\">\r\n      <li>\r\n        <div class=\"row\">\r\n          <div class=\"col-3 text-center align-items-center d-flex\">\r\n            <i class=\"flex-grow-1 fas fa-lock fa-3x\"></i>\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <h6>Datenschutz</h6>\r\n            <p>\r\n              In Zeiten digitaler Datenkraken ist es wichtiger denn je,\r\n              persönliche Daten zu schützen.\r\n            </p>\r\n            <p>\r\n              Ein Grundsatz von <span class=\"highlighted\">plevents</span> daher:\r\n              Sichere Datenspeicherung und garantierte Datenlöschung nach\r\n              DSGVO-Standard. Eine Weitergabe oder sonstige Verarbeitung der\r\n              personenbezogenen Daten findet <b>nicht</b> statt.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li>\r\n        <div class=\"row\">\r\n          <div class=\"col-3 text-center align-items-center d-flex\">\r\n            <i class=\"flex-grow-1 fas fa-lightbulb fa-3x\"></i>\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <h6>Einfachheit</h6>\r\n            <p>\r\n              Die Prozesse von\r\n              <span class=\"highlighted\">plevents</span> verfolgen ein Ziel:\r\n              Einfachheit. Daher ist es sehr einfach, ein Einzelevent oder eine\r\n              Eventserie anzulegen. Und genauso einfach ist es, sich als\r\n              Teilnehmer zu einem Event anzumelden.\r\n              <span class=\"highlighted\">plevents</span>.de aufrufen, Event\r\n              wählen, Teilnehmerdaten eintragen, fertig!\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li>\r\n        <div class=\"row\">\r\n          <div class=\"col-3 text-center align-items-center d-flex\">\r\n            <i class=\"flex-grow-1 fas fa-euro-sign fa-3x\"></i>\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <h6>Preis</h6>\r\n            <p>\r\n              <span class=\"highlighted\">plevents</span> bietet viel - und das zu\r\n              einem sehr niedrigen Preis. Die Monatsgebühr liegt bei lediglich\r\n              15€ zzgl. gesetzlicher Mehrwertsteuer. Somit kostet\r\n              <span class=\"highlighted\">plevents</span> gerade einmal\r\n              <b>50 ct pro Tag</b>.\r\n            </p>\r\n            <p>\r\n              <b>Und das Beste:</b> Für Vereine und kirchliche Organisationen\r\n              können die Kosten für\r\n              <span class=\"highlighted\">plevents</span> (nach Prüfung) nochmals\r\n              deutlich sinken. Informieren Sie sich vollkommen unverbindlich,\r\n              eine Mail an\r\n              <a href=\"mailto:stefan.strobel@s4-consulting.de\"\r\n                >stefan.strobel@s4-consulting.de</a\r\n              >\r\n              genügt.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li>\r\n        <div class=\"row\">\r\n          <div class=\"col-3 text-center align-items-center d-flex\">\r\n            <i class=\"flex-grow-1 fas fa-calendar-alt fa-3x\"></i>\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <h6>Anwendungsmöglichkeiten</h6>\r\n            <p>\r\n              Mit <span class=\"highlighted\">plevents</span> kann man vielerlei\r\n              Arten von Events verwalten. Dies fängt bei einer wöchentlichen\r\n              Veranstaltung im Verein an, geht über einmalige Events wie\r\n              Konzerte bis hin zur Erfassung von Restaurant-Besuchern.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li>\r\n        <div class=\"row\">\r\n          <div class=\"col-3 text-center align-items-center d-flex\">\r\n            <i class=\"flex-grow-1 fas fa-tools fa-3x\"></i>\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <h6>Anpassbarkeit</h6>\r\n            <p>\r\n              Bei <span class=\"highlighted\">plevents</span> sind Events einer\r\n              Organisation zugeordnet. Eine Organisation bezeichnet einen\r\n              Verein, eine soziale Einrichtung oder ein Unternehmen. Alle Events\r\n              einer Organisation sind über eine eindeutige URL aufrufbar. Und\r\n              Sie können die URL selbst bestimmen!\r\n            </p>\r\n            <p>\r\n              Sollten Sie also Events für den Tennis Club Musterhausen verwalten\r\n              wollen, können Sie die URL\r\n              https://plevents.de/o/tennis-club-musterhausen festlegen -\r\n              vorausgesetzt, Ihnen ist noch niemand zuvorgekommen.\r\n            </p>\r\n            <p>\r\n              Neben einer schön lesbaren URL können Sie außerdem Ihr Logo\r\n              hinterlegen und sogar die Schriftfarbe anpassen, damit das\r\n              Erscheinungsbild perfekt zu Ihrer Organisation passt.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li>\r\n        <div class=\"row\">\r\n          <div class=\"col-3 text-center align-items-center d-flex\">\r\n            <i class=\"flex-grow-1 fas fa-universal-access fa-3x\"></i>\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <h6>Vielfalt</h6>\r\n            <p>\r\n              Sie sind in mehreren Vereinen aktiv und möchten dort jeweils\r\n              Termine verwalten? Kein Problem. Bei\r\n              <span class=\"highlighted\">plevents</span> können Sie mit Ihrem\r\n              persönlichen Nutzerprofil mehrere Organisationen verwalten.\r\n            </p>\r\n            <p>\r\n              Sie können zudem weitere Mitglieder nominieren, um bei der Planung\r\n              und Durchführung der Events zu helfen. Das verteilt die Last auf\r\n              mehrere Schultern und Sie können dieselbe Anwendung für\r\n              verschiedene Vereine, Unternehmen oder Organisationen verwenden.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li>\r\n        <div class=\"row\">\r\n          <div class=\"col-3 text-center align-items-center d-flex\">\r\n            <i class=\"flex-grow-1 fas fa-smile-beam fa-3x\"></i>\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <h6>Weniger Stress</h6>\r\n            <p>\r\n              Die Teilnehmer können sich selbst zu den Events anmelden,\r\n              zeitaufwändige Telefonanrufe oder Anmelde-Emails gehören damit der\r\n              Vergangenheit an.\r\n            </p>\r\n            <p>\r\n              Aber auch als Teilnehmer wird das Leben einfacher. Dank\r\n              Vorbefüllung kann die Anmeldung zum nächsten Event in\r\n              Sekundenschnelle erfolgen.\r\n            </p>\r\n            <p>\r\n              Und aufgrund der digitalen Funktionsweise gehört lästiger\r\n              Papierkram der Vergangenheit an!\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</div>\r\n\r\n<hr />\r\n<h2 id=\"howitworks\">Funktionsweise</h2>\r\n<p>\r\n  Die Verwendung von <span class=\"highlighted\">plevents</span> ist denkbar\r\n  einfach. Das Erstellen eines Events oder auch eines Serienevents bis\r\n  Jahresende dauert in der Regel 2 Minuten. Die Anmeldung als Teilnehmer ist\r\n  nach Auswahl der passenden Veranstaltung und Eingabe der persönlichen Daten\r\n  ebenfalls innerhalb von wenigen Momenten erledigt:\r\n</p>\r\n<div class=\"row\">\r\n  <div class=\"col-12 col-lg-8 offset-lg-2\">\r\n    <ul class=\"no-bullets\">\r\n      <li>\r\n        <div class=\"row\">\r\n          <div class=\"col-3 text-center align-items-center d-flex bold\">\r\n            <h4 class=\"flex-grow-1\">Schritt 1</h4>\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <p>\r\n              In der Verwaltung von\r\n              <span class=\"highlighted\">plevents</span> legen Sie ein neues\r\n              Event an. Entweder als Einzelveranstaltung oder als Serienevent.\r\n              Serienevents finden wöchentlich zur gleichen Uhrzeit statt.\r\n            </p>\r\n            <p>\r\n              Sie legen für das Event ein (Start-)Datum, eine Uhrzeit, die\r\n              maximale Teilnehmerzahl und einen aussagekräftigen Namen fest.\r\n            </p>\r\n            <p><b>Das wars!</b> Das Event ist sofort freigeschaltet.</p>\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li>\r\n        <div class=\"row\">\r\n          <div class=\"col-3 text-center align-items-center d-flex bold\">\r\n            <h4 class=\"flex-grow-1\">Schritt 2</h4>\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <p>\r\n              Teilnehmer können sich online selbst anmelden. Dabei wird die von\r\n              Ihnen gesetzte maximale Teilnehmerzahl berücksichtigt.\r\n            </p>\r\n            <p>\r\n              Bei Serienevents zeigt\r\n              <span class=\"highlighted\">plevents</span> nur die Veranstaltungen\r\n              in der aktuellen und nächsten Woche. Das dient der\r\n              Übersichtlichkeit und der Aktualität der Daten.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li>\r\n        <div class=\"row\">\r\n          <div class=\"col-3 text-center align-items-center d-flex bold\">\r\n            <h4 class=\"flex-grow-1\">Schritt 3</h4>\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <p>\r\n              Dieser Schritt ist optional. Im Vorfeld oder Nachgang des Events\r\n              können Sie die Teilnehmerliste online einsehen oder als PDF\r\n              herunterladen.\r\n            </p>\r\n            <p>\r\n              Damit können Sie z.B. die Teilnehmer vor Ort abhaken oder - auch\r\n              wenn das niemand hofft - nach einem positiven Corona-Fall die\r\n              anderen Teilnehmer verständigen.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li>\r\n        <div class=\"row\">\r\n          <div class=\"col-3 text-center align-items-center d-flex bold\">\r\n            <h4 class=\"flex-grow-1\">Schritt 4</h4>\r\n          </div>\r\n          <div class=\"col-9\">\r\n            <p>Hier müssen Sie nichts weiter tun.</p>\r\n            <p>\r\n              <span class=\"highlighted\">plevents</span> wird automatisch 4\r\n              Wochen nach der Veranstaltung alle Teilnehmerdaten automatisch\r\n              löschen. DSGVO-konform - aber einfach.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</div>\r\n\r\n<hr />\r\n<h2 id=\"demo\">Demo</h2>\r\n<p>\r\n  Sie können sich gerne das Frontend für Teilnehmer anschauen. Unter\r\n  <a href=\"https://plevents.de/o/demo\" target=\"_blank\"\r\n    >https://plevents.de/o/demo</a\r\n  >\r\n  sehen Sie einige Test-Events. Dort können Sie erleben, wie einfach die\r\n  Registrierung als Teilnehmer zu einer Veranstaltung ist.\r\n</p>\r\n<p>\r\n  Auf den folgenden Screenshots können Sie zudem die Verwaltungsansicht\r\n  kennenlernen. Hier planen Sie Events, verwalten Teilnehmerlisten und können\r\n  IhrE Organisation verwalten. Dies inkludiert die Definition von Kategorien für\r\n  eine bessere Organisation sowie die Nominierung von weiteren Nutzern als\r\n  Administratoren oder Veranstaltungsleiter.\r\n</p>\r\n<div>\r\n  <ul id=\"imageGallery\">\r\n    <li>\r\n      <img src=\"assets/images/profile.png\" alt=\"Profildaten verwalten\" />\r\n      <br />\r\n      <label>Profildaten verwalten</label>\r\n    </li>\r\n    <li>\r\n      <img\r\n        src=\"assets/images/myorgs.png\"\r\n        alt=\"Übersicht über verbundene Organisationen\"\r\n      />\r\n      <br />\r\n      <label>Übersicht über verbundene Organisationen</label>\r\n    </li>\r\n    <li>\r\n      <img\r\n        src=\"assets/images/management.png\"\r\n        alt=\"Verwaltung einer Organisation\"\r\n      />\r\n      <br />\r\n      <label>Verwaltung einer Organisation</label>\r\n    </li>\r\n    <li>\r\n      <img\r\n        src=\"assets/images/eventplanner.png\"\r\n        alt=\"Planung der Veranstaltungen\"\r\n      />\r\n      <br />\r\n      <label>Planung der Veranstaltungen</label>\r\n    </li>\r\n  </ul>\r\n</div>\r\n\r\n<hr />\r\n<h2 id=\"price\">Preis</h2>\r\n<p>\r\n  Es gibt natürlich bereits Programme am Markt, welche sich um das Thema\r\n  Event-Management und Teilnehmerverwaltung kümmern.\r\n  <span class=\"highlighted\">plevents</span> eignet sich besonders für die\r\n  Anwendungsfälle, in denen keine komplizierte Buchung mit Bezahlvorgängen\r\n  involviert ist.\r\n</p>\r\n<p>\r\n  Die Grundessenz von <span class=\"highlighted\">plevents</span> ist Einfachheit.\r\n  Das hört auch beim Preis nicht auf. Ein Produkt - ein Preis. Profitieren Sie\r\n  von eher sehr niedrigen und flexiblen Gebühr ohne versteckte Folgekosten oder\r\n  Vertragsfallen.\r\n</p>\r\n<div class=\"row\">\r\n  <div\r\n    class=\"col-12 col-md-10 offset-md-1 col-lg-6 offset-lg-0 col-xl-4 offset-xl-1\"\r\n  >\r\n    <div class=\"card highlight-card mb-3\">\r\n      <div class=\"card-header text-center\">\r\n        <h2>pauschal: 15 € / Monat</h2>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <h5 class=\"card-title\">Volle Transparenz beim Preis</h5>\r\n        <p class=\"card-text\">\r\n          Sie können flexibel Monatlizenzen kaufen, dabei fällt noch die jeweils\r\n          gesetzliche Mehrwertsteuer an. Ein langer Vertrag wird nicht\r\n          abgeschlossen, Sie entscheiden selbst, wie lange Sie\r\n          <span class=\"highlighted\">plevents</span> nutzen möchten.\r\n        </p>\r\n        <a [routerLink]=\"['/' + ROUTES.REGISTER_USER]\" class=\"btn btn-success\"\r\n          >Jetzt kostenlos testen</a\r\n        >\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div\r\n    class=\"col-12 col-md-10 offset-md-1 col-lg-6 offset-lg-0 col-xl-4 offset-xl-2\"\r\n  >\r\n    <div class=\"card highlight-card mb-3\">\r\n      <div class=\"card-header text-center\">\r\n        <h2>Für Vereine & Kirchen</h2>\r\n      </div>\r\n      <div class=\"card-body\">\r\n        <h5 class=\"card-title\">Preis auf Anfrage</h5>\r\n        <p class=\"card-text\">\r\n          Für kirchliche Organisationen und Vereine gibt es unter Umständen eine\r\n          reduzierte Gebühr. Informieren Sie sich unverbindlich per Email bei\r\n          <a href=\"mailto:stefan.strobel@s4-consulting.de\"\r\n            >stefan.strobel@s4-consulting.de</a\r\n          >\r\n        </p>\r\n        <a [routerLink]=\"['/' + ROUTES.REGISTER_USER]\" class=\"btn btn-success\"\r\n          >Jetzt kostenlos testen</a\r\n        >\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<hr />\r\n<h2 id=\"contract\">Vertragslaufzeit</h2>\r\n<p>\r\n  Sollten Sie sich entscheiden,\r\n  <span class=\"highlighted\">plevents</span> einzusetzen, müssen Sie Ihre\r\n  Organisation aktivieren. Dies geschieht durch einen Bestellvorgang einer\r\n  Lizenz. Diese läuft jeweils einen Monat und verlängert sich automatisch um\r\n  einen weiteren Monat. Sie können jederzeit zum Ende des lizenzierten Monats\r\n  kündigen.\r\n</p>\r\n<p>\r\n  Wenn Sie wider Erwarten nicht zufrieden sein sollten, können Sie den Vertrag\r\n  jederzeit beenden oder auslaufen lassen. Ein Vertrag verlängert sich\r\n  automatisch um einen weiteren Monat, wenn Sie nicht vor Monatsende.\r\n</p>\r\n<p>Pro angebrochenen Kalenderonat wird die monatliche Nutzungsgebühr fällig.</p>\r\n\r\n<hr />\r\n<h2 id=\"faq\">Häufige Fragen</h2>\r\n<div class=\"accordion\">\r\n  <div class=\"card\">\r\n    <div class=\"card-header\">\r\n      <h2 class=\"mb-0\">\r\n        <button\r\n          class=\"btn btn-link btn-block text-left\"\r\n          type=\"button\"\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#faq1\"\r\n        >\r\n          Für wen ist <span class=\"highlighted\">plevents</span> gedacht?\r\n        </button>\r\n      </h2>\r\n    </div>\r\n    <div id=\"faq1\" class=\"collapse multi-collapse\">\r\n      <div class=\"card-body\">\r\n        <span class=\"highlighted\">plevents</span> ist die ideale\r\n        Registrier-Plattform für Vereine, Organisationen und Unternehmen für\r\n        Veranstaltungen, zu denen sich die Teilnehmer im Vorfeld anmelden sollen\r\n        oder bei denen die Teilnehmer aufgrund der aktuellen Corona-Verordnung\r\n        ihre Adress- und Kontaktdaten hinterlegen müssen.\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"card\">\r\n    <div class=\"card-header\">\r\n      <h2 class=\"mb-0\">\r\n        <button\r\n          class=\"btn btn-link btn-block text-left\"\r\n          type=\"button\"\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#faq2\"\r\n        >\r\n          Kann ich Events mit einer Bezahlfunktion anlegen?\r\n        </button>\r\n      </h2>\r\n    </div>\r\n    <div id=\"faq2\" class=\"collapse multi-collapse\">\r\n      <div class=\"card-body\">\r\n        Zum aktuellen Zeitpunkt nein.\r\n        <span class=\"highlighted\">plevents</span> ist für eine einfache und\r\n        schnelle Anmeldung zu Veranstaltungen konzipiert. Die Einbindung einer\r\n        Bezahlfunktion würde zu viel Komplexität in den Registrierungsprozess\r\n        bringen.\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"card\">\r\n    <div class=\"card-header\">\r\n      <h2 class=\"mb-0\">\r\n        <button\r\n          class=\"btn btn-link btn-block text-left collapsed\"\r\n          type=\"button\"\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#faq3\"\r\n        >\r\n          Welche Daten werden erfasst?\r\n        </button>\r\n      </h2>\r\n    </div>\r\n    <div id=\"faq3\" class=\"collapse multi-collapse\">\r\n      <div class=\"card-body\">\r\n        Wenn Sie <span class=\"highlighted\">plevents</span> für Ihre Organisation\r\n        einsetzen möchten, registrieren Sie sich mit Ihrer Email-Adresse sowie\r\n        Ihrem Namen. Zusätzlich können Sie ein Logo Ihrer Organisation\r\n        hinterlegen sowie die Farbwahl setzen.\r\n        <span class=\"highlighted\">plevents</span> speichert zudem alle\r\n        relevanten Informationen zu Events, diese bestehen u.a. aus:\r\n        <ul>\r\n          <li>Veranstaltungsname</li>\r\n          <li>Datum / Wochentag</li>\r\n          <li>Uhrzeit</li>\r\n          <li>maximale Teilnehmerzahl</li>\r\n        </ul>\r\n        Von den Teilnehmern werden bei einer Registrierung zudem folgende\r\n        personenbezogene Daten erhoben:\r\n        <ul>\r\n          <li>Vorname</li>\r\n          <li>Nachname</li>\r\n          <li>Adresse</li>\r\n          <li>Email</li>\r\n          <li>Telefonnummer</li>\r\n        </ul>\r\n        Alle Daten werden sicher auf Servern in einem deutschen Rechenzentrum\r\n        gespeichert. Es erfolgt ausdrücklich <b>keine</b> weitere\r\n        Datenverarbeitung oder -weitergabe.\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"card\">\r\n    <div class=\"card-header\">\r\n      <h2 class=\"mb-0\">\r\n        <button\r\n          class=\"btn btn-link btn-block text-left collapsed\"\r\n          type=\"button\"\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#faq4\"\r\n        >\r\n          Was kostet <span class=\"highlighted\">plevents</span>?\r\n        </button>\r\n      </h2>\r\n    </div>\r\n    <div id=\"faq4\" class=\"collapse multi-collapse\">\r\n      <div class=\"card-body\">\r\n        <span class=\"highlighted\">plevents</span> kostet pro Monat 15€ netto\r\n        zzgl. gesetzlicher Mehrwertsteuer. Für Vereine und kirchliche\r\n        Organisationen ist <span class=\"highlighted\">plevents</span> kann es\r\n        nach Absprache einen reduzierten Preis geben.\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"card\">\r\n    <div class=\"card-header\">\r\n      <h2 class=\"mb-0\">\r\n        <button\r\n          class=\"btn btn-link btn-block text-left collapsed\"\r\n          type=\"button\"\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#faq5\"\r\n        >\r\n          Kann ich <span class=\"highlighted\">plevents</span> testen?\r\n        </button>\r\n      </h2>\r\n    </div>\r\n    <div id=\"faq5\" class=\"collapse multi-collapse\">\r\n      <div class=\"card-body\">\r\n        Ja, Sie können sich jederzeit ein kostenloses Nutzerprofil erstellen und\r\n        eine Test-Organisation einrichten. Somit lernen Sie alle Funktionen von\r\n        <span class=\"highlighted\">plevents</span> kennen und können dann\r\n        entscheiden, ob Sie es weiterhin einsetzen möchten.\r\n        <br />\r\n        <a [routerLink]=\"['/' + ROUTES.REGISTER_USER]\" class=\"btn btn-success\">\r\n          <i class=\"fas fa-chevron-right\" style=\"color: inherit\"></i>\r\n          Jetzt kostenlos registrieren und alle Funktionen testen\r\n        </a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"card\">\r\n    <div class=\"card-header\">\r\n      <h2 class=\"mb-0\">\r\n        <button\r\n          class=\"btn btn-link btn-block text-left collapsed\"\r\n          type=\"button\"\r\n          data-toggle=\"collapse\"\r\n          data-target=\"#faq6\"\r\n        >\r\n          Wie sind Vertragslaufzeit und Kündigung geregelt?\r\n        </button>\r\n      </h2>\r\n    </div>\r\n    <div id=\"faq6\" class=\"collapse multi-collapse\">\r\n      <div class=\"card-body\">\r\n        <span class=\"highlighted\">plevents</span> ist nicht nur günstig, sondern\r\n        auch fair. Daher gilt:\r\n        <ul>\r\n          <li>\r\n            <b>monatliche Vertragslaufzeit</b> - kein langfristiges Risiko\r\n          </li>\r\n          <li><b>jederzeit kündbar</b> - bis 2 Tage zum Monatsende</li>\r\n        </ul>\r\n        <br />\r\n        <a [routerLink]=\"['/' + ROUTES.REGISTER_USER]\" class=\"btn btn-success\">\r\n          <i class=\"fas fa-chevron-right\" style=\"color: inherit\"></i>\r\n          Jetzt kostenlos registrieren und alle Funktionen testen\r\n        </a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Injectable } from '@angular/core';\r\nimport { Adapter } from '../helpers/adapter';\r\nimport { Tenant, TenantAdapter } from './tenant';\r\n\r\nexport class Invitation {\r\n  id: string;\r\n  email: string;\r\n  tenantId: string;\r\n  tenant: Tenant;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class InvitationAdapter implements Adapter<Invitation> {\r\n  constructor(private tenantAdapter: TenantAdapter) {}\r\n  adapt(item: any): Invitation {\r\n    const invitation = new Invitation();\r\n    invitation.id = item.id;\r\n    invitation.email = item.email;\r\n    invitation.tenantId = item.tenantId;\r\n    if (item.tenant) {\r\n      invitation.tenant = this.tenantAdapter.adapt(item.tenant);\r\n    }\r\n    return invitation;\r\n  }\r\n}\r\n","import { LoginComponent } from './views/login/login.component';\r\nimport { DashboardComponent } from './views/dashboard/dashboard.component';\r\nimport { BasicAuthInterceptor } from './helpers/basic-auth.interceptor';\r\nimport { ErrorInterceptor } from './helpers/error.interceptor';\r\nimport { AuthGuard } from './helpers/auth.guard';\r\nimport { EventsComponent } from './views/events/events.component';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { NgModule } from '@angular/core';\r\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { TenantComponent } from './views/tenant/tenant.component';\r\nimport { ErrorComponent } from './views/error/error.component';\r\nimport { RegistrationComponent } from './views/registration/registration.component';\r\nimport { TenantRegistrationComponent } from './views/tenant-registration/tenant-registration.component';\r\nimport { ImprintComponent } from './views/imprint/imprint.component';\r\nimport { ProfileComponent } from './views/profile/profile.component';\r\nimport { LegalComponent } from './views/legal/legal.component';\r\nimport { TenantGuard } from './helpers/tenant.guard';\r\nimport { ROLE } from '../../../common/tenant-relation';\r\nimport { CompleteRegistrationComponent } from './views/complete-registration/complete-registration.component';\r\nimport { PasswordResetComponent } from './views/password-reset/password-reset.component';\r\nimport { PasswordForgottenComponent } from './views/password-forgotten/password-forgotten.component';\r\nimport { ROUTES } from '../../../common/frontend.routes';\r\nimport { IntroComponent } from './views/intro/intro.component';\r\nimport { MyAccountsComponent } from './views/my-accounts/my-accounts.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: ROUTES.HOME,\r\n    component: IntroComponent,\r\n  },\r\n  {\r\n    path: ROUTES.LOGIN,\r\n    component: LoginComponent,\r\n  },\r\n  {\r\n    path: ROUTES.REGISTER_TENANT,\r\n    component: TenantRegistrationComponent,\r\n    canActivate: [AuthGuard],\r\n  },\r\n  {\r\n    path: ROUTES.PASSWORD_FORGOTTEN,\r\n    component: PasswordForgottenComponent,\r\n  },\r\n  {\r\n    path: ROUTES.PASSWORD_RESET,\r\n    component: PasswordResetComponent,\r\n  },\r\n  {\r\n    path: ROUTES.REGISTER_USER,\r\n    component: RegistrationComponent,\r\n  },\r\n  {\r\n    path: 'fehler/:errortype',\r\n    component: ErrorComponent,\r\n  },\r\n  {\r\n    path: ROUTES.IMPRINT,\r\n    component: ImprintComponent,\r\n  },\r\n  {\r\n    path: ROUTES.LEGAL,\r\n    component: LegalComponent,\r\n  },\r\n  {\r\n    path: ROUTES.REGISTER_USER_FINISH,\r\n    component: CompleteRegistrationComponent,\r\n  },\r\n  {\r\n    path: ROUTES.MY_TENANTS,\r\n    component: MyAccountsComponent,\r\n    canActivate: [AuthGuard],\r\n  },\r\n  {\r\n    path: ROUTES.PROFILE,\r\n    component: ProfileComponent,\r\n    canActivate: [AuthGuard],\r\n  },\r\n  {\r\n    path: 'o/:tenantPath',\r\n    children: [\r\n      {\r\n        path: ROUTES.LOGIN,\r\n        component: LoginComponent,\r\n      },\r\n      {\r\n        path: ROUTES.TENANT_PLANNER,\r\n        component: DashboardComponent,\r\n        canActivate: [AuthGuard, TenantGuard],\r\n      },\r\n      {\r\n        path: ROUTES.TENANT_MANAGEMENT,\r\n        component: TenantComponent,\r\n        canActivate: [AuthGuard, TenantGuard],\r\n        data: { role: ROLE.ADMIN },\r\n      },\r\n      {\r\n        path: ROUTES.TENANT_EVENTS,\r\n        component: EventsComponent,\r\n      },\r\n      {\r\n        path: ROUTES.REGISTER_USER,\r\n        component: RegistrationComponent,\r\n      },\r\n      {\r\n        path: '**',\r\n        redirectTo: ROUTES.TENANT_EVENTS,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    path: '**',\r\n    redirectTo: ROUTES.HOME,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule],\r\n  providers: [\r\n    { provide: HTTP_INTERCEPTORS, useClass: BasicAuthInterceptor, multi: true },\r\n    { provide: HTTP_INTERCEPTORS, useClass: ErrorInterceptor, multi: true },\r\n  ],\r\n})\r\nexport class AppRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { clone } from 'lodash';\r\nimport { User } from 'src/app/models/user';\r\nimport { AuthenticationService } from 'src/app/services/authentication.service';\r\nimport { NotificationService } from 'src/app/services/notification.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.component.html',\r\n  styleUrls: ['./profile.component.scss'],\r\n})\r\nexport class ProfileComponent implements OnInit {\r\n  user: User = null;\r\n  nameForm: FormGroup = new FormGroup({\r\n    name: new FormControl('', Validators.required),\r\n  });\r\n  passwordForm: FormGroup = new FormGroup({\r\n    oldPassword: new FormControl('', Validators.required),\r\n    newPassword: new FormControl('', Validators.required),\r\n  });\r\n  operationOngoing = {\r\n    nameChange: false,\r\n    passwordChange: false,\r\n    accountDeletion: false,\r\n  };\r\n\r\n  constructor(\r\n    private userService: UserService,\r\n    private authService: AuthenticationService,\r\n    private notification: NotificationService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.userService.getProfile().subscribe((user: User) => {\r\n      this.user = user;\r\n      this.authService.update(this.user);\r\n      this.nameForm.get('name').setValue(this.user.name);\r\n    });\r\n  }\r\n\r\n  isInvalid(formControlName: string): boolean {\r\n    if (this.nameForm.contains(formControlName)) {\r\n      return (\r\n        this.nameForm.get(formControlName).invalid &&\r\n        this.nameForm.get(formControlName).touched\r\n      );\r\n    }\r\n    if (this.passwordForm.contains(formControlName)) {\r\n      return (\r\n        this.passwordForm.get(formControlName).invalid &&\r\n        this.passwordForm.get(formControlName).touched\r\n      );\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  updateName(): void {\r\n    if (this.nameForm.invalid) {\r\n      this.nameForm.markAllAsTouched();\r\n      return;\r\n    }\r\n    this.operationOngoing.nameChange = true;\r\n    const updatePayload = clone(this.user);\r\n    updatePayload.name = this.nameForm.get('name').value;\r\n    this.userService.updateProfile(updatePayload).subscribe(\r\n      (updatedUser: User) => {\r\n        this.user = updatedUser;\r\n        this.authService.update(this.user);\r\n        this.notification.success('Name geändert');\r\n        this.operationOngoing.nameChange = false;\r\n      },\r\n      error => {\r\n        console.error(error);\r\n        this.notification.error('Es trat ein Fehler auf');\r\n        this.operationOngoing.nameChange = false;\r\n      }\r\n    );\r\n  }\r\n\r\n  changePassword(): void {\r\n    if (this.passwordForm.invalid) {\r\n      this.passwordForm.markAllAsTouched();\r\n      return;\r\n    }\r\n    this.operationOngoing.passwordChange = true;\r\n    this.userService\r\n      .updatePassword(\r\n        this.passwordForm.get('oldPassword').value,\r\n        this.passwordForm.get('newPassword').value\r\n      )\r\n      .subscribe(\r\n        () => {\r\n          this.notification.success('Passwort geändert');\r\n          this.authService.update(\r\n            this.user,\r\n            this.passwordForm.get('newPassword').value\r\n          );\r\n          this.operationOngoing.passwordChange = false;\r\n          this.passwordForm.reset();\r\n        },\r\n        error => {\r\n          console.error(error);\r\n          this.notification.error('Es trat ein Fehler auf');\r\n          this.operationOngoing.passwordChange = false;\r\n        }\r\n      );\r\n  }\r\n\r\n  deleteProfile(): void {\r\n    this.notification.confirm({\r\n      title: 'Account löschen?',\r\n      text:\r\n        'Möchten Sie wirklich Ihr persönliches Profil löschen? Alle Daten werden sofort gelöscht. Diese Aktion kann nicht rückgängig gemacht werden!',\r\n      yesButtonClass: 'btn-danger',\r\n      yesButtonText: 'Löschen',\r\n      yesCallback: () => {\r\n        this.operationOngoing.accountDeletion = true;\r\n        this.userService.deleteProfile().subscribe(\r\n          () => {\r\n            this.notification.success('Ihr Profil wurde gelöscht');\r\n            this.authService.logout();\r\n          },\r\n          error => {\r\n            console.error(error);\r\n            this.notification.error('Es trat ein Fehler auf');\r\n            this.operationOngoing.accountDeletion = false;\r\n          }\r\n        );\r\n      },\r\n    });\r\n  }\r\n}\r\n","<h2>Profilverwaltung</h2>\r\n<p>\r\n  Verwalten Sie hier Ihren Namen, ändern Sie das Passwort oder löschen Sie Ihr\r\n  Nutzerprofil.\r\n</p>\r\n\r\n<hr />\r\n\r\n<!-- two-column layout -->\r\n<div class=\"row\">\r\n  <div class=\"col-12 col-lg-6 col-xl-5\">\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <h4>Name</h4>\r\n        <p>\r\n          Ihr Name wird in der Navigationsleiste angezeigt und ist auch in der\r\n          Verwaltung der Organisationen für alle anderen Administratoren\r\n          sichtbar. Ihr Name wird allerdings nicht auf öffentlich zugänglichen\r\n          Seiten angezeigt.\r\n        </p>\r\n        <form [formGroup]=\"nameForm\" *ngIf=\"user\">\r\n          <div class=\"row\">\r\n            <div class=\"col-12\" [ngClass]=\"{ invalid: isInvalid('name') }\">\r\n              <label for=\"name\">Name *</label>\r\n              <br />\r\n              <input\r\n                class=\"form-control\"\r\n                id=\"name\"\r\n                type=\"text\"\r\n                formControlName=\"name\"\r\n              />\r\n            </div>\r\n            <div class=\"col-12 text-right mt-3\">\r\n              <button\r\n                class=\"btn btn-outline-success\"\r\n                (click)=\"updateName()\"\r\n                [disabled]=\"operationOngoing.nameChange\"\r\n              >\r\n                <loading\r\n                  *ngIf=\"operationOngoing.nameChange\"\r\n                  textClass=\"text-success\"\r\n                ></loading>\r\n                Speichern\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n        <div class=\"text-center\">\r\n          <loading *ngIf=\"!user\"></loading>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12 mt-5 mb-5\">\r\n        <h4>Passwort</h4>\r\n        <p>\r\n          Ändern Sie hier, falls gewünscht, Ihr Passwort. Vergeben Sie dazu ein\r\n          neues Passwort und bestätigen Sie die Änderung durch Eingabe Ihres\r\n          bisherigen / aktuellen Passworts.\r\n        </p>\r\n        <form [formGroup]=\"passwordForm\" *ngIf=\"user\">\r\n          <div class=\"row\">\r\n            <div\r\n              class=\"col-12 col-md-6\"\r\n              [ngClass]=\"{ invalid: isInvalid('oldPassword') }\"\r\n            >\r\n              <label for=\"oldPassword\">Altes Passwort *</label>\r\n              <br />\r\n              <input\r\n                class=\"form-control\"\r\n                id=\"oldPassword\"\r\n                type=\"password\"\r\n                formControlName=\"oldPassword\"\r\n              />\r\n            </div>\r\n            <div\r\n              class=\"col-12 col-md-6\"\r\n              [ngClass]=\"{ invalid: isInvalid('newPassword') }\"\r\n            >\r\n              <label for=\"newPassword\">Neues Passwort *</label>\r\n              <br />\r\n              <input\r\n                class=\"form-control\"\r\n                id=\"newPassword\"\r\n                type=\"password\"\r\n                formControlName=\"newPassword\"\r\n              />\r\n            </div>\r\n            <div class=\"col-12 text-right mt-3\">\r\n              <button\r\n                class=\"btn btn-outline-success\"\r\n                (click)=\"changePassword()\"\r\n                [disabled]=\"operationOngoing.passwordChange\"\r\n              >\r\n                <loading\r\n                  *ngIf=\"operationOngoing.passwordChange\"\r\n                  textClass=\"text-success\"\r\n                ></loading>\r\n                Passwort ändern\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n        <div class=\"text-center\">\r\n          <loading *ngIf=\"!user\"></loading>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"col-12 col-lg-6 col-xl-5 offset-xl-2\">\r\n    <h4>Löschung</h4>\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        Falls Sie Ihr persönliches Profil nicht mehr benötigen, können Sie hier\r\n        jegliche personenbezogene Daten löschen. Hierzu gehören:\r\n        <ul>\r\n          <li>Ihr Name</li>\r\n          <li>Ihre Email-Adresse</li>\r\n          <li>alle Verbindungen zu plevents Organisationen</li>\r\n        </ul>\r\n        Die Löschung erfolgt sofort und kann <b>nicht</b> rückgängig gemacht\r\n        werden!\r\n      </div>\r\n      <div class=\"col-12 text-right\" *ngIf=\"user\">\r\n        <button\r\n          class=\"btn btn-outline-danger\"\r\n          (click)=\"deleteProfile()\"\r\n          [disabled]=\"operationOngoing.accountDeletion\"\r\n        >\r\n          <loading\r\n            *ngIf=\"operationOngoing.accountDeletion\"\r\n            textClass=\"text-danger\"\r\n          ></loading>\r\n          Mein Profil löschen\r\n        </button>\r\n      </div>\r\n      <div class=\"col-12 text-center\">\r\n        <loading *ngIf=\"!user\"></loading>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Event } from './event';\r\n\r\nexport class Week {\r\n  number: number;\r\n  startOfWeek: moment.Moment;\r\n  endOfWeek: moment.Moment;\r\n  events: Event[] = new Array<Event>();\r\n\r\n  constructor(number: number) {\r\n    this.number = number;\r\n  }\r\n}\r\n","import { ParticipantI } from '../../../../common/participant';\r\nimport { Injectable } from '@angular/core';\r\nimport { Adapter } from '../helpers/adapter';\r\n\r\nexport class Participant implements ParticipantI {\r\n  id?: number;\r\n  email: string;\r\n  phone: string;\r\n  firstname: string;\r\n  lastname: string;\r\n  name: string;\r\n  street: string;\r\n  zip: string;\r\n  city: string;\r\n  eventId: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ParticipantAdapter implements Adapter<Participant> {\r\n  adapt(item: any): Participant {\r\n    const participant = new Participant();\r\n    participant.id = item.id;\r\n    participant.firstname = item.firstname;\r\n    participant.lastname = item.lastname;\r\n    participant.name = item.name;\r\n    participant.email = item.email;\r\n    participant.phone = item.phone;\r\n    participant.street = item.street;\r\n    participant.zip = item.zip;\r\n    participant.city = item.city;\r\n    participant.eventId = item.eventId;\r\n    return participant;\r\n  }\r\n}\r\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}