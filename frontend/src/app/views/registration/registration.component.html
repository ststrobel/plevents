<div class="row" *ngIf="!success && !isLoggedIn">
  <div class="col-12 col-md-8 offset-md-2 col-xl-4 offset-xl-4">
    <div class="card">
      <h4 class="card-header">Persönliches Profil anlegen</h4>
      <div class="card-body">
        <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()">
          <div class="form-group">
            <label for="email">Email</label>
            <input
              id="email"
              type="email"
              formControlName="email"
              class="form-control"
              [ngClass]="{
                'is-invalid': isInvalid('email')
              }"
            />
            <div *ngIf="isInvalid('email')" class="invalid-feedback">
              <div *ngIf="isInvalid('email')">Bitte Email angeben</div>
            </div>
          </div>
          <div class="form-group">
            <label for="name">Name</label>
            <input
              id="name"
              type="text"
              formControlName="name"
              class="form-control"
              [ngClass]="{
                'is-invalid': isInvalid('name')
              }"
            />
            <div *ngIf="isInvalid('name')" class="invalid-feedback">
              <div *ngIf="isInvalid('name')">Bitte Name angeben</div>
            </div>
          </div>
          <div class="form-group">
            <label for="password">Passwort</label>
            <input
              id="password"
              type="password"
              formControlName="password"
              class="form-control"
              [ngClass]="{
                'is-invalid': isInvalid('password')
              }"
            />
            <div *ngIf="isInvalid('password')" class="invalid-feedback">
              <div *ngIf="isInvalid('password')">Bitte Passwort angeben</div>
            </div>
          </div>
          <div class="form-group">
            <div class="form-check">
              <input
                class="form-check-input"
                id="dataPrivacyCheck"
                type="checkbox"
                formControlName="dataPrivacyCheck"
                required
              />
              <label
                class="form-check-label mt-0"
                for="dataPrivacyCheck"
                [ngClass]="{
                  'is-invalid': isInvalid('dataPrivacyCheck')
                }"
                >Hiermit bestätige ich, dass ich die
                <a href="/rechtliches#datenschutz" target="_blank"
                  >Datenschutzbestimmungen</a
                >
                gelesen habe und diesen zustimme. *</label
              >
              <div
                *ngIf="isInvalid('dataPrivacyCheck')"
                class="invalid-feedback"
              >
                Bitte stimmen Sie den Datenschutzbestimmungen zu.
              </div>
            </div>
          </div>
          <div class="text-right">
            <button [disabled]="loading" class="btn btn-success">
              <span
                *ngIf="loading"
                class="spinner-border spinner-border-sm mr-1"
              ></span>
              Registrieren
            </button>
          </div>
          <div *ngIf="error" class="alert alert-danger mt-3 mb-0">
            {{ error }}
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div *ngIf="success" class="alert alert-success mt-3 mb-0">
  Bitte bestätigen Sie Ihre Organisation, indem Sie in der Registrierungs-Email,
  die wir Ihnen eben geschickt haben, den Bestätigungslink klicken.
  <br />
  Sie können dieses Browserfenster nun schließen.
</div>

<div *ngIf="isLoggedIn" class="alert alert-warning mt-3 mb-0 d-flex flex-row">
  <div style="width: 30px">
    <i class="fas fa-exclamation-triangle"></i>
  </div>
  <div>
    Sie sind derzeit bereits eingeloggt und können sich nicht nochmals
    registrieren.
    <br />
    Sollten Sie ein zweites Profil erstellen wollen, loggen Sie sich erst aus
    und registrieren Sie sich danach erneut.
  </div>
</div>
