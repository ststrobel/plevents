<h2>Profilverwaltung</h2>
<p>
  Verwalten Sie hier Ihren Namen, ändern Sie das Passwort oder behalten Sie den
  Überblick über die mit Ihnen verbundenen Accounts.
</p>

<hr />
<div class="row">
  <div class="col-12 col-xl-6">
    <h4>Name</h4>
    <p>
      Ihr Name wird in der Navigationsleiste angezeigt und ist auch in der
      Verwaltung der Accounts für alle anderen Administratoren sichtbar. Ihr
      Name wird allerdings nicht auf öffentlich zugänglichen Seiten angezeigt.
    </p>
    <form [formGroup]="nameForm">
      <div class="row">
        <div class="col-12" [ngClass]="{ invalid: isInvalid('name') }">
          <label for="name">Name *</label>
          <br />
          <input
            class="form-control"
            id="name"
            type="text"
            formControlName="name"
          />
        </div>
        <div class="col-12 col-md-6 offset-md-6 col-xl-5 offset-xl-7">
          <button
            class="btn btn-block btn-outline-success"
            (click)="updateName()"
            style="margin-top: 32px"
            [disabled]="operationOngoing"
          >
            Speichern
          </button>
        </div>
      </div>
    </form>
  </div>
  <div class="col-12 col-xl-6">
    <h4>Passwort</h4>
    <p>
      Ändern Sie hier, falls gewünscht, Ihr Passwort. Vergeben Sie dazu ein
      neues Passwort und bestätigen Sie die Änderung durch Eingabe Ihres
      bisherigen / aktuellen Passworts.
    </p>
    <form [formGroup]="passwordForm">
      <div class="row">
        <div
          class="col-12 col-md-6"
          [ngClass]="{ invalid: isInvalid('oldPassword') }"
        >
          <label for="oldPassword">Altes Passwort *</label>
          <br />
          <input
            class="form-control"
            id="oldPassword"
            type="password"
            formControlName="oldPassword"
          />
        </div>
        <div
          class="col-12 col-md-6"
          [ngClass]="{ invalid: isInvalid('newPassword') }"
        >
          <label for="newPassword">Neues Passwort *</label>
          <br />
          <input
            class="form-control"
            id="newPassword"
            type="password"
            formControlName="newPassword"
          />
        </div>
        <div class="col-12 col-md-6 offset-md-6 col-xl-5 offset-xl-7">
          <button
            class="btn btn-block btn-outline-success"
            (click)="changePassword()"
            style="margin-top: 32px"
            [disabled]="operationOngoing"
          >
            Passwort ändern
          </button>
        </div>
      </div>
    </form>
  </div>
</div>

<hr />

<h4>Accounts</h4>
<p>
  Die folgende Übersicht listet alle Accounts auf, denen Sie als Administrator
  zugeordnet sind.
</p>
<ul class="list-group" *ngIf="tenants && tenants.length > 0">
  <li
    class="list-group-item sg-hoverable-list-item clickable"
    *ngFor="let tenant of tenants"
    [routerLink]="['/' + tenant.path, 'verwaltung']"
  >
    {{ tenant.name }}
  </li>
</ul>
<div class="alert alert-secondary" *ngIf="tenants && tenants.length === 0">
  Sie sind noch keinem Account zugeordnet. Möchten Sie einen erstellen?
</div>
<div class="alert alert-light" *ngIf="!tenants">
  Accounts werden geladen ...
</div>

<hr />

<h4>Löschung</h4>
<div class="row">
  <div class="col-12">
    Falls Sie Ihr persönliches Profil nicht mehr benötigen, können Sie hier
    jegliche personenbezogene Daten löschen. Hierzu gehören:
    <ul>
      <li>Ihr Name</li>
      <li>Ihre Email-Adresse</li>
      <li>alle Verbindungen zu plevents Accounts</li>
    </ul>
    Die Löschung erfolgt sofort und kann <b>nicht</b> rückgängig gemacht werden!
  </div>
  <div class="col-12 col-md-3 offset-md-9">
    <button
      class="btn btn-block btn-outline-danger"
      (click)="deleteProfile()"
      [disabled]="operationOngoing"
    >
      Mein Profil löschen
    </button>
  </div>
</div>
